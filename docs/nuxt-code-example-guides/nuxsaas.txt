Directory structure:
â””â”€â”€ nuxsaas-nuxsaas/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ eslint.config.mjs
    â”œâ”€â”€ LICENSE
    â”œâ”€â”€ nuxt.config.ts
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json
    â”œâ”€â”€ vitest.config.ts
    â”œâ”€â”€ wrangler.example.toml
    â”œâ”€â”€ .env.example
    â”œâ”€â”€ .nvmrc
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ app.config.ts
    â”‚   â”œâ”€â”€ app.vue
    â”‚   â”œâ”€â”€ assets/
    â”‚   â”‚   â””â”€â”€ css/
    â”‚   â”‚       â””â”€â”€ main.css
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ FlexThreeColumn.vue
    â”‚   â”‚   â”œâ”€â”€ Logo.vue
    â”‚   â”‚   â”œâ”€â”€ SiteNavigation.vue
    â”‚   â”‚   â”œâ”€â”€ UserNavigation.vue
    â”‚   â”‚   â”œâ”€â”€ AdminTable/
    â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue
    â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts
    â”‚   â”‚   â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ColumnControl.vue
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ filters/
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DateRange.vue
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Tabs.vue
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Checkbox/
    â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Pagination/
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SortControl/
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ index.vue
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ SortableContent.vue
    â”‚   â”‚   â”‚   â””â”€â”€ composables/
    â”‚   â”‚   â”‚       â”œâ”€â”€ useColumnControl.ts
    â”‚   â”‚   â”‚       â””â”€â”€ useSelectControl.ts
    â”‚   â”‚   â”œâ”€â”€ ColorModeToggler/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â””â”€â”€ LocaleToggler/
    â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚       â””â”€â”€ index.vue
    â”‚   â”œâ”€â”€ composables/
    â”‚   â”‚   â”œâ”€â”€ useAdminTable.ts
    â”‚   â”‚   â”œâ”€â”€ useAuth.ts
    â”‚   â”‚   â””â”€â”€ useCustomFetch.ts
    â”‚   â”œâ”€â”€ i18n/
    â”‚   â”‚   â”œâ”€â”€ global.json
    â”‚   â”‚   â””â”€â”€ i18n.config.ts
    â”‚   â”œâ”€â”€ layouts/
    â”‚   â”‚   â”œâ”€â”€ admin.vue
    â”‚   â”‚   â”œâ”€â”€ default.vue
    â”‚   â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”‚   â”œâ”€â”€ AppFooter.vue
    â”‚   â”‚   â”‚   â”œâ”€â”€ AppNavbar.vue
    â”‚   â”‚   â”‚   â””â”€â”€ SearchPalette.vue
    â”‚   â”‚   â””â”€â”€ menu/
    â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚       â””â”€â”€ index.ts
    â”‚   â”œâ”€â”€ middleware/
    â”‚   â”‚   â””â”€â”€ auth.global.ts
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ admin.vue
    â”‚   â”‚   â”œâ”€â”€ index.json
    â”‚   â”‚   â”œâ”€â”€ index.vue
    â”‚   â”‚   â”œâ”€â”€ 403/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”œâ”€â”€ admin/
    â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â”œâ”€â”€ maintenance/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audit-log/
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ db-stats/
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration/
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â”œâ”€â”€ subscription/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”‚   â””â”€â”€ user/
    â”‚   â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚       â”œâ”€â”€ index.vue
    â”‚   â”‚   â”‚       â””â”€â”€ components/
    â”‚   â”‚   â”‚           â”œâ”€â”€ BanUserModal.vue
    â”‚   â”‚   â”‚           â””â”€â”€ CreateUserModal.vue
    â”‚   â”‚   â”œâ”€â”€ forgot-password/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”œâ”€â”€ pricing/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”œâ”€â”€ profile/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”œâ”€â”€ reset-password/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â”œâ”€â”€ signin/
    â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.json
    â”‚   â”‚   â”‚   â””â”€â”€ index.vue
    â”‚   â”‚   â””â”€â”€ signup/
    â”‚   â”‚       â”œâ”€â”€ i18n.json
    â”‚   â”‚       â””â”€â”€ index.vue
    â”‚   â”œâ”€â”€ plugins/
    â”‚   â”‚   â”œâ”€â”€ auth.client.ts
    â”‚   â”‚   â”œâ”€â”€ auth.server.ts
    â”‚   â”‚   â””â”€â”€ customFetch.ts
    â”‚   â””â”€â”€ utils/
    â”‚       â”œâ”€â”€ columns.ts
    â”‚       â”œâ”€â”€ components.ts
    â”‚       â”œâ”€â”€ date.ts
    â”‚       â””â”€â”€ types.ts
    â”œâ”€â”€ public/
    â”‚   â”œâ”€â”€ favicons/
    â”‚   â”‚   â””â”€â”€ site.webmanifest
    â”‚   â””â”€â”€ screenshots/
    â”‚       â”œâ”€â”€ dashboard.webp
    â”‚       â”œâ”€â”€ home.webp
    â”‚       â”œâ”€â”€ pricing.webp
    â”‚       â”œâ”€â”€ signin.webp
    â”‚       â”œâ”€â”€ subscription.webp
    â”‚       â””â”€â”€ users.webp
    â”œâ”€â”€ server/
    â”‚   â”œâ”€â”€ tsconfig.json
    â”‚   â”œâ”€â”€ api/
    â”‚   â”‚   â”œâ”€â”€ admin/
    â”‚   â”‚   â”‚   â”œâ”€â”€ count/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [tableName]/
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ [columnName].get.ts
    â”‚   â”‚   â”‚   â”œâ”€â”€ list/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [tableName].get.ts
    â”‚   â”‚   â”‚   â””â”€â”€ maintenance/
    â”‚   â”‚   â”‚       â”œâ”€â”€ db-stats.ts
    â”‚   â”‚   â”‚       â””â”€â”€ ensure-payment-customers.ts
    â”‚   â”‚   â””â”€â”€ auth/
    â”‚   â”‚       â””â”€â”€ [...all].ts
    â”‚   â”œâ”€â”€ database/
    â”‚   â”‚   â”œâ”€â”€ drizzle.config.ts
    â”‚   â”‚   â””â”€â”€ schema/
    â”‚   â”‚       â”œâ”€â”€ auditLog.ts
    â”‚   â”‚       â”œâ”€â”€ auth.ts
    â”‚   â”‚       â””â”€â”€ index.ts
    â”‚   â”œâ”€â”€ middleware/
    â”‚   â”‚   â”œâ”€â”€ 0.common.ts
    â”‚   â”‚   â””â”€â”€ 1.auth.ts
    â”‚   â”œâ”€â”€ types/
    â”‚   â”‚   â””â”€â”€ hub.d.ts
    â”‚   â””â”€â”€ utils/
    â”‚       â”œâ”€â”€ auditLogger.ts
    â”‚       â”œâ”€â”€ auth.ts
    â”‚       â”œâ”€â”€ db.ts
    â”‚       â”œâ”€â”€ dbStats.ts
    â”‚       â”œâ”€â”€ drivers.ts
    â”‚       â”œâ”€â”€ polar.ts
    â”‚       â”œâ”€â”€ query.ts
    â”‚       â”œâ”€â”€ runtimeConfig.ts
    â”‚       â””â”€â”€ stripe.ts
    â”œâ”€â”€ shared/
    â”‚   â””â”€â”€ utils/
    â”‚       â””â”€â”€ types.ts
    â”œâ”€â”€ tests/
    â”‚   â”œâ”€â”€ setup.ts
    â”‚   â””â”€â”€ e2e/
    â”‚       â”œâ”€â”€ app.test.ts
    â”‚       â”œâ”€â”€ auth.test.ts
    â”‚       â”œâ”€â”€ i18n.test.ts
    â”‚       â”œâ”€â”€ signin.test.ts
    â”‚       â””â”€â”€ signup.test.ts
    â”œâ”€â”€ .github/
    â”‚   â””â”€â”€ FUNDING.yml
    â””â”€â”€ .husky/
        â””â”€â”€ pre-commit

================================================
FILE: README.md
================================================
<p align="center">
  <img src="public/logo.svg" alt="NuxSaaS Logo" width="160" height="160"/>
</p>

<h1 align="center">NuxSaaS</h1>

<p align="center">
  <a href="https://nuxsaas.com" target="_blank">Website</a> Â·
  <a href="https://docs.nuxsaas.com" target="_blank">Documentation</a> Â·
  <a href="https://discord.gg/8V4kSu43MW" target="_blank">Discord</a> Â·
  <a href="https://www.youtube.com/watch?v=u1H8ChQ5Pl8" target="_blank">Youtube</a> Â·
  <a href="https://x.com/cyanhall" target="_blank">
    @Cyanhall
  </a>
</p>

<p align="center">
  <a href="https://nuxt.com/" target="_blank">
    <img alt="Built with Nuxt 4" src="https://img.shields.io/badge/Built%20with-Nuxt%204-00DC82?style=flat-square&logo=nuxt.js" />
  </a>
  <a href="https://www.typescriptlang.org/" target="_blank">
    <img alt="Language TypeScript" src="https://img.shields.io/badge/Language-TypeScript-blue?style=flat-square&logo=typescript" />
  </a>
  <a href="https://www.postgresql.org/" target="_blank">
    <img alt="Database PostgreSQL" src="https://img.shields.io/badge/Database-PostgreSQL-blue?style=flat-square&logo=postgresql" />
  </a>
  <a href="https://tailwindcss.com/" target="_blank">
    <img alt="Tailwind CSS" src="https://img.shields.io/badge/Styling-Tailwind%20CSS-38B2AC?style=flat-square&logo=tailwind-css" />
  </a>
  <a href="https://github.com/NuxSaaS/NuxSaaS/blob/main/LICENSE" target="_blank">
    <img alt="License MIT" src="https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square" />
  </a>
</p>

<p align="center">
  <b>Nuxt.js Full-Stack SaaS Starter Kit - Free & Open Source</b>
  <br />
  Modern, Production-Ready, and Developer-Friendly
</p>

## âœ¨ Features

- ğŸš€ **Modern Tech Stack** - Built with Nuxt 4, Vue 3, TypeScript
- ğŸ”’ **Secure Auth** - Better Auth with OAuth2 social logins
- ğŸ’¾ **Enterprise Database** - PostgreSQL with Drizzle ORM
- ğŸ’³ **Payment Ready** - Stripe/Polar integration for subscription
- ğŸ“§ **Email Integration** - Built-in Resend support
- ğŸ“Š **Beautiful Dashboard** - Admin panel with charts
- ğŸŒ **I18n Ready** - Multi-language support out of the box
- ğŸ“± **Responsive** - Mobile-first design approach
- ğŸ¯ **Developer Experience** - ESLint + TypeScript for better DX

## ğŸš€ Quick Start

```bash
# 1. Clone the repository
git clone https://github.com/NuxSaaS/NuxSaaS.git
cd NuxSaaS

# 2. Use Node.js v22 LTS
nvm use

# 3. Install dependencies
npm install

# 4. Setup environment variables
cp .env.example .env

# 5. Generate and apply database migrations
npm run db:generate
npm run db:migrate

# 6. Start development server
npm run dev
```

## ğŸš€ Deployment
#### Node.js Server
```bash
# Deploy to self host server
npm run build
npm run serve
```

#### Cloudflare Worker
```bash
# Deploy to Cloudflare Worker
npm run build
cp wrangler.example.toml wrangler.toml
npm run deploy
```

## ğŸŒŸ Support

If you find this project helpful, please consider:
- Giving it a star â­
- [Becoming a sponsor on Patreon](https://patreon.com/NuxSaaS) ğŸ’–

Your support helps maintain and improve NuxSaaS!

## ğŸ™ Credits
This project is built upon these amazing open source projects:
- [Nuxt](https://nuxt.com) - The Progressive Web Framework
- [Nuxt UI](https://ui.nuxt.com) - Fully styled and customizable components
- [Better Auth](https://github.com/better-auth/better-auth) -The most comprehensive authentication framework for TypeScript
- [Drizzle ORM](https://github.com/drizzle-team/drizzle-orm) - TypeScript ORM
- [TailwindCSS](https://tailwindcss.com) - Utility-first CSS framework
- [nuxt-charts](https://github.com/dennisadriaans/vue-chrts): Nuxt module for Unovis
- [nuxthub-better-auth](https://github.com/atinux/nuxthub-better-auth): A demo of using Better Auth with Nuxt

## ğŸ“œ License
This project is licensed under the [MIT License](LICENSE).



================================================
FILE: eslint.config.mjs
================================================
// @ts-check
import antfu from '@antfu/eslint-config'
import withNuxt from './.nuxt/eslint.config.mjs'

export default withNuxt(
  antfu({
    // ...@antfu/eslint-config options
    // Vue ESLint Rule: https://eslint.vuejs.org/rules/
    markdown: false,
    rules: {
      'style/comma-dangle': ['warn', 'never'],
      'style/brace-style': 'off',
      'style/operator-linebreak': 'off',
      'vue/comma-dangle': 'off',
      'vue/eqeqeq': 'off',
      'vue/max-attributes-per-line': 'warn',
      'vue/no-unused-refs': 'off',
      'antfu/top-level-function': 'off',
      'node/prefer-global/process': 'off',
      'eqeqeq': 'off',
      'no-console': 'off',
      'no-debugger': 'off',
      'no-async-promise-executor': 'off'
    }
  })
  // Your custom configs here
)



================================================
FILE: LICENSE
================================================
The MIT License (MIT)

Copyright (c) 2025-present - NuxSaaS

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


================================================
FILE: nuxt.config.ts
================================================
// https://nuxt.com/docs/api/configuration/nuxt-config
import type { NuxtPage } from 'nuxt/schema'
import { generateRuntimeConfig } from './server/utils/runtimeConfig'

console.log(`Current NODE_ENV: ${process.env.NODE_ENV}`)

export default defineNuxtConfig({
  compatibilityDate: '2025-07-22',
  devtools: { enabled: true },
  css: ['~/assets/css/main.css'],
  modules: [
    '@nuxt/ui',
    '@nuxt/eslint',
    '@nuxtjs/i18n',
    '@nuxtjs/seo',
    'nuxt-charts',
    ...(process.env.NODE_ENV === 'test' ? ['@nuxt/test-utils/module'] : []),
    ...(process.env.NUXT_NITRO_PRESET !== 'node-server' ? ['@nuxthub/core'] : [])
  ],
  ...(process.env.NUXT_NITRO_PRESET !== 'node-server'
    ? {
        hub: {
          workers: true,
          kv: true,
          bindings: {
            hyperdrive: {
              HYPERDRIVE: process.env.NUXT_CF_HYPERDRIVE_ID as string
            }
          }
        }
      }
    : {}),
  i18n: {
    vueI18n: '~/i18n/i18n.config.ts',
    baseUrl: process.env.NUXT_APP_URL,
    locales: [
      { code: 'en', language: 'en-US', name: 'English' },
      { code: 'zh-CN', language: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡' },
      { code: 'ja', language: 'ja-JP', name: 'æ—¥æœ¬èª' },
      { code: 'fr', language: 'fr-FR', name: 'FranÃ§ais' }
    ],
    defaultLocale: 'en',
    bundle: {
      optimizeTranslationDirective: false
    }
  },
  sitemap: {
    exclude: [
      '/admin/**',
      '/403',
      '/profile'
    ]
  },
  seo: {
    canonicalLowercase: false
  },
  robots: {
    disallow: [
      '/admin',
      '/profile'
    ]
  },
  eslint: {
    config: {
      standalone: false
    }
  },
  fonts: {
    provider: 'local'
  },
  ogImage: {
    enabled: false
  },
  icon: {
    serverBundle: false,
    clientBundle: {
      scan: {
        globInclude: ['**\/*.{vue,jsx,tsx,md,mdc,mdx}', 'app/**/*.ts']
      }
    }
  },
  future: {
    compatibilityVersion: 4
  },
  hooks: {
    'pages:extend': function (pages) {
      const pagesToRemove: NuxtPage[] = []
      pages.forEach((page) => {
        if (page.path.includes('component') || page.path.includes('/api')) {
          pagesToRemove.push(page)
        }
      })

      pagesToRemove.forEach((page: NuxtPage) => {
        pages.splice(pages.indexOf(page), 1)
      })
      // Uncomment to show current Routes
      // console.log(`\nCurrent Routes:`)
      // console.log(pages)
      // console.log(`\n`)
    }
  },
  runtimeConfig: generateRuntimeConfig(),
  app: {
    head: {
      charset: 'utf-8',
      viewport: 'width=device-width, initial-scale=1, maximum-scale=5.0, minimum-scale=1.0',
      link: [
        { rel: 'icon', type: 'image/png', href: '/favicons/favicon-96x96.png', sizes: '96x96' },
        { rel: 'icon', type: 'image/svg+xml', href: '/logo.svg' },
        { rel: 'shortcut icon', href: '/favicon.ico' },
        { rel: 'apple-touch-icon', sizes: '180x180', href: '/favicons/apple-touch-icon.png' },
        { rel: 'manifest', href: '/favicons/site.webmanifest' }
      ],
      meta: [
        { name: 'apple-mobile-web-app-title', content: process.env.NUXT_APP_NAME }
      ]
    }
  },
  nitro: {
    preset: process.env.NUXT_NITRO_PRESET,
    rollupConfig: {
      external: process.env.NUXT_NITRO_PRESET != 'node-server' ? ['pg-native'] : undefined
    }
  }
})



================================================
FILE: package.json
================================================
{
  "name": "nuxsaas",
  "type": "module",
  "private": true,
  "scripts": {
    "dev": "nuxt dev",
    "test": "vitest run --silent=false",
    "coverage": "vitest run --coverage",
    "generate": "nuxt generate",
    "preview": "nuxt preview",
    "postinstall": "nuxt prepare",
    "lint": "eslint .",
    "lint:fix": "eslint --fix .",
    "auth:schema": "npx @better-auth/cli generate --config server/utils/auth.ts --output server/database/schema/auth.ts -y",
    "db:generate": "drizzle-kit generate --config ./server/database/drizzle.config.ts",
    "db:migrate": "drizzle-kit migrate --config ./server/database/drizzle.config.ts",
    "build": "nuxt build",
    "serve": "node .output/server/index.mjs",
    "preview:cf": "wrangler dev",
    "deploy": "wrangler deploy",
    "prepare": "husky"
  },
  "dependencies": {
    "@better-auth/stripe": "^1.3.2",
    "@nuxt/ui": "^3.2.0",
    "@nuxthub/core": "^0.9.0",
    "@nuxtjs/i18n": "^9.5.6",
    "@nuxtjs/seo": "^3.1.0",
    "@polar-sh/better-auth": "^1.0.7",
    "@polar-sh/sdk": "^0.34.6",
    "@vueuse/core": "13.5.0",
    "@vueuse/integrations": "^13.5.0",
    "better-auth": "^1.3.2",
    "date-fns": "^4.1.0",
    "dotenv": "^16.6.1",
    "drizzle-orm": "0.44.3",
    "ioredis": "^5.6.1",
    "nuxt": "^4.0.1",
    "nuxt-charts": "^0.2.0-test.21",
    "ofetch": "^1.4.1",
    "pg": "^8.16.3",
    "resend": "^4.7.0",
    "sortablejs": "^1.15.6",
    "stripe": "^18.3.0",
    "uuid": "^11.1.0",
    "vue": "^3.5.17",
    "vue-component-type-helpers": "3.0.3",
    "zod": "^3"
  },
  "devDependencies": {
    "@antfu/eslint-config": "^4.17.0",
    "@better-auth/cli": "^1.3.2",
    "@iconify-json/lucide": "^1.2.57",
    "@iconify-json/simple-icons": "^1.2.44",
    "@nuxt/eslint": "^1.6.0",
    "@nuxt/test-utils": "^3.19.2",
    "@types/pg": "^8.15.4",
    "@vitejs/plugin-vue": "^6.0.0",
    "@vitest/coverage-v8": "^3.2.4",
    "@vue/test-utils": "^2.4.6",
    "drizzle-kit": "^0.31.4",
    "eslint": "^9.31.0",
    "happy-dom": "^18.0.1",
    "husky": "^9.1.7",
    "playwright-core": "^1.54.1",
    "tailwindcss": "^4.1.11",
    "typescript": "^5.8.3",
    "vitest": "^3.2.4",
    "wrangler": "^4.25.0"
  }
}



================================================
FILE: tsconfig.json
================================================
{
  // https://nuxt.com/docs/guide/concepts/typescript
  "extends": "./.nuxt/tsconfig.json"
}



================================================
FILE: vitest.config.ts
================================================
import { defineVitestConfig } from '@nuxt/test-utils/config'

export default defineVitestConfig({
  test: {
    testTimeout: 30000,
    environment: 'nuxt',
    environmentOptions: {
      nuxt: {
        domEnvironment: 'happy-dom',
        overrides: {
          // other Nuxt config you want to pass
        }
      }
    },
    coverage: {
      reporter: ['html'],
      reportsDirectory: '../tests/coverage'
    },
    setupFiles: './tests/setup.ts'
  }
})



================================================
FILE: wrangler.example.toml
================================================
name = "nuxsaas"
compatibility_date = "2024-11-01"
compatibility_flags = [ "nodejs_compat" ]
main = "./dist/server/index.mjs"
assets = { directory = "./dist/public/", binding = "ASSETS" }
kv_namespaces = [ { binding = "KV", id = "your_kv_id" } ]
routes = [ { pattern = "nuxsaas.com", custom_domain = true } ]

[observability.logs]
enabled = true

[[hyperdrive]]
binding = "HYPERDRIVE"
id = "your_hyperdrive_id"



================================================
FILE: .env.example
================================================
# Description: Example of .env file
NUXT_NITRO_PRESET=node-server # node-server or cloudflare-module
NUXT_CF_HYPERDRIVE_ID=cloudflare-hyperdrive-id #  Required when using cloudflare-module

NUXT_APP_URL=http://localhost:3000 # Base URL of your app
NUXT_APP_NAME=NuxSaaS
NUXT_APP_NOTIFY_EMAIL="noreply@nuxsaas.com"
NUXT_APP_CONTACT_EMAIL="contact@nuxsaas.com"
NUXT_APP_REPO=https://github.com/NuxSaaS/NuxSaaS

NUXT_BETTER_AUTH_SECRET='' # Secret key for JWT

NUXT_DATABASE_URL=postgres://postgres:@localhost:5432/nuxsaas
NUXT_REDIS_URL=redis://localhost:6379

NUXT_GH_CLIENT_ID=your-github-client-id
NUXT_GH_CLIENT_SECRET=your-github-client-secret

NUXT_GOOGLE_CLIENT_ID=your-google-client-id
NUXT_GOOGLE_CLIENT_SECRET=your-google-client-secret

NUXT_RESEND_API_KEY=your-resend-api-key

NUXT_PAYMENT=stripe # stripe or polar

NUXT_STRIPE_SECRET_KEY=your-stripe-secret-key
NUXT_STRIPE_WEBHOOK_SECRET=your-stripe-webhook-key
NUXT_STRIPE_PRICE_ID_PRO_MONTH=your-stripe-price-id-pro-month
NUXT_STRIPE_PRICE_ID_PRO_YEAR=your-stripe-price-id-pro-year

NUXT_POLAR_SERVER=sandbox # sandbox or production
NUXT_POLAR_ACCESS_TOKEN=your-polar-access-token
NUXT_POLAR_WEBHOOK_SECRET=your-polar-webhook-secret
NUXT_POLAR_PRODUCT_ID_PRO_MONTH=your-polar-product-id-pro-month
NUXT_POLAR_PRODUCT_ID_PRO_YEAR=your-polar-product-id-pro-year

# For testing
NUXT_TEST_DATABASE_URL=postgres://postgres:@localhost:5432/nuxsaas_test
NUXT_TEST_APP_URL=http://localhost:3000 # App URL for e2e test
NUXT_TEST_EMAIL=test@nuxsaas.com
NUXT_TEST_PASSWORD=test-password
NUXT_ADMIN_EMAIL=admin@nuxsaas.com
NUXT_ADMIN_PASSWORD=admin-password


================================================
FILE: .nvmrc
================================================
22.17


================================================
FILE: app/app.config.ts
================================================
export default defineAppConfig({
  // https://ui3.nuxt.dev/getting-started/theme#design-system
  ui: {
    colors: {
      primary: 'emerald',
      neutral: 'slate'
    },
    button: {
      defaultVariants: {
        // Set default button color to neutral
        // color: 'neutral'
      }
    }
  }
})



================================================
FILE: app/app.vue
================================================
<script lang="ts" setup>
const { t } = useI18n()

// Zod locale configuration
const { locale } = useI18n()

const updateZodLocale = (newLocale: string) => {
  const localeKey = newLocale.replace('-', '') as keyof typeof zodLocales
  if (z.locales[localeKey]) {
    z.config(z.locales[localeKey]())
  } else {
    console.warn(`Zod locale "${localeKey}" not found, falling back to English.`)
    z.config(z.locales.en())
  }
}

watchEffect(() => {
  updateZodLocale(locale.value)
})

useHead({
  titleTemplate: (title) => {
    if (title) {
      if (title.includes(t('global.appName'))) {
        return title
      } else {
        return `${title} | ${t('global.appName')}`
      }
    } else {
      return t('global.appName')
    }
  }
})
useSeoMeta({
  ogSiteName: t('global.appName')
})
</script>

<template>
  <UApp>
    <NuxtLayout>
      <NuxtPage />
    </NuxtLayout>
  </UApp>
</template>



================================================
FILE: app/assets/css/main.css
================================================
@import "tailwindcss";
@import "@nuxt/ui";

@theme {
  --font-sans: 'Public Sans', sans-serif;
}
@layer base {
  body {
    @apply bg-gray-100 dark:bg-gray-950;
  }
}


================================================
FILE: app/components/FlexThreeColumn.vue
================================================
<template>
  <div class="flex items-center justify-between flex-1 gap-x-1.5">
    <slot>
      <div class="flex items-center gap-1.5">
        <slot name="left" />
      </div>
      <div class="flex items-center gap-1.5">
        <slot name="middle" />
      </div>
      <div class="flex items-center gap-1.5">
        <slot name="right" />
      </div>
    </slot>
  </div>
</template>



================================================
FILE: app/components/Logo.vue
================================================
<template>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="100%"
    height="100%"
    viewBox="-6 -6 110 100"
    preserveAspectRatio="xMidYMid meet"
    class="text-primary dark:text-primary"
  >
    <g
      fill="currentColor"
      stroke="currentColor"
      stroke-width="8"
    >
      <g transform="matrix(.69 0 0 .69 15.5 15.5)">
        <path
          d="M10.18 70.12l4.94-9.89c.38-.77.34-1.68-.11-2.41a2.47 2.47 0 0 0-2.1-1.17H2.23l28.01-51.7 25.01 45.48c.44.79 1.27 1.28 2.17 1.28h11.26c.88 0 1.69-.46 2.13-1.22.45-.76.46-1.69.03-2.45L32.38-21.19c-.87-1.57-3.45-1.57-4.32 0l-49.45 89c-.43.77-.41 1.7.03 2.46.44.75 1.25 1.22 2.13 1.22h27.2c.94-.01 1.79-.53 2.21-1.37"
          transform="translate(-1, 0)"
        />
        <path
          d="M121.39 67.81l-49.45-89c-.45-.8-1.38-1.25-2.22-1.27-.92.02-1.75.55-2.16 1.37L55.2 3.63c-.35.69-.35 1.51 0 2.21l4.94 9.89c.84 1.68 3.59 1.68 4.43 0l5.29-10.59 27.9 51.51h-52.7c-1.36 0-2.47 1.11-2.47 2.47v9.89c0 1.36 1.11 2.47 2.47 2.47h74.17c.88 0 1.69-.46 2.13-1.22.44-.75.45-1.68.03-2.45"
          transform="translate(1, 0)"
        />
        <path
          d="M89.25 77.7a2.48 2.48 0 0 0-2.16-1.27H74.72c-.89 0-1.71.48-2.15 1.25-.44.78-.43 1.73.03 2.49l5.17 8.62H22.15L47.2 45.53c.42-.72.45-1.6.07-2.34l-4.94-9.89a2.477 2.477 0 0 0-2.14-1.37c-.92-.04-1.77.45-2.22 1.25L18.23 67.72-1.55 99.86a2.46 2.46 0 0 0-.05 2.5 2.48 2.48 0 0 0 2.16 1.27h98.89c.88 0 1.69-.46 2.13-1.22.44-.75.45-1.69.03-2.46L89.25 77.7z"
          transform="translate(3, 2)"
        />
      </g>
    </g>
  </svg>
</template>



================================================
FILE: app/components/SiteNavigation.vue
================================================
<script setup lang="ts">
const { mode } = defineProps<{
  mode: 'desktop' | 'mobile'
}>()

const { t } = useI18n()
const localePath = useLocalePath()

const navigation = [
  { label: t('global.nav.features'), to: localePath('/#features') },
  { label: t('global.nav.pricing'), to: localePath('/pricing') },
  { label: t('global.nav.docs'), to: 'https://docs.nuxsaas.com/', external: true }
]
</script>

<template>
  <div>
    <!-- Desktop Navigation -->
    <div
      v-if="mode === 'desktop'"
      class="flex items-center gap-8"
    >
      <template
        v-for="item in navigation"
        :key="item.label"
      >
        <NuxtLink
          v-if="!item.external"
          :to="item.to"
          class="text-sm font-medium text-gray-700 hover:text-primary-500 dark:text-gray-300 dark:hover:text-primary-400"
        >
          {{ item.label }}
        </NuxtLink>
        <a
          v-else
          :href="item.to"
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm font-medium text-gray-700 hover:text-primary-500 dark:text-gray-300 dark:hover:text-primary-400"
        >
          {{ item.label }}
        </a>
      </template>
    </div>

    <!-- Mobile Navigation -->
    <div v-if="mode === 'mobile'">
      <UDropdownMenu :items="navigation">
        <UButton
          color="neutral"
          variant="ghost"
          icon="i-lucide-menu"
          aria-label="menu"
        />
      </UDropdownMenu>
    </div>
  </div>
</template>



================================================
FILE: app/components/UserNavigation.vue
================================================
<script setup lang="ts">
const localePath = useLocalePath()
const { t } = useI18n()
const { loggedIn, signOut, user, activeStripeSubscription, activePolarSubscriptions } = useAuth()
</script>

<template>
  <template v-if="loggedIn">
    <UDropdownMenu
      :items="[
        {
          label: t('global.auth.profile'),
          icon: 'i-lucide-user',
          to: localePath('/profile')
        },
        {
          label: t('global.auth.signOut'),
          icon: 'i-lucide-log-out',
          onSelect: () => signOut()
        }
      ]"
    >
      <UButton
        variant="ghost"
        color="neutral"
        class="flex items-center gap-2"
      >
        <UAvatar
          v-if="user?.image"
          :src="user?.image"
          :alt="user?.name"
          size="sm"
        />
        <span>
          {{ user?.name }}
          <UBadge
            v-if="activeStripeSubscription || activePolarSubscriptions?.length"
            label="Pro"
          />
        </span>
      </UButton>
    </UDropdownMenu>
    <UButton
      v-if="user?.role == 'admin'"
      variant="outline"
      color="neutral"
      class="flex items-center gap-2"
      :to="localePath('/admin')"
    >
      {{ t('global.nav.admin') }}
    </UButton>
  </template>
  <template v-else>
    <UButton
      :to="localePath('/signin')"
      variant="outline"
    >
      {{ t('global.auth.signIn') }}
    </UButton>
  </template>
</template>



================================================
FILE: app/components/AdminTable/index.vue
================================================
<script setup lang="ts" generic="T">
import type { UTableInstance } from './types'
import { useDebounceFn } from '@vueuse/core'
import { FetchError } from 'ofetch'
import { useRoute, useRouter } from 'vue-router'
import ColumnControl from './components/ColumnControl.vue'
import FilterCheckbox from './components/filters/Checkbox/index.vue'
import FilterDateRange from './components/filters/DateRange.vue'
import FilterTabs from './components/filters/Tabs.vue'
import Pagination from './components/Pagination/index.vue'
import SortControl from './components/SortControl/index.vue'
import useColumnControl from './composables/useColumnControl'
import useSelectControl from './composables/useSelectControl'

const { fetchData, columns, filters = [], hidePagination = false, canSelect = false, rowId } = defineProps<{
  fetchData: FetchDataFn<T>
  columns: AdminTableColumn<T>[]
  filters?: AdminTableFilter[]
  hidePagination?: boolean
  canSelect?: boolean
  rowId?: string
}>()

const route = useRoute()
const router = useRouter()
const toast = useToast()

const page = ref<number>(Number(route.query.page) || 1)
const limit = ref<number>(Number(route.query.limit) || 20)
const loading = ref(false)
const total = ref(0)
const data = ref<any[]>([])
const rowSelection = defineModel<Record<string, boolean>>('rowSelection', { default: {} })

const sortOptions = ref<SortOption[]>([])

const tableRef = useTemplateRef<UTableInstance>('table')
const { selectedColumns } = useColumnControl(columns, tableRef)
const { selectColumnId, getRowId, selectedRowCount, rowCount } = useSelectControl(tableRef, rowId)

const fetchTableData = useDebounceFn(async () => {
  loading.value = true
  try {
    const filter: FilterCondition[] = []
    for (const item of filters) {
      if (item.type === 'input') {
        if (item.value) {
          filter.push({ col: item.field, op: 'like', v: item.value })
        }
      } else if (item.type === 'checkbox') {
        if (item.value.length) {
          filter.push({ col: item.field, op: 'in', v: item.value })
        }
      } else if (item.type === 'tabs') {
        if (item.value) {
          filter.push({ col: item.field, op: 'eq', v: item.value })
        }
      } else if (item.type === 'daterange') {
        const { start, end } = item.value
        if (start && end) {
          filter.push({
            col: item.field,
            op: 'between',
            v: [formatToDate(start).toISOString(), endOfDate(formatToDate(end)).toISOString()]
          })
        }
      }
    }
    const result = await fetchData({
      page: page.value,
      limit: limit.value,
      sort: sortOptions.value,
      filter
    })
    data.value = result.data || []
    total.value = result.total || 0
  } catch (error: unknown) {
    if (error instanceof FetchError) {
      toast.add({
        description: error.data?.message || error.message,
        color: 'error',
        icon: 'i-lucide-alert-circle'
      })
    }
    console.error('Error fetching data:', error)
    loading.value = false
  } finally {
    loading.value = false
  }
})

// Watch sortOptions and sync to URL
watch(
  () => sortOptions.value,
  (newSortOptions) => {
    const query = { ...route.query }
    if (newSortOptions.length) {
      query.sort = JSON.stringify(newSortOptions)
    } else {
      delete query.sort
    }
    router.replace({ query })
    fetchTableData()
  },
  { immediate: true, deep: true }
)

// Watch page and limit and sync to URL
watch(
  [page, limit],
  ([newPage, newLimit]) => {
    const query = { ...route.query, page: newPage, limit: newLimit }
    router.replace({ query })
    fetchTableData()
  }
)

const updatePage = (value: number) => {
  page.value = value
}

const updateLimit = (value: number) => {
  limit.value = value
}

const refreshSuccess = ref(false)

const handleRefresh = async () => {
  refreshSuccess.value = false
  await fetchTableData()
  refreshSuccess.value = true
  setTimeout(() => {
    refreshSuccess.value = false
  }, 1000)
}

onMounted(() => {
  if (route.query.sort) {
    try {
      sortOptions.value = JSON.parse(route.query.sort as string)
    } catch {
      sortOptions.value = []
    }
  }
  fetchTableData()
})

defineExpose({
  fetchTableData
})
</script>

<template>
  <div class="max-h-full flex flex-col">
    <FlexThreeColumn class="max-w-full overflow-x-scroll flex-none">
      <template #left>
        <slot name="top-left-before" />
        <template
          v-for="(filter, index) in filters"
          :key="index"
        >
          <UInput
            v-if="filter.type === 'input'"
            v-model="filter.value"
            :placeholder="`${filter.name}...`"
            @update:model-value="fetchTableData"
          />
          <FilterCheckbox
            v-else-if="filter.type === 'checkbox'"
            v-model:filter="filter.value"
            :filter-name="filter.field"
            :name="filter.name"
            :items="filter.items"
            @update:filter="fetchTableData"
          />
          <FilterTabs
            v-else-if="filter.type === 'tabs'"
            v-model:filter="filter.value"
            :filter-name="filter.field"
            :name="filter.name"
            :items="filter.items"
            @update:filter="fetchTableData"
          />
          <FilterDateRange
            v-else-if="filter.type === 'daterange'"
            v-model:date-range="filter.value"
            :filter-name="filter.field"
            :name="filter.name"
            @update:date-range="fetchTableData"
          />
        </template>
        <slot name="top-left-after" />
      </template>
      <template #right>
        <slot name="top-right" />
        <UButton
          :color="refreshSuccess ? 'success' : 'neutral'"
          variant="outline"
          :icon="loading ? 'i-lucide-loader-2' : (refreshSuccess ? 'i-lucide-check' : 'i-lucide-refresh-cw')"
          :loading="loading"
          @click="handleRefresh"
        />
        <SortControl
          v-model:sort-options="sortOptions"
          :columns="columns"
        />
        <ColumnControl
          v-model:selected-columns="selectedColumns"
          :columns="columns"
        />
      </template>
    </FlexThreeColumn>
    <UTable
      ref="table"
      v-model:row-selection="rowSelection"
      :get-row-id="getRowId"
      :loading="loading"
      :columns="canSelect ? [{ id: selectColumnId }, ...columns] : columns"
      :data="data"
      sticky
      class="flex-1"
    >
      <template #[`${selectColumnId}-header`]="{ table }">
        <UCheckbox
          :model-value="table.getIsSomePageRowsSelected()
            ? 'indeterminate'
            : table.getIsAllPageRowsSelected()"
          @update:model-value="(value: boolean | 'indeterminate') =>
            table.toggleAllPageRowsSelected(!!value)"
        />
      </template>
      <template #[`${selectColumnId}-cell`]="{ row }">
        <UCheckbox
          :model-value="row.getIsSelected()"
          @update:model-value="(value: boolean | 'indeterminate') => row.toggleSelected(!!value)"
        />
      </template>
      <template
        v-for="(_, name) in $slots"
        :key="name"
        #[name]="slotData"
      >
        <slot
          :name="name"
          v-bind="slotData"
        />
      </template>
    </UTable>
    <Pagination
      :page="page"
      :limit="limit"
      :total="total"
      :hide-pagination="hidePagination"
      :can-select="canSelect"
      :selected-row-count="selectedRowCount"
      :row-count="rowCount"
      @update:page="updatePage"
      @update:limit="updateLimit"
    />
  </div>
</template>



================================================
FILE: app/components/AdminTable/types.ts
================================================
import type { ComponentExposed } from 'vue-component-type-helpers'

export type UTableInstance = ComponentExposed<typeof UTable>



================================================
FILE: app/components/AdminTable/components/ColumnControl.vue
================================================
<script setup lang="ts" generic="T">
const { columns } = defineProps<{
  columns: AdminTableColumn<T>[]
}>()

const selectedColumns = defineModel<string[]>('selectedColumns', { default: [] })

const columnOptions = computed(() => columns.filter(column => column.accessorKey))

const columnItems = computed(() => columnOptions.value.map(column => ({
  label: column.header,
  type: 'checkbox' as const,
  checked: selectedColumns.value.includes(column.accessorKey!),
  onUpdateChecked(checked: boolean) {
    const newSelectedColumns = [...selectedColumns.value]
    if (checked) {
      newSelectedColumns.push(column.accessorKey!)
    } else {
      const index = newSelectedColumns.indexOf(column.accessorKey!)
      if (index > -1) {
        newSelectedColumns.splice(index, 1)
      }
    }
    selectedColumns.value = newSelectedColumns
  }
})))
</script>

<template>
  <UDropdownMenu
    v-if="columnOptions.length"
    arrow
    :items="columnItems"
  >
    <UButton
      color="neutral"
      variant="outline"
      icon="i-lucide-settings-2"
    />
  </UDropdownMenu>
</template>



================================================
FILE: app/components/AdminTable/components/filters/DateRange.vue
================================================
<script setup lang="ts">
import { CalendarDate } from '@internationalized/date'
import { useRoute, useRouter } from 'vue-router'

const { name, filterName } = defineProps<{
  name: string
  filterName: string
}>()

const dateRange = defineModel<DateRange>('dateRange', { default: {
  start: undefined,
  end: undefined
} })

const clearDateRange = () => {
  dateRange.value = {
    start: undefined,
    end: undefined
  }
}

const route = useRoute()
const router = useRouter()

if (route.query[filterName]) {
  const { start, end } = JSON.parse(route.query[filterName] as string)
  const starts = start.split('-').map((item: string) => Number(item))
  const ends = end.split('-').map((item: string) => Number(item))
  dateRange.value.start = new CalendarDate(starts[0], starts[1], starts[2])
  dateRange.value.end = new CalendarDate(ends[0], ends[1], ends[2])
}

watch(
  () => dateRange.value,
  (_) => {
    const query = { ...route.query }
    if (dateRange.value.start && dateRange.value.end) {
      const start = dateRange.value.start
      const end = dateRange.value.end
      query[filterName] = JSON.stringify({
        start: `${start.year}-${start.month}-${start.day}`,
        end: `${end.year}-${end.month}-${end.day}`
      })
    } else {
      delete query[filterName]
    }
    router.replace({ query })
  },
  { deep: true }
)
</script>

<template>
  <UPopover
    :content="{
      align: 'start',
      side: 'bottom'
    }"
  >
    <UButton
      color="neutral"
      variant="subtle"
    >
      <UIcon
        v-if="dateRange.start && dateRange.end"
        name="i-lucide-circle-x"
        class="w-4 h-4 mr-1"
        @click.stop="clearDateRange"
      />
      <UIcon
        v-if="!(dateRange.start && dateRange.end)"
        name="i-lucide-calendar"
        class="w-4 h-4 mr-1"
      />
      {{ name }}
      <UBadge
        v-if="dateRange.start && dateRange.end"
        color="neutral"
        variant="outline"
        size="sm"
        class="ml-1"
      >
        {{ dateRange.start }} - {{ dateRange.end }}
      </UBadge>
    </UButton>

    <template #content>
      <UCalendar
        v-model="dateRange"
        class="p-2"
        :number-of-months="2"
        range
      />
    </template>
  </UPopover>
</template>



================================================
FILE: app/components/AdminTable/components/filters/Tabs.vue
================================================
<script setup lang="ts">
import { useRoute, useRouter } from 'vue-router'

const { items, filterName } = defineProps<{
  items: FilterItem[]
  name: string
  filterName: string
}>()

const emit = defineEmits<{
  (e: 'update:filter', value: string): void
}>()

const filter = defineModel<string>('filter', { default: '' })
const filterIndex = ref<string | undefined>(undefined)
const filterValueDict = computed(() => {
  const valueDict: Record<string, string> = {}
  items.forEach((item, index) => {
    valueDict[`key_${index}`] = item.id
    valueDict[`value_${item.id}`] = `${index}`
  })
  return valueDict
})

const route = useRoute()
const router = useRouter()

// Initialize filter from route query
if (route.query[filterName]) {
  const index = filterValueDict.value[`value_${route.query[filterName]}`] || undefined
  if (index != undefined) {
    filter.value = route.query[filterName] as string
    filterIndex.value = index
  }
}

// Watch for changes in filter and update the route query
watch(
  () => filterIndex.value,
  (newFilterIndex) => {
    const query = { ...route.query }
    const newFilter = filterValueDict.value[`key_${newFilterIndex}`] || ''
    if (newFilter) {
      query[filterName] = newFilter
      filter.value = newFilter
    } else {
      delete query[filterName]
      filter.value = ''
    }
    router.replace({ query })
    emit('update:filter', newFilter)
  },
  { deep: true }
)
</script>

<template>
  <UTabs
    v-model="filterIndex"
    variant="link"
    :items="items"
    :ui="{
      root: 'gap-0',
      list: 'bg-elevated rounded-lg p-0 border-0',
      trigger: 'data-[state=active]:text-(--ui-bg) data-[state=active]:bg-primary pl-4 pr-4',
      indicator: 'hidden'
    }"
  >
    <template #trailing="{ item }">
      <UBadge
        v-if="item.count != undefined && item.count > 0"
        color="neutral"
        variant="outline"
        size="sm"
      >
        {{ item.count }}
      </UBadge>
    </template>
  </UTabs>
</template>



================================================
FILE: app/components/AdminTable/components/filters/Checkbox/i18n.json
================================================
{
  "en": {
    "checkboxFilter": {
      "nSelected": "{n} selected"
    }
  },
  "zh-CN": {
    "checkboxFilter": {
      "nSelected": "{n} ä¸ªå·²é€‰æ‹©"
    }
  },
  "ja": {
    "checkboxFilter": {
      "nSelected": "{n} å€‹é¸æŠæ¸ˆã¿"
    }
  },
  "fr": {
    "checkboxFilter": {
      "nSelected": "{n} sÃ©lectionnÃ©(s)"
    }
  }
}



================================================
FILE: app/components/AdminTable/components/filters/Checkbox/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
import { useRoute, useRouter } from 'vue-router'

const { items, name, filterName } = defineProps<{
  items: FilterItem[]
  name: string
  filterName: string
}>()

const emit = defineEmits<{
  (e: 'update:filter', value: string[]): void
}>()
const { t } = useI18n()

const filter = defineModel<string[]>('filter', { default: [] })

const route = useRoute()
const router = useRouter()

// Initialize filter from route query
if (route.query[filterName]) {
  filter.value = JSON.parse(route.query[filterName] as string)
}

const selectedItems = computed(() => {
  return items.filter(item => filter.value.includes(item.id))
})

const onUpdateChecked = (checked: string | boolean, item: FilterItem) => {
  if (checked) {
    filter.value.push(item.id)
  } else {
    filter.value.splice(filter.value.indexOf(item.id), 1)
  }
}

// Watch for changes in filter and update the route query
watch(
  () => filter.value,
  (newFilter) => {
    const query = { ...route.query }
    if (newFilter.length) {
      query[filterName] = JSON.stringify(newFilter)
    } else {
      delete query[filterName]
    }
    router.replace({ query })
    emit('update:filter', newFilter)
  },
  { deep: true }
)
</script>

<template>
  <UPopover
    :content="{
      align: 'start',
      side: 'bottom'
    }"
  >
    <UButton
      color="neutral"
      variant="subtle"
    >
      <UIcon
        v-if="selectedItems.length"
        name="i-lucide-circle-x"
        class="w-4 h-4 mr-1"
        @click.stop="filter = []"
      />
      <UIcon
        v-if="!selectedItems.length"
        name="i-lucide-filter"
        class="w-4 h-4 mr-1"
      />
      {{ name }}
      <template v-if="selectedItems.length && selectedItems.length <= 2">
        <UBadge
          v-for="item in selectedItems"
          :key="item.id"
          color="neutral"
          variant="outline"
          size="sm"
          class="ml-1"
        >
          {{ item.label }}
        </UBadge>
      </template>
      <template v-if="selectedItems.length && selectedItems.length > 2">
        <UBadge
          color="neutral"
          variant="outline"
          size="sm"
          class="ml-1"
        >
          {{ t('checkboxFilter.nSelected', { n: selectedItems.length }) }}
        </UBadge>
      </template>
    </UButton>

    <template #content>
      <div class="flex flex-col p-2">
        <div
          v-for="item in items"
          :key="item.id"
          class="flex items-center"
        >
          <UCheckbox
            :key="item.id"
            :model-value="filter.includes(item.id)"
            :ui="{
              wrapper: 'flex-1'
            }"
            class="p-1 flex-1 hover:bg-neutral-100 dark:hover:bg-neutral-800"
            @update:model-value="(e) => onUpdateChecked(e, item)"
          >
            <template #label>
              <div class="flex items-center">
                <span class="flex-1">{{ item.label }}</span>
                <UBadge
                  v-if="item.count != undefined"
                  color="neutral"
                  variant="outline"
                  size="sm"
                  class="ml-2"
                >
                  {{ item.count }}
                </UBadge>
              </div>
            </template>
          </UCheckbox>
        </div>
      </div>
    </template>
  </UPopover>
</template>



================================================
FILE: app/components/AdminTable/components/Pagination/i18n.json
================================================
{
  "en": {
    "pagination": {
      "rowsPerPage": "Rows per page",
      "pageOf": "Page {page} of {totalPage}",
      "selectedRows": "{selected} / {total} row(s) selected",
      "totalRows": "Total row(s): {total}"
    }
  },
  "zh-CN": {
    "pagination": {
      "rowsPerPage": "æ¯é¡µè¡Œæ•°",
      "pageOf": "ç¬¬ {page} é¡µï¼Œå…± {totalPage} é¡µ",
      "selectedRows": "å·²é€‰æ‹© {selected} / {total} è¡Œ",
      "totalRows": "å…± {total} è¡Œ"
    }
  },
  "ja": {
    "pagination": {
      "rowsPerPage": "è¡¨ç¤ºä»¶æ•°",
      "pageOf": "ãƒšãƒ¼ã‚¸ {page} / {totalPage}",
      "selectedRows": "{selected} / {total} è¡Œã‚’é¸æŠ",
      "totalRows": "åˆè¨ˆ: {total} è¡Œ"
    }
  },
  "fr": {
    "pagination": {
      "rowsPerPage": "Lignes par page",
      "pageOf": "Page {page} sur {totalPage}",
      "selectedRows": "{selected} / {total} ligne(s) sÃ©lectionnÃ©e(s)",
      "totalRows": "Total: {total} ligne(s)"
    }
  }
}



================================================
FILE: app/components/AdminTable/components/Pagination/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const { hidePagination, selectedRowCount, rowCount, total } = defineProps({
  hidePagination: { type: Boolean, default: false },
  canSelect: { type: Boolean, default: false },
  selectedRowCount: { type: Number, default: 0 },
  rowCount: { type: Number, default: 0 },
  total: { type: Number, default: 0 }
})
const { t } = useI18n()
const page = defineModel('page', { default: 1 })
const limit = defineModel('limit', { default: 20 })
const totalPage = computed(() => {
  return Math.ceil(total / limit.value)
})
const sizes = [5, 20, 50, 100]
</script>

<template>
  <div class="w-full flex flex-col sm:flex-row items-center justify-between py-2 text-sm text-muted border-t border-accented">
    <div class="px-4">
      <span
        v-if="canSelect"
        class="mr-4"
      >
        {{ t('pagination.selectedRows', { selected: selectedRowCount, total: rowCount }) }}
      </span>
      <span>{{ t('pagination.totalRows', { total }) }}</span>
    </div>
    <div
      v-if="!hidePagination"
      class="flex items-center"
    >
      <span class="ml-4 mr-1 text-sm hidden sm:block">{{ t('pagination.rowsPerPage') }}</span>
      <USelect
        v-model="limit"
        :items="sizes"
      />
      <span class="ml-4 mr-4 text-sm">{{ t('pagination.pageOf', { page, totalPage }) }}</span>
      <UPagination
        v-model:page="page"
        :items-per-page="limit"
        :total="total"
        show-edges
      />
    </div>
  </div>
</template>



================================================
FILE: app/components/AdminTable/components/SortControl/i18n.json
================================================
{
  "en": {
    "sortControl": {
      "sort": "Sort",
      "addSort": "Add sort",
      "resetSorting": "Reset sorting",
      "asc": "Asc",
      "desc": "Desc",
      "sortBy": "Sort By",
      "noSorting": "No sorting applied",
      "addSortingHint": "Add sorting to organize your rows."
    }
  },
  "zh-CN": {
    "sortControl": {
      "sort": "æ’åº",
      "addSort": "æ·»åŠ æ’åº",
      "resetSorting": "é‡ç½®æ’åº",
      "asc": "å‡åº",
      "desc": "é™åº",
      "sortBy": "æ’åºæ–¹å¼",
      "noSorting": "æœªåº”ç”¨æ’åº",
      "addSortingHint": "æ·»åŠ æ’åºä»¥ç»„ç»‡æ‚¨çš„è¡Œã€‚"
    }
  },
  "ja": {
    "sortControl": {
      "sort": "ä¸¦ã¹æ›¿ãˆ",
      "addSort": "ä¸¦ã¹æ›¿ãˆã‚’è¿½åŠ ",
      "resetSorting": "ä¸¦ã¹æ›¿ãˆã‚’ãƒªã‚»ãƒƒãƒˆ",
      "asc": "æ˜‡é †",
      "desc": "é™é †",
      "sortBy": "ä¸¦ã¹æ›¿ãˆåŸºæº–",
      "noSorting": "ä¸¦ã¹æ›¿ãˆãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã›ã‚“",
      "addSortingHint": "è¡Œã‚’æ•´ç†ã™ã‚‹ãŸã‚ã«ä¸¦ã¹æ›¿ãˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚"
    }
  },
  "fr": {
    "sortControl": {
      "sort": "Trier",
      "addSort": "Ajouter un tri",
      "resetSorting": "RÃ©initialiser le tri",
      "asc": "Ascendant",
      "desc": "Descendant",
      "sortBy": "Trier par",
      "noSorting": "Aucun tri appliquÃ©",
      "addSortingHint": "Ajoutez un tri pour organiser vos lignes."
    }
  }
}



================================================
FILE: app/components/AdminTable/components/SortControl/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts" generic="T">
import SortableContent from './SortableContent.vue'

const { columns } = defineProps<{
  columns: AdminTableColumn<T>[]
}>()

const sortOptions = defineModel<SortOption[]>('sortOptions', { default: [] })

const { t } = useI18n()
</script>

<template>
  <UPopover
    arrow
    :content="{ align: 'end', side: 'bottom' }"
  >
    <UButton
      color="neutral"
      variant="outline"
      icon="lucide-arrow-down-up"
    >
      {{ sortOptions.length ? t('sortControl.sort') : '' }}
      <UBadge
        v-if="sortOptions.length"
        color="neutral"
        variant="outline"
        size="sm"
      >
        {{ sortOptions.length }}
      </UBadge>
    </UButton>
    <template #content>
      <SortableContent
        v-model:sort-options="sortOptions"
        :columns="columns"
        :t="t"
      />
    </template>
  </UPopover>
</template>



================================================
FILE: app/components/AdminTable/components/SortControl/SortableContent.vue
================================================
<script setup lang="ts" generic="T">
import { useSortable } from '@vueuse/integrations/useSortable'

const { columns, t } = defineProps<{
  columns: AdminTableColumn<T>[]
  t: TranFunction
}>()

const dragEl = useTemplateRef<HTMLElement>('dragEl')
const sortOptions = defineModel<SortOption[]>('sortOptions', { default: [] })

useSortable(dragEl, sortOptions, {
  handle: '.drag-handle'
})

const columnsOptions = computed(() => {
  return columns.filter(column => column.header && column.accessorKey).map(column => ({
    label: column.header as string,
    value: column.accessorKey as string
  }))
})
const existingFields = computed(() => {
  return sortOptions.value.map(sort => sort.field)
})

const availableColumns = computed(() => {
  return columnsOptions.value.filter(option => !existingFields.value.includes(option.value))
})

const findSelectedColumn = (field: string) => {
  if (!field) {
    return []
  }
  return columnsOptions.value.filter(option => option.value === field)
}

const addSort = () => {
  if (availableColumns.value.length === 0) {
    return
  }
  sortOptions.value = [
    ...sortOptions.value,
    { field: availableColumns.value[0]!.value, order: 'asc' }
  ]
}
const removeSort = (index: number) => {
  const updatedSortOptions = [...sortOptions.value]
  updatedSortOptions.splice(index, 1)
  sortOptions.value = updatedSortOptions
}

const resetSorting = () => {
  sortOptions.value = []
}
</script>

<template>
  <div class="p-4 rounded bg-white dark:bg-neutral-800 shadow-md w-80">
    <div class="text-neutral-500 dark:text-neutral-400 text-sm mb-2">
      <span class="font-bold">
        {{ sortOptions.length === 0 ? t('sortControl.noSorting') : t('sortControl.sortBy') }}</span>
      <template v-if="sortOptions.length === 0">
        <br>
        {{ t('sortControl.addSortingHint') }}
      </template>
    </div>
    <div ref="dragEl">
      <div
        v-for="(sort, index) in sortOptions"
        :key="index"
        class="flex items-center mb-2"
      >
        <USelect
          v-model="sort.field"
          :items="[...findSelectedColumn(sort.field), ...availableColumns]"
          class="flex-1 mr-2"
        />
        <USelect
          v-model="sort.order"
          :items="[{ label: t('sortControl.asc'), value: 'asc' }, { label: t('sortControl.desc'), value: 'desc' }]"
          class="w-24 mr-2"
        />
        <UButton
          icon="lucide-trash"
          color="neutral"
          variant="outline"
          class="mr-2"
          @click="removeSort(index)"
        />
        <UButton
          icon="lucide-grip-vertical"
          color="neutral"
          variant="outline"
          class="drag-handle"
        />
      </div>
    </div>
    <div class="flex mt-4 gap-x-2">
      <UButton
        color="neutral"
        variant="solid"
        @click="addSort"
      >
        {{ t('sortControl.addSort') }}
      </UButton>
      <UButton
        v-if="sortOptions.length > 0"
        color="neutral"
        variant="outline"
        @click="resetSorting"
      >
        {{ t('sortControl.resetSorting') }}
      </UButton>
    </div>
  </div>
</template>



================================================
FILE: app/components/AdminTable/composables/useColumnControl.ts
================================================
import type { ShallowRef } from 'vue'
import type { UTableInstance } from '../types'

export default function useColumnControl<T>(columns: AdminTableColumn<T>[], tableRef: ShallowRef<UTableInstance | null>) {
  const defaultSelectedColumns = columns
    .map(column => (column.accessorKey || column.id)!)
  const selectedColumns = ref(defaultSelectedColumns)

  watchEffect(() => {
    for (const column of columns) {
      const columnKey = (column.accessorKey || column.id)!
      if (selectedColumns.value.includes(columnKey)) {
        tableRef.value?.tableApi?.getColumn(columnKey)?.toggleVisibility(true)
      }
      else {
        tableRef.value?.tableApi?.getColumn(columnKey)?.toggleVisibility(false)
      }
    }
  })
  return {
    selectedColumns
  }
}



================================================
FILE: app/components/AdminTable/composables/useSelectControl.ts
================================================
import type { RowData } from '@tanstack/vue-table'
import type { ShallowRef } from 'vue'
import type { UTableInstance } from '../types'

export default function useSelectControl<T extends RowData>(tableRef: ShallowRef<UTableInstance | null>, rowId?: string) {
  const selectColumnId = 'admin-table-select'
  const getRowId = (originalRow: T, index: number) => {
    if (rowId) {
      return `${(originalRow as Record<string, any>)[rowId] || index}`
    } else {
      return `${index}`
    }
  }
  const selectedRowCount = computed(() => {
    return tableRef.value?.tableApi?.getFilteredSelectedRowModel().rows.length || 0
  })
  const rowCount = computed(() => {
    return tableRef.value?.tableApi?.getFilteredRowModel().rows.length || 0
  })
  return {
    selectColumnId,
    getRowId,
    selectedRowCount,
    rowCount
  }
}



================================================
FILE: app/components/ColorModeToggler/i18n.json
================================================
{
  "en": {
    "colorModeToggler": {
      "ariaLabel": "Change Color Mode"
    }
  },
  "zh-CN": {
    "colorModeToggler": {
      "ariaLabel": "åˆ‡æ¢é¢œè‰²æ¨¡å¼"
    }
  },
  "ja": {
    "colorModeToggler": {
      "ariaLabel": "ã‚«ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰æ›´"
    }
  },
  "fr": {
    "colorModeToggler": {
      "ariaLabel": "Changer le mode de couleur"
    }
  }
}



================================================
FILE: app/components/ColorModeToggler/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const colorMode = useColorMode()
const { t } = useI18n()

const toggleColorMode = () => {
  colorMode.preference = colorMode.value === 'light' ? 'dark' : 'light'
}
</script>

<template>
  <UButton
    :icon="colorMode.value === 'light' ? 'i-lucide-moon' : 'i-lucide-sun'"
    color="neutral"
    variant="ghost"
    :aria-label="t('colorModeToggler.ariaLabel')"
    @click="toggleColorMode"
  />
</template>



================================================
FILE: app/components/LocaleToggler/i18n.json
================================================
{
  "en": {
    "localeToggler": {
      "ariaLabel": "Change language"
    }
  },
  "zh-CN": {
    "localeToggler": {
      "ariaLabel": "åˆ‡æ¢è¯­è¨€"
    }
  },
  "ja": {
    "localeToggler": {
      "ariaLabel": "è¨€èªã‚’å¤‰æ›´"
    }
  },
  "fr": {
    "localeToggler": {
      "ariaLabel": "Changer de langue"
    }
  }
}



================================================
FILE: app/components/LocaleToggler/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const { locale, setLocale, locales } = useI18n()
const { t } = useI18n()
const localeItems = computed(() => {
  return locales.value.map(item => ({
    label: item.name,
    type: 'checkbox' as const,
    checked: locale.value === item.code,
    onUpdateChecked: async (checked: boolean) => {
      if (checked) {
        await setLocale(item.code)
      }
    }
  }))
})
</script>

<template>
  <UDropdownMenu :items="localeItems">
    <UButton
      icon="i-lucide-languages"
      color="neutral"
      variant="ghost"
      class="w-8 h-8"
      :aria-label="t('localeToggler.ariaLabel')"
    />
  </UDropdownMenu>
</template>



================================================
FILE: app/composables/useAdminTable.ts
================================================
import type { AdminTable } from '#components'
import type { ComponentExposed } from 'vue-component-type-helpers'

export function useAdminTable(refName: string = 'table') {
  const adminTableRef = useTemplateRef<ComponentExposed<typeof AdminTable>>(refName)
  const refresh = () => {
    adminTableRef.value?.fetchTableData()
  }
  return {
    refresh
  }
}



================================================
FILE: app/composables/useAuth.ts
================================================
import type { Subscription } from '@better-auth/stripe'
import type { CustomerState } from '@polar-sh/sdk/models/components/customerstate.js'
import type {
  ClientOptions,
  InferSessionFromClient
} from 'better-auth/client'
import type { RouteLocationRaw } from 'vue-router'
import { stripeClient } from '@better-auth/stripe/client'
import { polarClient } from '@polar-sh/better-auth'
import { adminClient, inferAdditionalFields } from 'better-auth/client/plugins'
import { createAuthClient } from 'better-auth/vue'

export function useAuth() {
  const url = useRequestURL()
  const headers = import.meta.server ? useRequestHeaders() : undefined
  const runtimeConfig = useRuntimeConfig()
  const payment = runtimeConfig.public.payment as 'stripe' | 'polar'
  const client = createAuthClient({
    baseURL: url.origin,
    fetchOptions: {
      headers
    },
    plugins: [
      inferAdditionalFields({
        user: {
          polarCustomerId: {
            type: 'string'
          }
        }
      }),
      adminClient(),
      polarClient(),
      stripeClient({
        subscription: true
      })
    ]
  })

  const session = useState<InferSessionFromClient<ClientOptions> | null>('auth:session', () => null)
  const user = useState<User | null>('auth:user', () => null)
  const subscriptions = useState<Subscription[]>('auth:subscriptions', () => [])
  const polarState = useState<CustomerState | null>('auth:polarState', () => null)
  const sessionFetching = import.meta.server ? ref(false) : useState('auth:sessionFetching', () => false)

  const fetchSession = async () => {
    if (sessionFetching.value) {
      return
    }
    sessionFetching.value = true
    const { data } = await client.useSession(useFetch)
    session.value = data.value?.session || null

    const userDefaults = {
      image: null,
      role: null,
      banReason: null,
      banned: null,
      banExpires: null,
      stripeCustomerId: null
    }
    user.value = data.value?.user
      ? Object.assign({}, userDefaults, data.value.user)
      : null
    subscriptions.value = []
    if (user.value) {
      if (payment == 'stripe') {
        const { data: subscriptionData } = await client.subscription.list()
        subscriptions.value = subscriptionData || []
      } else if (payment == 'polar') {
        const { data: customerState } = await client.customer.state()
        polarState.value = customerState
      }
    }
    sessionFetching.value = false
    return data
  }

  if (import.meta.client) {
    client.$store.listen('$sessionSignal', async (signal) => {
      if (!signal)
        return
      await fetchSession()
    })
  }

  return {
    session,
    user,
    subscription: client.subscription,
    subscriptions,
    loggedIn: computed(() => !!session.value),
    activeStripeSubscription: computed(() => {
      return subscriptions.value.find(
        sub => sub.status === 'active' || sub.status === 'trialing'
      )
    }),
    activePolarSubscriptions: computed(() => {
      return polarState.value?.activeSubscriptions
    }),
    signIn: client.signIn,
    signUp: client.signUp,
    forgetPassword: client.forgetPassword,
    resetPassword: client.resetPassword,
    sendVerificationEmail: client.sendVerificationEmail,
    errorCodes: client.$ERROR_CODES,
    async signOut({ redirectTo }: { redirectTo?: RouteLocationRaw } = {}) {
      await client.signOut({
        fetchOptions: {
          onSuccess: async () => {
            session.value = null
            user.value = null
            if (redirectTo) {
              await navigateTo(redirectTo)
            }
          }
        }
      })
    },
    fetchSession,
    payment,
    client
  }
}



================================================
FILE: app/composables/useCustomFetch.ts
================================================
import type { UseFetchOptions } from 'nuxt/app'

export function useCustomFetch<T>(
  url: string | Request | Ref<string | Request> | (() => string | Request),
  options: UseFetchOptions<T> = {}
) {
  return {
    ...useFetch(url, {
      ...options,
      $fetch: useNuxtApp().$customFetch
    })
  }
}



================================================
FILE: app/i18n/global.json
================================================
{
  "en": {
    "global": {
      "appName": "NuxSaaS",
      "nav": {
        "admin": "Admin",
        "features": "Features",
        "pricing": "Pricing",
        "docs": "Documentation"
      },
      "auth": {
        "signIn": "Sign In",
        "signOut": "Sign Out",
        "profile": "Profile"
      },
      "page": {
        "actions": "Actions",
        "create": "Create",
        "edit": "Edit",
        "save": "Save",
        "delete": "Delete",
        "cancel": "Cancel",
        "name": "Name",
        "status": "Status",
        "createdAt": "Created At",
        "all": "All"
      }
    }
  },
  "zh-CN": {
    "global": {
      "appName": "NuxSaaS",
      "nav": {
        "admin": "ç®¡ç†åå°",
        "features": "åŠŸèƒ½ç‰¹æ€§",
        "pricing": "å®šä»·æ–¹æ¡ˆ",
        "docs": "æ–‡æ¡£"
      },
      "auth": {
        "signIn": "ç™»å½•",
        "signOut": "é€€å‡º",
        "profile": "ä¸ªäººèµ„æ–™"
      },
      "page": {
        "actions": "æ“ä½œ",
        "create": "åˆ›å»º",
        "edit": "ç¼–è¾‘",
        "save": "ä¿å­˜",
        "delete": "åˆ é™¤",
        "cancel": "å–æ¶ˆ",
        "name": "åç§°",
        "status": "çŠ¶æ€",
        "createdAt": "åˆ›å»ºæ—¶é—´",
        "all": "å…¨éƒ¨"
      }
    }
  },
  "ja": {
    "global": {
      "appName": "NuxSaaS",
      "nav": {
        "admin": "ç®¡ç†ç”»é¢",
        "features": "æ©Ÿèƒ½",
        "pricing": "æ–™é‡‘",
        "docs": "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"
      },
      "auth": {
        "signIn": "ãƒ­ã‚°ã‚¤ãƒ³",
        "signOut": "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
        "profile": "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"
      },
      "page": {
        "actions": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³",
        "create": "ä½œæˆ",
        "edit": "ç·¨é›†",
        "save": "ä¿å­˜",
        "delete": "å‰Šé™¤",
        "cancel": "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
        "name": "åå‰",
        "status": "çŠ¶æ…‹",
        "createdAt": "ä½œæˆæ—¥æ™‚",
        "all": "ã™ã¹ã¦"
      }
    }
  },
  "fr": {
    "global": {
      "appName": "NuxSaaS",
      "nav": {
        "admin": "Administration",
        "features": "FonctionnalitÃ©s",
        "pricing": "Tarification",
        "docs": "Documentation"
      },
      "auth": {
        "signIn": "Connexion",
        "signOut": "DÃ©connexion",
        "profile": "Profil"
      },
      "page": {
        "actions": "Actions",
        "create": "CrÃ©er",
        "edit": "Modifier",
        "save": "Enregistrer",
        "delete": "Supprimer",
        "cancel": "Annuler",
        "name": "Nom",
        "status": "Statut",
        "createdAt": "CrÃ©Ã© le",
        "all": "Tout"
      }
    }
  }
}



================================================
FILE: app/i18n/i18n.config.ts
================================================
import globalMessage from './global.json'

export default defineI18nConfig(() => ({
  legacy: false,
  locale: 'en',
  fallbackWarn: false,
  missingWarn: false,
  messages: globalMessage
}))



================================================
FILE: app/layouts/admin.vue
================================================
<i18n src="./menu/i18n.json"></i18n>

<script setup lang="ts">
import SearchPalette from './components/SearchPalette.vue'
import { getMenus } from './menu'

const { user, signOut } = useAuth()

const router = useRouter()
const route = useRoute()
const { t } = useI18n()
const localePath = useLocalePath()
const isCollapsed = ref(false)
const runtimeConfig = useRuntimeConfig()

defineShortcuts({
  'g-1': () => router.push(localePath('/admin/dashboard')),
  'g-2': () => router.push(localePath('/admin/user'))
})
const pathNameItemMap: StringDict<NavigationMenuItem> = {}
const pathNameParentMap: StringDict<NavigationMenuItem | undefined> = {}

const menus = getMenus(t, localePath, runtimeConfig.public.appRepo)
const menuIterator = (menus: NavigationMenuItem[], parent?: NavigationMenuItem) => {
  for (const menu of menus) {
    const to = `${menu.to}`
    pathNameItemMap[to] = menu!
    pathNameParentMap[to] = parent
    if (menu.to == route.path) {
      if (pathNameParentMap[to]) {
        pathNameParentMap[to].defaultOpen = true
      }
    }
    if (menu.children) {
      menuIterator(menu.children, menu)
    }
  }
}
menus.forEach((group) => {
  menuIterator(group)
})

const clickSignOut = () => {
  signOut({ redirectTo: localePath('/signin') })
}
</script>

<template>
  <div>
    <aside
      class="fixed top-0 left-0 transition-all duration-300 hidden sm:block"
      :class="[isCollapsed ? 'w-15' : 'w-64']"
    >
      <div class="h-screen flex flex-col px-3 py-4 bg-gray-100 dark:bg-gray-800">
        <a
          v-if="!isCollapsed"
          class="flex items-center ps-2.5"
        >
          <Logo class="h-6 w-6" />
          <span
            class="self-center ml-2 text-xl font-semibold whitespace-nowrap dark:text-white"
          >
            {{ t('global.appName') }}
          </span>
        </a>
        <Logo
          v-if="isCollapsed"
          class="h-6 w-6 ml-1"
        />
        <div
          class="flex mb-2 mt-3"
          :class="{ 'pl-2 pr-2': !isCollapsed }"
        >
          <SearchPalette
            :collapsed="isCollapsed"
            :t="t"
          />
        </div>
        <UNavigationMenu
          :items="menus"
          :collapsed="isCollapsed"
          orientation="vertical"
          class="data-[orientation=vertical]:w-full flex-1 overflow-y-auto"
        />
        <div class="flex flex-col pl-1 pr-2">
          <USeparator />
          <UTooltip
            :ui="{ content: 'w-54 flex flex-col h-auto p-0 gap-0' }"
            :delay-duration="100"
            :disable-closing-trigger="true"
          >
            <template #content>
              <UButton
                icon="i-lucide-log-out"
                size="sm"
                color="neutral"
                variant="link"
                class="w-full p-[10px]"
                @click="clickSignOut"
              >
                {{ t('global.auth.signOut') }}
              </UButton>
            </template>
            <div
              class="w-full flex items-center justify-between mt-2 pt-2 pb-2"
              :class="{ 'pl-2 pr-2': !isCollapsed }"
            >
              <div class="flex items-center">
                <UAvatar
                  :src="user?.image || undefined"
                  size="xs"
                  class="border border-gray-300 dark:border-gray-700"
                />
                <span
                  v-if="!isCollapsed"
                  class="text-xs ml-2"
                >
                  {{ user?.name }}
                </span>
              </div>
              <UIcon
                v-if="!isCollapsed"
                name="i-lucide-ellipsis-vertical"
              />
            </div>
          </UTooltip>
        </div>
      </div>
    </aside>
    <div
      class="p-2 h-screen bg-white dark:bg-gray-900 transition-all duration-300 overflow-hidden flex flex-col"
      :class="[isCollapsed ? 'sm:ml-15' : 'sm:ml-64']"
    >
      <FlexThreeColumn class="mb-2 flex-none">
        <template #left>
          <UDrawer
            class="sm:hidden"
            direction="left"
            as="aside"
            :handle="false"
          >
            <UButton
              icon="i-lucide-menu"
              class="w-8 h-8"
              color="neutral"
              variant="ghost"
            />
            <template #content>
              <div class="w-[60vw] p-4">
                <UNavigationMenu
                  orientation="vertical"
                  :items="menus"
                  class="data-[orientation=vertical]:w-full"
                />
              </div>
            </template>
          </UDrawer>
          <UButton
            :icon="isCollapsed ? 'i-lucide-panel-left-open' : 'i-lucide-panel-left-close'"
            class="w-8 h-8 hidden sm:block"
            color="neutral"
            variant="ghost"
            @click="isCollapsed = !isCollapsed"
          />
          <title>{{ pathNameItemMap[$route.path]?.label }}</title>
          <h1>{{ pathNameItemMap[$route.path]?.label }} </h1>
          <slot name="navLeft" />
        </template>
        <template #middle>
          <slot name="navMiddle" />
        </template>
        <template #right>
          <slot name="navRight" />
          <LocaleToggler />
          <ClientOnly>
            <ColorModeToggler />
          </ClientOnly>
        </template>
      </FlexThreeColumn>
      <div class="p-2 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 flex-1 overflow-auto">
        <slot />
      </div>
    </div>
  </div>
</template>



================================================
FILE: app/layouts/default.vue
================================================
<script lang="ts" setup>
import AppFooter from './components/AppFooter.vue'
import AppNavbar from './components/AppNavbar.vue'

const i18nHead = useLocaleHead()
useHead(() => ({
  link: [...(i18nHead.value.link || [])]
}))
</script>

<template>
  <div class="min-h-screen flex flex-col items-center relative">
    <AppNavbar>
      <template #center>
        <slot name="nav-center" />
      </template>
      <template #right>
        <slot name="nav-right" />
      </template>
    </AppNavbar>
    <div class="flex flex-1 pt-16 w-full sm:w-auto">
      <slot />
    </div>
    <AppFooter />
  </div>
</template>



================================================
FILE: app/layouts/components/AppFooter.vue
================================================
<script lang="ts" setup>
const { t } = useI18n()
const runtimeConfig = useRuntimeConfig()
</script>

<template>
  <footer class="w-full h-26 sm:h-16 border-t border-gray-200 dark:border-gray-800 py-4 z-1">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4">
        <div class="flex items-center space-x-2">
          <UIcon name="i-lucide-code" />
          <span>{{ t('global.appName') }}</span>
          <USeparator
            orientation="vertical"
            class="hidden md:block"
          />
          <span class="text-sm text-gray-500 dark:text-gray-400">
            Â© {{ new Date().getFullYear() }} All rights reserved
          </span>
        </div>

        <div class="flex items-center space-x-4">
          <LocaleToggler />
          <ClientOnly>
            <ColorModeToggler />
          </ClientOnly>
          <UButton
            icon="i-simple-icons-github"
            variant="ghost"
            color="neutral"
            :href="runtimeConfig.public.appRepo"
            target="_blank"
            aria-label="Github"
            rel="noopener noreferrer"
          />
        </div>
      </div>
    </div>
  </footer>
</template>



================================================
FILE: app/layouts/components/AppNavbar.vue
================================================
<script lang="ts" setup>
const { t } = useI18n()
const localePath = useLocalePath()
</script>

<template>
  <!-- Navigation -->
  <nav class="fixed h-16 top-0 left-0 right-0 z-50 bg-white/70 dark:bg-gray-900/70 backdrop-blur-md border-b border-gray-200 dark:border-gray-800">
    <UContainer class="flex h-full items-center justify-between">
      <NuxtLink
        :to="localePath('/')"
        class="flex items-center gap-2"
      >
        <span class="font-bold text-xl flex items-center">
          <Logo class="w-6 h-6 mr-1" />
          {{ t('global.appName') }}
        </span>
      </NuxtLink>

      <slot name="center" />
      <slot name="right" />
    </UContainer>
  </nav>
</template>



================================================
FILE: app/layouts/components/SearchPalette.vue
================================================
<script setup lang="ts">
const { t } = defineProps<{
  t: TranFunction
}>()
const router = useRouter()
const localePath = useLocalePath()
const collapsed = defineModel('collapsed', { default: false })

const groups = ref([
  {
    id: 'Routes',
    label: t('menu.navigation'),
    items: [
      {
        label: t('menu.dashboard'),
        icon: 'i-lucide-layout-dashboard',
        to: localePath('/admin/dashboard'),
        kbds: [
          'G',
          '1'
        ]
      },
      {
        label: t('menu.users'),
        icon: 'i-lucide-users',
        to: localePath('/admin/user'),
        kbds: [
          'G',
          '2'
        ]
      }
    ]
  }
])

const value = ref({})
const isOpen = ref(false)

defineShortcuts({
  shift_g: {
    usingInput: true,
    handler: () => {
      isOpen.value = !isOpen.value
    }
  },
  escape: {
    usingInput: true,
    handler: () => { isOpen.value = false }
  }
})

const onClosePalette = (value: boolean) => {
  if (!value) {
    isOpen.value = false
  }
}

function onSelectPalette(item: any) {
  if (item.onSelect) {
    item.onSelect()
  } else if (item.to) {
    if (typeof item.to === 'string' && (item.target === '_blank' || item.to.startsWith('http'))) {
      window.open(item.to, item.target || '_blank')
    } else {
      router.push(item.to)
    }
  }
  onClosePalette(false)
}
</script>

<template>
  <UModal v-model:open="isOpen">
    <UButton
      :class="{ 'w-full': !collapsed }"
      size="sm"
      icon="i-lucide-search"
      color="neutral"
      variant="outline"
      @click="isOpen = true"
    >
      <span
        v-if="!collapsed"
        class="w-full text-left"
      >
        {{ `${t('menu.search')}...` }}
      </span>
      <template
        v-if="!collapsed"
        #trailing
      >
        <UKbd value="shift" />
        <UKbd value="G" />
      </template>
    </UButton>
    <template #content>
      <UCommandPalette
        v-model="value"
        close
        :groups="groups"
        :placeholder="`${t('menu.search')}...`"
        class="flex-1"
        @update:open="onClosePalette"
        @update:model-value="onSelectPalette"
      />
    </template>
  </UModal>
</template>



================================================
FILE: app/layouts/menu/i18n.json
================================================
{
  "en": {
    "menu": {
      "navigation": "Navigation",
      "search": "Search",
      "dashboard": "Dashboard",
      "users": "Users",
      "subscriptions": "Subscriptions",
      "maintenance": "Maintenance",
      "dbStats": "Database Status",
      "home": "Home",
      "auditLog": "Audit Log",
      "migration": "Data Migration"
    }
  },
  "zh-CN": {
    "menu": {
      "navigation": "å¯¼èˆª",
      "search": "æœç´¢",
      "dashboard": "ä»ªè¡¨æ¿",
      "users": "ç”¨æˆ·",
      "subscriptions": "è®¢é˜…ç®¡ç†",
      "maintenance": "ç³»ç»Ÿç»´æŠ¤",
      "dbStats": "æ•°æ®åº“çŠ¶æ€",
      "home": "é¦–é¡µ",
      "auditLog": "å®¡è®¡æ—¥å¿—",
      "migration": "æ•°æ®è¿ç§»"
    }
  },
  "ja": {
    "menu": {
      "navigation": "ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",
      "search": "æ¤œç´¢",
      "dashboard": "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
      "users": "ãƒ¦ãƒ¼ã‚¶ãƒ¼",
      "subscriptions": "ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³",
      "maintenance": "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹",
      "dbStats": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹",
      "home": "ãƒ›ãƒ¼ãƒ ",
      "auditLog": "ç›£æŸ»ãƒ­ã‚°",
      "migration": "ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ"
    }
  },
  "fr": {
    "menu": {
      "navigation": "Navigation",
      "search": "Rechercher",
      "dashboard": "Tableau de bord",
      "users": "Utilisateurs",
      "subscriptions": "Abonnements",
      "maintenance": "Maintenance",
      "dbStats": "Ã‰tat de la base de donnÃ©es",
      "home": "Accueil",
      "auditLog": "Journal d'audit",
      "migration": "Migration de DonnÃ©es"
    }
  }
}



================================================
FILE: app/layouts/menu/index.ts
================================================
import type { LocalePathFunction } from '#i18n'

export const getMenus = (t: TranFunction, localePath: LocalePathFunction, appRepo: string): NavigationMenuItem[][] => {
  return [
    [
      {
        label: t('menu.dashboard'),
        icon: 'i-lucide-layout-dashboard',
        to: localePath('/admin/dashboard')
      },
      {
        label: t('menu.users'),
        icon: 'i-lucide-users',
        to: localePath('/admin/user')
      },
      {
        label: t('menu.subscriptions'),
        icon: 'i-lucide-credit-card',
        to: localePath('/admin/subscription')
      },
      {
        label: t('menu.maintenance'),
        icon: 'i-lucide-wrench',
        children: [
          {
            label: t('menu.auditLog'),
            icon: 'i-lucide-history',
            to: localePath('/admin/maintenance/audit-log')
          },
          {
            label: t('menu.dbStats'),
            icon: 'i-lucide-database',
            to: localePath('/admin/maintenance/db-stats')
          },
          {
            label: t('menu.migration'),
            icon: 'i-lucide-database-zap',
            to: localePath('/admin/maintenance/migration')
          }
        ]
      }
    ],
    [
      {
        label: t('menu.home'),
        icon: 'i-lucide-home',
        to: localePath('/')
      },
      {
        label: 'GitHub',
        icon: 'i-lucide-github',
        to: appRepo,
        target: '_blank'
      }
    ]
  ]
}



================================================
FILE: app/middleware/auth.global.ts
================================================
import { defu } from 'defu'

type MiddlewareOptions = false | {
  /**
   * Only apply auth middleware to guest or user
   */
  only?: 'guest' | 'user'
  /**
   * Redirect authenticated user to this route
   */
  redirectUserTo?: string
  /**
   * Redirect guest to this route
   */
  redirectGuestTo?: string
}

declare module '#app' {
  interface PageMeta {
    auth?: MiddlewareOptions
  }
}

declare module 'vue-router' {
  interface RouteMeta {
    auth?: MiddlewareOptions
  }
}

export default defineNuxtRouteMiddleware(async (to) => {
  // If auth is disabled, skip middleware
  if (to.meta?.auth === false) {
    return
  }
  const { loggedIn, user, fetchSession } = useAuth()
  const redirectOptions = useRuntimeConfig().public.auth
  const { only, redirectUserTo, redirectGuestTo } = defu(to.meta?.auth, redirectOptions)

  await fetchSession()

  const localePath = useLocalePath()

  if (only === 'guest') {
    if (loggedIn.value) {
      // Guest-only routes: redirect authenticated users to specified path
      // Avoid infinite redirect
      if (to.path === localePath(redirectUserTo)) {
        return
      }
      return navigateTo(localePath(redirectUserTo))
    } else {
      // Allow guest access to this route
      return
    }
  }

  // If not authenticated, redirect to home
  if (!loggedIn.value) {
    // Avoid infinite redirect
    if (to.path === localePath(redirectGuestTo)) {
      return
    }
    return navigateTo(localePath(`${redirectGuestTo}?redirect=${to.fullPath}`))
  }

  // Admin Pages
  const routeBaseName = useRouteBaseName()
  const routeName = routeBaseName(to)
  if (routeName?.startsWith('admin') && user.value?.role != 'admin') {
    return navigateTo(localePath('/403'))
  }
  if (routeName == 'admin') {
    return navigateTo(localePath('/admin/dashboard'))
  }
})



================================================
FILE: app/pages/admin.vue
================================================
<script setup lang="ts">
definePageMeta({
  layout: false
})
</script>

<template>
  <NuxtPage />
</template>



================================================
FILE: app/pages/index.json
================================================
{
  "en": {
    "home": {
      "slogan": "Nuxt.js Full-Stack SaaS Starter Kit - Free & Open Source",
      "getStarted": "Get Started",
      "viewOnGithub": "View on GitHub",
      "features": {
        "title": "Solid Foundation for Your SaaS Success",
        "categories": {
          "foundation": "Foundation",
          "integration": "Integration",
          "admin": "Admin",
          "experience": "Experience",
          "developer": "Developer"
        },
        "items": {
          "modernTechStack": {
            "title": "Modern Tech Stack",
            "description": "Built with Nuxt, ready for Nuxt v4, TypeScript and Vue 3 Composition API"
          },
          "secureAuth": {
            "title": "Secure Auth",
            "description": "A robust authentication system powered by Better Auth, providing OAuth2 social logins (Google, GitHub, etc.), sign-in/up, and email-based password reset capabilities."
          },
          "enterpriseDatabase": {
            "title": "Enterprise Database",
            "description": "PostgreSQL with Drizzle ORM for type-safe operations"
          },
          "emailIntegration": {
            "title": "Email Integration",
            "description": "Built-in Resend integration for transactional emails"
          },
          "paymentReady": {
            "title": "Payment Ready",
            "description": "Stripe/Polar integration for subscription management"
          },
          "noVendorLockIn": {
            "title": "No Vendor Lock-in",
            "description": "Modular architecture with swappable components"
          },
          "dashboard": {
            "title": "Dashboard",
            "description": "A powerful admin dashboard with beautiful charts"
          },
          "advancedTables": {
            "title": "Advanced Tables",
            "description": "Notion/Airtable like advanced filtering, sorting, and pagination, and built-in generic list api out of the box"
          },
          "userSubscriptionManagement": {
            "title": "User/Subscription Management",
            "description": "Ready to use User/Subscription management page"
          },
          "modernUIDesign": {
            "title": "Modern UI Design",
            "description": "Beautiful components with Nuxt UI and TailwindCSS"
          },
          "i18nReady": {
            "title": "I18n Ready",
            "description": "Built-in support for multiple languages"
          },
          "responsiveLayout": {
            "title": "Responsive Layout",
            "description": "Optimized for all devices and screen sizes"
          },
          "developerFriendly": {
            "title": "Developer Friendly",
            "description": "ESLint + TypeScript for better development"
          },
          "quickSetup": {
            "title": "Quick Setup",
            "description": "Start developing in minutes"
          },
          "customizable": {
            "title": "Customizable",
            "description": "Easily extend and customize components"
          }
        }
      },
      "screenshots": {
        "title": "Screenshots",
        "dashboard": "Dashboard",
        "users": "User Management",
        "pricing": "Pricing Plans",
        "subscription": "Subscription Management",
        "signin": "Sign In"
      }
    }
  },
  "zh-CN": {
    "home": {
      "slogan": "Nuxt.js å…¨æ ˆ SaaS èµ·æ­¥å·¥å…·åŒ… - å…è´¹å¼€æº",
      "getStarted": "å¼€å§‹ä½¿ç”¨",
      "viewOnGithub": "åœ¨ GitHub ä¸ŠæŸ¥çœ‹",
      "features": {
        "title": "ä¸ºæ‚¨çš„ SaaS æˆåŠŸæ‰“é€ åšå®åŸºç¡€",
        "categories": {
          "foundation": "åŸºç¡€æ¶æ„",
          "integration": "é›†æˆåŠŸèƒ½",
          "admin": "ç®¡ç†åŠŸèƒ½",
          "experience": "ç”¨æˆ·ä½“éªŒ",
          "developer": "å¼€å‘è€…å‹å¥½"
        },
        "items": {
          "modernTechStack": {
            "title": "ç°ä»£æŠ€æœ¯æ ˆ",
            "description": "ä½¿ç”¨ Nuxt æ„å»ºï¼Œæ”¯æŒ Nuxt v4ã€TypeScript å’Œ Vue 3 ç»„åˆå¼ API"
          },
          "secureAuth": {
            "title": "å®‰å…¨è®¤è¯",
            "description": "ç”± Better Auth æä¾›æ”¯æŒçš„å¼ºå¤§èº«ä»½éªŒè¯ç³»ç»Ÿï¼Œæ”¯æŒ OAuth2 ç¤¾äº¤ç™»å½•ï¼ˆGoogleã€GitHub ç­‰ï¼‰ã€ç™»å½•/æ³¨å†Œå’ŒåŸºäºé‚®ä»¶çš„å¯†ç é‡ç½®åŠŸèƒ½ã€‚"
          },
          "enterpriseDatabase": {
            "title": "ä¼ä¸šçº§æ•°æ®åº“",
            "description": "ä½¿ç”¨ PostgreSQL å’Œ Drizzle ORM å®ç°ç±»å‹å®‰å…¨çš„æ•°æ®æ“ä½œ"
          },
          "emailIntegration": {
            "title": "é‚®ä»¶é›†æˆ",
            "description": "å†…ç½® Resend é›†æˆç”¨äºå‘é€äº¤æ˜“é‚®ä»¶"
          },
          "paymentReady": {
            "title": "æ”¯ä»˜å°±ç»ª",
            "description": "é›†æˆ Stripe/Polar å®ç°è®¢é˜…ç®¡ç†"
          },
          "noVendorLockIn": {
            "title": "æ— ä¾›åº”å•†é”å®š",
            "description": "æ¨¡å—åŒ–æ¶æ„ï¼Œç»„ä»¶å¯äº’æ¢"
          },
          "dashboard": {
            "title": "ä»ªè¡¨ç›˜",
            "description": "åŠŸèƒ½å¼ºå¤§çš„ç®¡ç†ä»ªè¡¨ç›˜ï¼Œé…å¤‡ç²¾ç¾å›¾è¡¨"
          },
          "advancedTables": {
            "title": "é«˜çº§è¡¨æ ¼",
            "description": "ç±»ä¼¼ Notion/Airtable çš„é«˜çº§ç­›é€‰ã€æ’åºå’Œåˆ†é¡µåŠŸèƒ½ï¼Œå†…ç½®é€šç”¨åˆ—è¡¨ API"
          },
          "userSubscriptionManagement": {
            "title": "ç”¨æˆ·/è®¢é˜…ç®¡ç†",
            "description": "å³ç”¨å‹çš„ç”¨æˆ·å’Œè®¢é˜…ç®¡ç†é¡µé¢"
          },
          "modernUIDesign": {
            "title": "ç°ä»£åŒ–ç•Œé¢è®¾è®¡",
            "description": "ä½¿ç”¨ Nuxt UI å’Œ TailwindCSS æ„å»ºçš„ç²¾ç¾ç»„ä»¶"
          },
          "i18nReady": {
            "title": "å¤šè¯­è¨€æ”¯æŒ",
            "description": "å†…ç½®å¤šè¯­è¨€æ”¯æŒåŠŸèƒ½"
          },
          "responsiveLayout": {
            "title": "å“åº”å¼å¸ƒå±€",
            "description": "é’ˆå¯¹æ‰€æœ‰è®¾å¤‡å’Œå±å¹•å°ºå¯¸ä¼˜åŒ–"
          },
          "developerFriendly": {
            "title": "å¼€å‘è€…å‹å¥½",
            "description": "ä½¿ç”¨ ESLint + TypeScript æä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ"
          },
          "quickSetup": {
            "title": "å¿«é€Ÿæ­å»º",
            "description": "å‡ åˆ†é’Ÿå†…å³å¯å¼€å§‹å¼€å‘"
          },
          "customizable": {
            "title": "æ˜“äºå®šåˆ¶",
            "description": "è½»æ¾æ‰©å±•å’Œè‡ªå®šä¹‰ç»„ä»¶"
          }
        }
      },
      "screenshots": {
        "title": "æˆªå›¾",
        "dashboard": "ä»ªè¡¨ç›˜",
        "users": "ç”¨æˆ·ç®¡ç†",
        "pricing": "ä»·æ ¼æ–¹æ¡ˆ",
        "subscription": "è®¢é˜…ç®¡ç†",
        "signin": "ç™»å½•"
      }
    }
  },
  "ja": {
    "home": {
      "slogan": "Nuxt.js ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ SaaS ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚­ãƒƒãƒˆ - ç„¡æ–™ï¼†ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹",
      "getStarted": "å§‹ã‚ã¾ã—ã‚‡ã†",
      "viewOnGithub": "GitHub ã§è¦‹ã‚‹",
      "features": {
        "title": "SaaS ã®æˆåŠŸã®ãŸã‚ã®å …å›ºãªåŸºç›¤",
        "categories": {
          "foundation": "åŸºç›¤",
          "integration": "çµ±åˆæ©Ÿèƒ½",
          "admin": "ç®¡ç†æ©Ÿèƒ½",
          "experience": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“",
          "developer": "é–‹ç™ºè€…å‘ã‘"
        },
        "items": {
          "modernTechStack": {
            "title": "ãƒ¢ãƒ€ãƒ³æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯",
            "description": "Nuxt ã§æ§‹ç¯‰ã•ã‚Œã€Nuxt v4ã€TypeScriptã€Vue 3 Composition API ã«å¯¾å¿œ"
          },
          "secureAuth": {
            "title": "ã‚»ã‚­ãƒ¥ã‚¢èªè¨¼",
            "description": "Better Auth ã«ã‚ˆã‚‹å …ç‰¢ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€‚OAuth2 ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆGoogleã€GitHub ãªã©ï¼‰ã€ã‚µã‚¤ãƒ³ã‚¤ãƒ³/ã‚¢ãƒƒãƒ—ã€ãƒ¡ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã‚’æä¾›ã€‚"
          },
          "enterpriseDatabase": {
            "title": "ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹",
            "description": "PostgreSQL ã¨ Drizzle ORM ã«ã‚ˆã‚‹å‹å®‰å…¨ãªæ“ä½œ"
          },
          "emailIntegration": {
            "title": "ãƒ¡ãƒ¼ãƒ«çµ±åˆ",
            "description": "ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ãƒ¼ãƒ«ç”¨ã® Resend çµ±åˆæ©Ÿèƒ½æ­è¼‰"
          },
          "paymentReady": {
            "title": "æ±ºæ¸ˆå¯¾å¿œ",
            "description": "ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ç”¨ã® Stripe/Polar çµ±åˆ"
          },
          "noVendorLockIn": {
            "title": "ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ãªã—",
            "description": "äº¤æ›å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£"
          },
          "dashboard": {
            "title": "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
            "description": "ç¾ã—ã„ãƒãƒ£ãƒ¼ãƒˆã‚’å‚™ãˆãŸå¼·åŠ›ãªç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"
          },
          "advancedTables": {
            "title": "é«˜åº¦ãªãƒ†ãƒ¼ãƒ–ãƒ«",
            "description": "Notion/Airtable ã®ã‚ˆã†ãªé«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚½ãƒ¼ãƒˆã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¨ã™ãã«ä½¿ãˆã‚‹æ±ç”¨ãƒªã‚¹ãƒˆ API"
          },
          "userSubscriptionManagement": {
            "title": "ãƒ¦ãƒ¼ã‚¶ãƒ¼/ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†",
            "description": "ã™ãã«ä½¿ãˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ãƒšãƒ¼ã‚¸"
          },
          "modernUIDesign": {
            "title": "ãƒ¢ãƒ€ãƒ³ãª UI ãƒ‡ã‚¶ã‚¤ãƒ³",
            "description": "Nuxt UI ã¨ TailwindCSS ã«ã‚ˆã‚‹ç¾ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ"
          },
          "i18nReady": {
            "title": "å¤šè¨€èªå¯¾å¿œ",
            "description": "è¤‡æ•°è¨€èªã®ã‚µãƒãƒ¼ãƒˆã‚’æ¨™æº–æ­è¼‰"
          },
          "responsiveLayout": {
            "title": "ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ",
            "description": "ã™ã¹ã¦ã®ãƒ‡ãƒã‚¤ã‚¹ã¨ç”»é¢ã‚µã‚¤ã‚ºã«æœ€é©åŒ–"
          },
          "developerFriendly": {
            "title": "é–‹ç™ºè€…ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼",
            "description": "ESLint + TypeScript ã§ã‚ˆã‚Šè‰¯ã„é–‹ç™ºä½“é¨“"
          },
          "quickSetup": {
            "title": "ã‚¯ã‚¤ãƒƒã‚¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—",
            "description": "æ•°åˆ†ã§é–‹ç™ºã‚’é–‹å§‹å¯èƒ½"
          },
          "customizable": {
            "title": "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½",
            "description": "ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ‹¡å¼µã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå®¹æ˜“"
          }
        }
      },
      "screenshots": {
        "title": "ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ",
        "dashboard": "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
        "users": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†",
        "pricing": "ä¾¡æ ¼ãƒ—ãƒ©ãƒ³",
        "subscription": "ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†",
        "signin": "ãƒ­ã‚°ã‚¤ãƒ³"
      }
    }
  },
  "fr": {
    "home": {
      "slogan": "Kit de DÃ©marrage SaaS Full-Stack Nuxt.js - Gratuit et Open Source",
      "getStarted": "Commencer",
      "viewOnGithub": "Voir sur GitHub",
      "features": {
        "title": "Base solide pour votre succÃ¨s SaaS",
        "categories": {
          "foundation": "Fondation",
          "integration": "IntÃ©gration",
          "admin": "Administration",
          "experience": "ExpÃ©rience",
          "developer": "DÃ©veloppeur"
        },
        "items": {
          "modernTechStack": {
            "title": "Stack Technologique Moderne",
            "description": "Construit avec Nuxt, prÃªt pour Nuxt v4, TypeScript et Vue 3 Composition API"
          },
          "secureAuth": {
            "title": "Authentification SÃ©curisÃ©e",
            "description": "Un systÃ¨me d'authentification robuste propulsÃ© par Better Auth, offrant des connexions sociales OAuth2 (Google, GitHub, etc.), connexion/inscription, et rÃ©initialisation de mot de passe par email."
          },
          "enterpriseDatabase": {
            "title": "Base de DonnÃ©es Enterprise",
            "description": "PostgreSQL avec Drizzle ORM pour des opÃ©rations sÃ»res"
          },
          "emailIntegration": {
            "title": "IntÃ©gration Email",
            "description": "IntÃ©gration Resend intÃ©grÃ©e pour les emails transactionnels"
          },
          "paymentReady": {
            "title": "PrÃªt pour le Paiement",
            "description": "IntÃ©gration Stripe/Polar pour la gestion des abonnements"
          },
          "noVendorLockIn": {
            "title": "Pas de DÃ©pendance Fournisseur",
            "description": "Architecture modulaire avec composants interchangeables"
          },
          "dashboard": {
            "title": "Tableau de Bord",
            "description": "Un tableau de bord d'administration puissant avec de beaux graphiques"
          },
          "advancedTables": {
            "title": "Tables AvancÃ©es",
            "description": "Filtrage avancÃ©, tri et pagination comme Notion/Airtable, avec API de liste gÃ©nÃ©rique intÃ©grÃ©e"
          },
          "userSubscriptionManagement": {
            "title": "Gestion Utilisateurs/Abonnements",
            "description": "Page de gestion des utilisateurs et des abonnements prÃªte Ã  l'emploi"
          },
          "modernUIDesign": {
            "title": "Design UI Moderne",
            "description": "Beaux composants avec Nuxt UI et TailwindCSS"
          },
          "i18nReady": {
            "title": "PrÃªt pour l'I18n",
            "description": "Support intÃ©grÃ© pour plusieurs langues"
          },
          "responsiveLayout": {
            "title": "Mise en Page Responsive",
            "description": "OptimisÃ© pour tous les appareils et tailles d'Ã©cran"
          },
          "developerFriendly": {
            "title": "AdaptÃ© aux DÃ©veloppeurs",
            "description": "ESLint + TypeScript pour un meilleur dÃ©veloppement"
          },
          "quickSetup": {
            "title": "Configuration Rapide",
            "description": "Commencez Ã  dÃ©velopper en quelques minutes"
          },
          "customizable": {
            "title": "Personnalisable",
            "description": "Ã‰tendez et personnalisez facilement les composants"
          }
        }
      },
      "screenshots": {
        "title": "Captures d'Ã©cran",
        "dashboard": "Tableau de bord",
        "users": "Gestion des utilisateurs",
        "pricing": "Plans tarifaires",
        "subscription": "Gestion des abonnements",
        "signin": "Connexion"
      }
    }
  }
}



================================================
FILE: app/pages/index.vue
================================================
<i18n src="./index.json"></i18n>

<script setup lang="ts">
definePageMeta({
  auth: false,
  layout: false
})

const { t } = useI18n()
const localePath = useLocalePath()
const runtimeConfig = useRuntimeConfig()

const title = `${t('global.appName')}: ${t('home.slogan')}`
const desc = t('home.slogan')

useSeoMeta({
  title,
  description: desc,
  // Facebook
  ogTitle: title,
  ogDescription: desc,
  ogImage: '/screenshots/home.webp',
  // twitter
  twitterTitle: title,
  twitterDescription: desc,
  twitterImage: '/screenshots/home.webp'
})

const features = {
  foundation: [
    {
      icon: 'i-lucide-layout-template',
      title: t('home.features.items.modernTechStack.title'),
      description: t('home.features.items.modernTechStack.description')
    },
    {
      icon: 'i-lucide-shield-check',
      title: t('home.features.items.secureAuth.title'),
      description: t('home.features.items.secureAuth.description')
    },
    {
      icon: 'i-lucide-database',
      title: t('home.features.items.enterpriseDatabase.title'),
      description: t('home.features.items.enterpriseDatabase.description')
    }
  ],
  integration: [
    {
      icon: 'i-lucide-mail',
      title: t('home.features.items.emailIntegration.title'),
      description: t('home.features.items.emailIntegration.description')
    },
    {
      icon: 'i-lucide-credit-card',
      title: t('home.features.items.paymentReady.title'),
      description: t('home.features.items.paymentReady.description')
    },
    {
      icon: 'i-lucide-box',
      title: t('home.features.items.noVendorLockIn.title'),
      description: t('home.features.items.noVendorLockIn.description')
    }
  ],
  admin: [
    {
      icon: 'i-lucide-grid',
      title: t('home.features.items.dashboard.title'),
      description: t('home.features.items.dashboard.description')
    },
    {
      icon: 'i-lucide-users',
      title: t('home.features.items.advancedTables.title'),
      description: t('home.features.items.advancedTables.description')
    },
    {
      icon: 'i-lucide-file-text',
      title: t('home.features.items.userSubscriptionManagement.title'),
      description: t('home.features.items.userSubscriptionManagement.description')
    }
  ],
  experience: [
    {
      icon: 'i-lucide-palette',
      title: t('home.features.items.modernUIDesign.title'),
      description: t('home.features.items.modernUIDesign.description')
    },
    {
      icon: 'i-lucide-languages',
      title: t('home.features.items.i18nReady.title'),
      description: t('home.features.items.i18nReady.description')
    },
    {
      icon: 'i-lucide-smartphone',
      title: t('home.features.items.responsiveLayout.title'),
      description: t('home.features.items.responsiveLayout.description')
    }
  ],
  developer: [
    {
      icon: 'i-lucide-code',
      title: t('home.features.items.developerFriendly.title'),
      description: t('home.features.items.developerFriendly.description')
    },
    {
      icon: 'i-lucide-timer',
      title: t('home.features.items.quickSetup.title'),
      description: t('home.features.items.quickSetup.description')
    },
    {
      icon: 'i-lucide-settings',
      title: t('home.features.items.customizable.title'),
      description: t('home.features.items.customizable.description')
    }
  ]
}

const screenshots = [
  {
    label: t('home.screenshots.dashboard'),
    key: 'dashboard',
    src: '/screenshots/dashboard.webp'
  },
  {
    label: t('home.screenshots.users'),
    key: 'users',
    src: '/screenshots/users.webp'
  },
  {
    label: t('home.screenshots.subscription'),
    key: 'subscription',
    src: '/screenshots/subscription.webp'
  },
  {
    label: t('home.screenshots.pricing'),
    key: 'pricing',
    src: '/screenshots/pricing.webp'
  },
  {
    label: t('home.screenshots.signin'),
    key: 'signin',
    src: '/screenshots/signin.webp'
  }
]
const activeScreenshot = ref('0')
</script>

<template>
  <NuxtLayout name="default">
    <template #nav-center>
      <SiteNavigation
        mode="desktop"
        class="hidden sm:flex"
      />
    </template>
    <template #nav-right>
      <div class="flex items-center gap-2">
        <UserNavigation />
        <SiteNavigation
          mode="mobile"
          class="flex sm:hidden"
        />
      </div>
    </template>
    <div class="pt-16">
      <div class="absolute inset-0 bg-gradient-to-b from-emerald-50 to-white dark:from-gray-900 dark:to-gray-800" />
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-teal-500/10 blur-3xl opacity-50" />
        <div class="absolute top-0 left-0 w-[500px] h-[500px] bg-teal-500/20 rounded-full blur-3xl -ml-32 -mt-32 opacity-30" />
      </div>
      <!-- Hero Section -->
      <section class="relative overflow-hidden">
        <UContainer class="relative py-24">
          <div class="text-center">
            <h1 class="text-4xl font-bold tracking-tight sm:text-7xl mb-6">
              {{ t('global.appName') }}
            </h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">
              {{ t('home.slogan') }}
            </p>
            <div class="flex gap-4 justify-center">
              <UButton
                :to="localePath('/signin')"
                color="primary"
                size="lg"
              >
                {{ t('home.getStarted') }}
              </UButton>
              <UButton
                :to="runtimeConfig.public.appRepo"
                target="_blank"
                color="neutral"
                variant="outline"
                size="lg"
                icon="i-simple-icons-github"
              >
                {{ t('home.viewOnGithub') }}
              </UButton>
            </div>
          </div>
        </UContainer>
      </section>

      <!-- Screenshots Section -->
      <section class="relative mt-20">
        <UContainer>
          <div class="text-center mb-4">
            <h2 class="text-3xl font-bold">
              {{ t('home.screenshots.title') }}
            </h2>
          </div>
          <UTabs
            :items="screenshots"
            class="w-full hidden sm:block"
          >
            <template #content="{ item }">
              <div class="rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 shadow-lg">
                <img
                  :src="item.src"
                  :alt="item.label"
                  class="w-full h-auto"
                  loading="lazy"
                >
              </div>
            </template>
          </UTabs>
          <UAccordion
            v-model="activeScreenshot"
            :items="screenshots"
            class="w-full block sm:hidden"
          >
            <template #content="{ item }">
              <div class="rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 shadow-lg">
                <img
                  :src="item.src"
                  :alt="item.label"
                  class="w-full h-auto"
                  loading="lazy"
                >
              </div>
            </template>
          </UAccordion>
        </UContainer>
      </section>

      <!-- Features Section -->
      <section
        id="features"
        class="relative py-24 bg-gray-50/50 dark:bg-gray-900/50"
      >
        <UContainer>
          <div class="text-center mb-12">
            <h2 class="text-3xl font-bold">
              {{ t('home.features.title') }}
            </h2>
          </div>
          <!-- Feature Groups -->
          <div class="space-y-24">
            <div
              v-for="(group, key) in features"
              :key="key"
              class="space-y-8"
            >
              <h3 class="text-xl font-semibold capitalize text-center">
                {{ t(`home.features.categories.${key}`) }}
              </h3>
              <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <UCard
                  v-for="feature in group"
                  :key="feature.title"
                  class="bg-white/80 dark:bg-gray-800/80 backdrop-blur border-0 shadow hover:shadow-lg transition-shadow duration-200"
                >
                  <div class="flex gap-4 items-start p-2">
                    <div class="shrink-0">
                      <div class="p-3 bg-primary-50 dark:bg-primary-900/50 rounded-lg">
                        <UIcon
                          :name="feature.icon"
                          class="text-primary-500 w-5 h-5"
                        />
                      </div>
                    </div>
                    <div>
                      <h4 class="font-medium mb-2">
                        {{ feature.title }}
                      </h4>
                      <p class="text-sm text-gray-600 dark:text-gray-400">
                        {{ feature.description }}
                      </p>
                    </div>
                  </div>
                </UCard>
              </div>
            </div>
          </div>
        </UContainer>
      </section>
    </div>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/403/i18n.json
================================================
{
  "en": {
    "403": {
      "title": "Access Denied",
      "message": "Sorry, you don't have permission to access this page.",
      "back": "Back to home"
    }
  },
  "zh-CN": {
    "403": {
      "title": "è®¿é—®è¢«æ‹’ç»",
      "message": "æŠ±æ­‰ï¼Œæ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢ã€‚",
      "back": "è¿”å›é¦–é¡µ"
    }
  },
  "ja": {
    "403": {
      "title": "ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦",
      "message": "ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚",
      "back": "ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"
    }
  },
  "fr": {
    "403": {
      "title": "AccÃ¨s RefusÃ©",
      "message": "DÃ©solÃ©, vous n'avez pas la permission d'accÃ©der Ã  cette page.",
      "back": "Retour Ã  l'accueil"
    }
  }
}



================================================
FILE: app/pages/403/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const localePath = useLocalePath()
const { t } = useI18n()
</script>

<template>
  <div class="flex flex-1 flex-col items-center justify-center">
    <div class="text-center">
      <UIcon
        name="lucide:shield-alert"
        class="mx-auto h-16 w-16 text-red-500 dark:text-red-400"
      />
      <h1 class="mt-4 text-3xl font-bold tracking-tight text-gray-900 dark:text-white">
        {{ t('403.title') }}
      </h1>
      <p class="mt-2 text-base text-gray-500 dark:text-gray-400">
        {{ t('403.message') }}
      </p>
      <div class="mt-6">
        <UButton
          :to="localePath('/')"
          icon="lucide:home"
          variant="soft"
        >
          {{ t('403.back') }}
        </UButton>
      </div>
    </div>
  </div>
</template>



================================================
FILE: app/pages/admin/dashboard/i18n.json
================================================
{
  "en": {
    "dashboard": {
      "stats": {
        "activeUsers": "Active Users",
        "totalRevenue": "Total Revenue",
        "activeProjects": "Active Projects",
        "customerSatisfaction": "Customer Satisfaction"
      },
      "revenueChart": {
        "title": "Revenue Growth"
      },
      "userDistribution": {
        "title": "User Distribution by Plan"
      }
    }
  },
  "zh-CN": {
    "dashboard": {
      "stats": {
        "activeUsers": "æ´»è·ƒç”¨æˆ·",
        "totalRevenue": "æ€»æ”¶å…¥",
        "activeProjects": "æ´»è·ƒé¡¹ç›®",
        "customerSatisfaction": "å®¢æˆ·æ»¡æ„åº¦"
      },
      "revenueChart": {
        "title": "æ”¶å…¥å¢é•¿"
      },
      "userDistribution": {
        "title": "ç”¨æˆ·æ–¹æ¡ˆåˆ†å¸ƒ"
      }
    }
  },
  "ja": {
    "dashboard": {
      "stats": {
        "activeUsers": "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼",
        "totalRevenue": "ç·åå…¥",
        "activeProjects": "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
        "customerSatisfaction": "é¡§å®¢æº€è¶³åº¦"
      },
      "revenueChart": {
        "title": "åç›Šæˆé•·"
      },
      "userDistribution": {
        "title": "ãƒ—ãƒ©ãƒ³åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†å¸ƒ"
      }
    }
  },
  "fr": {
    "dashboard": {
      "stats": {
        "activeUsers": "Utilisateurs Actifs",
        "totalRevenue": "Revenu Total",
        "activeProjects": "Projets Actifs",
        "customerSatisfaction": "Satisfaction Client"
      },
      "revenueChart": {
        "title": "Croissance des Revenus"
      },
      "userDistribution": {
        "title": "Distribution des Utilisateurs par Plan"
      }
    }
  }
}



================================================
FILE: app/pages/admin/dashboard/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const { t } = useI18n()

const stats = ref([
  {
    name: 'activeUsers',
    value: '2,834',
    change: '+12.5%',
    isIncrease: true,
    icon: 'users'
  },
  {
    name: 'totalRevenue',
    value: '$45,289',
    change: '+8.2%',
    isIncrease: true,
    icon: 'dollar-sign'
  },
  {
    name: 'activeProjects',
    value: '156',
    change: '-3.1%',
    isIncrease: false,
    icon: 'folder'
  },
  {
    name: 'customerSatisfaction',
    value: '94.8%',
    change: '+2.3%',
    isIncrease: true,
    icon: 'smile'
  }
])

const RevenueData = [
  { month: 'January', desktop: 186, mobile: 80 },
  { month: 'February', desktop: 305, mobile: 200 },
  { month: 'March', desktop: 237, mobile: 120 },
  { month: 'April', desktop: 73, mobile: 190 },
  { month: 'May', desktop: 209, mobile: 130 },
  { month: 'June', desktop: 214, mobile: 140 }
]
const RevenueCategoriesMultple = {
  desktop: { name: 'Desktop', color: '#029752' },
  mobile: { name: 'Mobile', color: '#4ade80' }
}

const categories: Record<string, BulletLegendItemInterface> = {
  desktop: { name: 'Desktop', color: '#029752' },
  mobile: { name: 'Mobile', color: '#4ade80' }
}

const AreaChartData = [
  { date: '2024-04-01', desktop: 222, mobile: 150 },
  { date: '2024-04-02', desktop: 180, mobile: 97 },
  { date: '2024-04-03', desktop: 167, mobile: 120 },
  { date: '2024-04-04', desktop: 260, mobile: 240 },
  { date: '2024-04-05', desktop: 240, mobile: 290 }
]

const xFormatter = (i: number): string | number => AreaChartData[i]?.date || ''
</script>

<template>
  <NuxtLayout name="admin">
    <div class="space-y-8">
      <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
        <UCard
          v-for="stat in stats"
          :key="stat.name"
          class="relative overflow-hidden"
        >
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ t(`dashboard.stats.${stat.name}`) }}
              </div>
              <div class="mt-1 text-2xl font-semibold">
                {{ stat.value }}
              </div>
              <div
                class="mt-2 flex items-center text-sm"
                :class="stat.isIncrease ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'"
              >
                <Icon
                  :name="stat.isIncrease ? 'lucide:trending-up' : 'lucide:trending-down'"
                  class="mr-1 h-4 w-4"
                />
                {{ stat.change }}
              </div>
            </div>
            <Icon
              :name="`lucide:${stat.icon}`"
              class="h-8 w-8 text-gray-400 dark:text-gray-600"
            />
          </div>
        </UCard>
      </div>

      <!-- Charts -->
      <div class="grid grid-cols-1 gap-4 lg:grid-cols-2">
        <UCard>
          <AreaChart
            :data="AreaChartData"
            :height="250"
            :categories="categories"
            :y-num-ticks="4"
            :x-num-ticks="7"
            :grid-line-y="true"
            legend-poisition="top"
            :x-formatter="xFormatter"
          />
        </UCard>
        <UCard>
          <BarChart
            :data="RevenueData"
            :stacked="true"
            :height="250"
            :categories="RevenueCategoriesMultple"
            :y-axis="['desktop', 'mobile']"
            :group-padding="0"
            :bar-padding="0.2"
            :x-num-ticks="6"
            :radius="4"
            :orientation="Orientation.Horizontal"
            :x-formatter="(i) => i"
            :y-formatter="(i: number): string => `${RevenueData[i]!.month}`"
            :legend-position="LegendPosition.Top"
          />
        </UCard>
      </div>
    </div>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/admin/maintenance/audit-log/i18n.json
================================================
{
  "en": {
    "auditLog": {
      "title": "Audit Log",
      "category": "Category",
      "categories": {
        "auth": "Authentication",
        "email": "Email",
        "payment": "Payment"
      },
      "action": "Action",
      "targetType": "Target Type",
      "targetId": "Target ID",
      "ipAddress": "IP Address",
      "userAgent": "User Agent",
      "status": {
        "success": "Success",
        "failure": "Failure",
        "pending": "Pending"
      },
      "details": "Details",
      "createdAt": "Created At"
    }
  },
  "zh-CN": {
    "auditLog": {
      "title": "å®¡è®¡æ—¥å¿—",
      "category": "åˆ†ç±»",
      "categories": {
        "auth": "è®¤è¯",
        "email": "é‚®ä»¶",
        "payment": "æ”¯ä»˜"
      },
      "action": "æ“ä½œ",
      "targetType": "ç›®æ ‡ç±»å‹",
      "targetId": "ç›®æ ‡ID",
      "ipAddress": "IPåœ°å€",
      "userAgent": "ç”¨æˆ·ä»£ç†",
      "status": {
        "success": "æˆåŠŸ",
        "failure": "å¤±è´¥",
        "pending": "å¤„ç†ä¸­"
      },
      "details": "è¯¦æƒ…",
      "createdAt": "åˆ›å»ºæ—¶é—´"
    }
  },
  "ja": {
    "auditLog": {
      "title": "ç›£æŸ»ãƒ­ã‚°",
      "category": "ã‚«ãƒ†ã‚´ãƒªãƒ¼",
      "categories": {
        "auth": "èªè¨¼",
        "email": "ãƒ¡ãƒ¼ãƒ«",
        "payment": "æ”¯æ‰•ã„"
      },
      "action": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³",
      "targetType": "å¯¾è±¡ã‚¿ã‚¤ãƒ—",
      "targetId": "å¯¾è±¡ID",
      "ipAddress": "IPã‚¢ãƒ‰ãƒ¬ã‚¹",
      "userAgent": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ",
      "status": {
        "success": "æˆåŠŸ",
        "failure": "å¤±æ•—",
        "pending": "ä¿ç•™ä¸­"
      },
      "details": "è©³ç´°",
      "createdAt": "ä½œæˆæ—¥æ™‚"
    }
  },
  "fr": {
    "auditLog": {
      "title": "Journal d'audit",
      "category": "CatÃ©gorie",
      "categories": {
        "auth": "Authentification",
        "email": "E-mail",
        "payment": "Paiement"
      },
      "action": "Action",
      "targetType": "Type de cible",
      "targetId": "ID de cible",
      "ipAddress": "Adresse IP",
      "userAgent": "Agent utilisateur",
      "status": {
        "success": "SuccÃ¨s",
        "failure": "Ã‰chec",
        "pending": "En attente"
      },
      "details": "DÃ©tails",
      "createdAt": "CrÃ©Ã© le"
    }
  }
}



================================================
FILE: app/pages/admin/maintenance/audit-log/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
interface AuditLog {
  id: number
  userId: string | null
  category: string
  action: string
  targetType: string | null
  targetId: string | null
  ipAddress: string | null
  userAgent: string | null
  status: 'success' | 'failure' | 'pending'
  details: string | null
  createdAt: string // ISO timestamp string
}

const { t } = useI18n()

const filters: AdminTableFilter[] = reactive([
  {
    name: t('auditLog.category'),
    field: 'category',
    type: 'tabs',
    items: [
      { label: t('global.page.all'), id: '' },
      { label: t('auditLog.categories.auth'), id: 'auth' },
      { label: t('auditLog.categories.email'), id: 'email' },
      { label: t('auditLog.categories.payment'), id: 'payment' }
    ],
    value: ''
  },
  {
    name: t('global.page.status'),
    field: 'status',
    type: 'checkbox' as const,
    items: [
      { label: t('auditLog.status.success'), id: 'success', count: 0 },
      { label: t('auditLog.status.failure'), id: 'failure', count: 0 },
      { label: t('auditLog.status.pending'), id: 'pending', count: 0 }
    ],
    value: []
  },
  {
    name: t('global.page.createdAt'),
    field: 'createdAt',
    type: 'daterange',
    value: { start: undefined, end: undefined }
  }
])

const columns: AdminTableColumn<AuditLog>[] = [
  {
    accessorKey: 'id',
    header: 'ID'
  },
  {
    accessorKey: 'category',
    header: t('auditLog.category')
  },
  {
    accessorKey: 'action',
    header: t('auditLog.action')
  },
  {
    accessorKey: 'targetType',
    header: t('auditLog.targetType')
  },
  {
    accessorKey: 'targetId',
    header: t('auditLog.targetId')
  },
  {
    accessorKey: 'status',
    header: t('global.page.status')
  },
  {
    accessorKey: 'ipAddress',
    header: t('auditLog.ipAddress')
  },
  {
    accessorKey: 'userAgent',
    header: t('auditLog.userAgent'),
    cell: cell => showMoreColumn(cell, 20)
  },
  {
    accessorKey: 'details',
    header: t('auditLog.details'),
    cell: cell => showMoreColumn(cell, 20)
  },
  {
    accessorKey: 'createdAt',
    header: t('global.page.createdAt'),
    cell: dateColumn
  }
]

const getStatusColor = (status: string): 'success' | 'warning' | 'error' => {
  switch (status) {
    case 'success':
      return 'success'
    case 'pending':
      return 'warning'
    case 'failure':
      return 'error'
    default:
      return 'warning'
  }
}

const fetchStatusCount = async (filter: FilterCondition[]) => {
  const statusCount = await $fetch<ColumnCount[]>('/api/admin/count/auditLog/status', {
    query: {
      filter: JSON.stringify(filter)
    }
  })
  const statusFilter = filters[1] as FilterTabs
  statusFilter.items.forEach((item) => {
    const status = statusCount.find(status => status.column === item.id)
    item.count = status ? status.count : 0
  })
}

const fetchData: FetchDataFn<AuditLog> = async ({ page, limit, sort, filter }) => {
  fetchStatusCount(filter)
  const result = await $fetch<PageData<AuditLog>>('/api/admin/list/auditLog', {
    query: {
      page,
      limit,
      sort: JSON.stringify(sort.map((item) => {
        return [item.field, item.order]
      })),
      filter: JSON.stringify(filter)
    }
  })
  return {
    data: result.data,
    total: result.total
  }
}
</script>

<template>
  <NuxtLayout name="admin">
    <AdminTable
      :columns="columns"
      :filters="filters"
      :fetch-data="fetchData"
    >
      <template #status-cell="{ row: { original } }">
        <UBadge
          :color="getStatusColor(original.status)"
          :label="t(`auditLog.status.${original.status}`)"
        />
      </template>
    </AdminTable>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/admin/maintenance/db-stats/i18n.json
================================================
{
  "en": {
    "dbStats": {
      "performance": "Performance Statistics",
      "activeBackends": "Active Backends",
      "transactions": "Transactions",
      "commits": "Commits",
      "rollbacks": "Rollbacks",
      "tuples": "Tuples",
      "inserted": "Inserted",
      "updated": "Updated",
      "deleted": "Deleted",
      "cacheHitRatio": "Cache Hit Ratio",
      "conflicts": "Conflicts",
      "deadlocks": "Deadlocks",
      "tempFiles": "Temporary Files",
      "tempBytes": "Temporary Bytes"
    }
  },
  "zh-CN": {
    "dbStats": {
      "performance": "æ€§èƒ½ç»Ÿè®¡",
      "activeBackends": "æ´»åŠ¨åç«¯",
      "transactions": "äº‹åŠ¡",
      "commits": "æäº¤æ•°",
      "rollbacks": "å›æ»šæ•°",
      "tuples": "å…ƒç»„",
      "inserted": "æ’å…¥",
      "updated": "æ›´æ–°",
      "deleted": "åˆ é™¤",
      "cacheHitRatio": "ç¼“å­˜å‘½ä¸­ç‡",
      "conflicts": "å†²çªæ•°",
      "deadlocks": "æ­»é”æ•°",
      "tempFiles": "ä¸´æ—¶æ–‡ä»¶",
      "tempBytes": "ä¸´æ—¶æ–‡ä»¶å¤§å°"
    }
  },
  "ja": {
    "dbStats": {
      "performance": "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ",
      "activeBackends": "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰",
      "transactions": "ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³",
      "commits": "ã‚³ãƒŸãƒƒãƒˆæ•°",
      "rollbacks": "ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ•°",
      "tuples": "ã‚¿ãƒ—ãƒ«",
      "inserted": "æŒ¿å…¥",
      "updated": "æ›´æ–°",
      "deleted": "å‰Šé™¤",
      "cacheHitRatio": "ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡",
      "conflicts": "ç«¶åˆæ•°",
      "deadlocks": "ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ•°",
      "tempFiles": "ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«",
      "tempBytes": "ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º"
    }
  },
  "fr": {
    "dbStats": {
      "performance": "Statistiques de Performance",
      "activeBackends": "Backends Actifs",
      "transactions": "Transactions",
      "commits": "Validations",
      "rollbacks": "Annulations",
      "tuples": "Tuples",
      "inserted": "InsÃ©rÃ©s",
      "updated": "Mis Ã  jour",
      "deleted": "SupprimÃ©s",
      "cacheHitRatio": "Taux de Cache",
      "conflicts": "Conflits",
      "deadlocks": "Verrous Mortels",
      "tempFiles": "Fichiers Temporaires",
      "tempBytes": "Taille Temporaire"
    }
  }
}



================================================
FILE: app/pages/admin/maintenance/db-stats/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const { t } = useI18n()
const { data: dbStats } = await useFetch('/api/admin/maintenance/db-stats')

// Format bytes to human readable format
function formatBytes(bytes: number) {
  if (bytes === 0)
    return '0 B'
  const k = 1024
  const sizes = ['B', 'KB', 'MB', 'GB']
  const i = Math.floor(Math.log(bytes) / Math.log(k))
  return `${Number.parseFloat((bytes / k ** i).toFixed(2))} ${sizes[i]}`
}
</script>

<template>
  <NuxtLayout name="admin">
    <UCard class="mt-4">
      <template #header>
        <div class="flex items-center gap-2">
          <Icon name="lucide:bar-chart" />
          <span>{{ t('dbStats.performance') }}</span>
        </div>
      </template>

      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        <UCard>
          <div class="space-y-4">
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ t('dbStats.activeBackends') }}
              </div>
              <div class="text-xl">
                {{ dbStats?.activeBackends }}
              </div>
            </div>

            <USeparator />

            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ t('dbStats.transactions') }}
              </div>
              <div class="mt-1 grid grid-cols-2 gap-2">
                <div>
                  <div class="text-sm text-success-500">
                    {{ t('dbStats.commits') }}
                  </div>
                  <div>{{ dbStats?.transactions.commits }}</div>
                </div>
                <div>
                  <div class="text-sm text-error-500">
                    {{ t('dbStats.rollbacks') }}
                  </div>
                  <div>{{ dbStats?.transactions.rollbacks }}</div>
                </div>
              </div>
            </div>
          </div>
        </UCard>

        <UCard>
          <div class="space-y-4">
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ t('dbStats.tuples') }}
              </div>
              <div class="mt-1 grid grid-cols-3 gap-2">
                <div>
                  <div class="text-sm text-success-500">
                    {{ t('dbStats.inserted') }}
                  </div>
                  <div>{{ dbStats?.tuples.inserted }}</div>
                </div>
                <div>
                  <div class="text-sm text-warning-500">
                    {{ t('dbStats.updated') }}
                  </div>
                  <div>{{ dbStats?.tuples.updated }}</div>
                </div>
                <div>
                  <div class="text-sm text-error-500">
                    {{ t('dbStats.deleted') }}
                  </div>
                  <div>{{ dbStats?.tuples.deleted }}</div>
                </div>
              </div>
            </div>

            <USeparator />

            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ t('dbStats.cacheHitRatio') }}
              </div>
              <div class="text-xl">
                {{ dbStats?.cacheHitRatio }}%
              </div>
            </div>
          </div>
        </UCard>

        <UCard>
          <div class="space-y-4">
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ t('dbStats.tempFiles') }}
              </div>
              <div class="mt-1">
                <div class="text-xl">
                  {{ dbStats?.tempFiles.count }}
                </div>
                <div
                  v-if="dbStats?.tempFiles.bytes"
                  class="text-sm text-gray-500 dark:text-gray-400"
                >
                  {{ formatBytes(dbStats.tempFiles.bytes) }}
                </div>
              </div>
            </div>

            <USeparator />

            <div class="grid grid-cols-2 gap-4">
              <div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('dbStats.conflicts') }}
                </div>
                <div class="text-xl text-warning-500">
                  {{ dbStats?.conflicts }}
                </div>
              </div>
              <div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('dbStats.deadlocks') }}
                </div>
                <div class="text-xl text-error-500">
                  {{ dbStats?.deadlocks }}
                </div>
              </div>
            </div>
          </div>
        </UCard>
      </div>

      <div
        v-if="!dbStats"
        class="text-center"
      >
        <UIcon
          name="i-lucide-loader-2"
          class="animate-spin"
        />
      </div>
    </UCard>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/admin/maintenance/migration/i18n.json
================================================
{
  "en": {
    "migration": {
      "title": "Data Migration",
      "description": "Manage various data migration operations for system maintenance and data integrity.",
      "operations": "Available Operations",
      "paymentCustomers": {
        "title": "Payment Customers Management",
        "description": "Ensure all users have corresponding payment provider customer records. This operation will create missing Stripe and Polar customer records for existing users.",
        "execute": "Execute Ensure Payment Customers",
        "summary": "Execution Summary",
        "totalUsers": "Total Users",
        "stripeSuccess": "Stripe Success",
        "stripeError": "Stripe Errors",
        "polarSuccess": "Polar Success",
        "polarError": "Polar Errors",
        "stripeResults": "Stripe Results",
        "polarResults": "Polar Results",
        "status": {
          "success": "Success",
          "error": "Error"
        }
      },
      "common": {
        "execute": "Execute",
        "executing": "Executing...",
        "completed": "Completed",
        "failed": "Failed",
        "noResults": "No results to display",
        "backToOperations": "Back to Operations"
      }
    }
  },
  "zh-CN": {
    "migration": {
      "title": "æ•°æ®è¿ç§»",
      "description": "ç®¡ç†å„ç§æ•°æ®è¿ç§»æ“ä½œï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤å’Œæ•°æ®å®Œæ•´æ€§ã€‚",
      "operations": "å¯ç”¨æ“ä½œ",
      "paymentCustomers": {
        "title": "æ”¯ä»˜å®¢æˆ·ç®¡ç†",
        "description": "ç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰å¯¹åº”çš„æ”¯ä»˜æä¾›å•†å®¢æˆ·è®°å½•ã€‚æ­¤æ“ä½œå°†ä¸ºç°æœ‰ç”¨æˆ·åˆ›å»ºç¼ºå¤±çš„ Stripe å’Œ Polar å®¢æˆ·è®°å½•ã€‚",
        "execute": "æ‰§è¡Œç¡®ä¿æ”¯ä»˜å®¢æˆ·",
        "summary": "æ‰§è¡Œæ‘˜è¦",
        "totalUsers": "æ€»ç”¨æˆ·æ•°",
        "stripeSuccess": "Stripe æˆåŠŸ",
        "stripeError": "Stripe é”™è¯¯",
        "polarSuccess": "Polar æˆåŠŸ",
        "polarError": "Polar é”™è¯¯",
        "stripeResults": "Stripe ç»“æœ",
        "polarResults": "Polar ç»“æœ",
        "status": {
          "success": "æˆåŠŸ",
          "error": "é”™è¯¯"
        }
      },
      "common": {
        "execute": "æ‰§è¡Œ",
        "executing": "æ‰§è¡Œä¸­...",
        "completed": "å·²å®Œæˆ",
        "failed": "å¤±è´¥",
        "noResults": "æ— ç»“æœæ˜¾ç¤º",
        "backToOperations": "è¿”å›æ“ä½œåˆ—è¡¨"
      }
    }
  },
  "ja": {
    "migration": {
      "title": "ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ",
      "description": "ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã¨ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ãŸã‚ã®å„ç¨®ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ“ä½œã‚’ç®¡ç†ã—ã¾ã™ã€‚",
      "operations": "åˆ©ç”¨å¯èƒ½ãªæ“ä½œ",
      "paymentCustomers": {
        "title": "æ”¯æ‰•ã„é¡§å®¢ç®¡ç†",
        "description": "ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¯¾å¿œã™ã‚‹æ”¯æ‰•ã„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é¡§å®¢è¨˜éŒ²ã‚’æŒã¤ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ã“ã®æ“ä½œã«ã‚ˆã‚Šã€æ—¢å­˜ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¸è¶³ã—ã¦ã„ã‚‹Stripeã¨Polarã®é¡§å®¢è¨˜éŒ²ãŒä½œæˆã•ã‚Œã¾ã™ã€‚",
        "execute": "æ”¯æ‰•ã„é¡§å®¢ç¢ºä¿ã‚’å®Ÿè¡Œ",
        "summary": "å®Ÿè¡Œæ¦‚è¦",
        "totalUsers": "ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°",
        "stripeSuccess": "Stripe æˆåŠŸ",
        "stripeError": "Stripe ã‚¨ãƒ©ãƒ¼",
        "polarSuccess": "Polar æˆåŠŸ",
        "polarError": "Polar ã‚¨ãƒ©ãƒ¼",
        "stripeResults": "Stripe çµæœ",
        "polarResults": "Polar çµæœ",
        "status": {
          "success": "æˆåŠŸ",
          "error": "ã‚¨ãƒ©ãƒ¼"
        }
      },
      "common": {
        "execute": "å®Ÿè¡Œ",
        "executing": "å®Ÿè¡Œä¸­...",
        "completed": "å®Œäº†",
        "failed": "å¤±æ•—",
        "noResults": "è¡¨ç¤ºã™ã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“",
        "backToOperations": "æ“ä½œä¸€è¦§ã«æˆ»ã‚‹"
      }
    }
  },
  "fr": {
    "migration": {
      "title": "Migration de DonnÃ©es",
      "description": "GÃ©rer diverses opÃ©rations de migration de donnÃ©es pour la maintenance du systÃ¨me et l'intÃ©gritÃ© des donnÃ©es.",
      "operations": "OpÃ©rations Disponibles",
      "paymentCustomers": {
        "title": "Gestion des Clients de Paiement",
        "description": "Assurez-vous que tous les utilisateurs ont des enregistrements de clients correspondants chez les fournisseurs de paiement. Cette opÃ©ration crÃ©era les enregistrements clients Stripe et Polar manquants pour les utilisateurs existants.",
        "execute": "ExÃ©cuter l'Assurance des Clients de Paiement",
        "summary": "RÃ©sumÃ© d'ExÃ©cution",
        "totalUsers": "Total des Utilisateurs",
        "stripeSuccess": "Stripe SuccÃ¨s",
        "stripeError": "Erreurs Stripe",
        "polarSuccess": "Polar SuccÃ¨s",
        "polarError": "Erreurs Polar",
        "stripeResults": "RÃ©sultats Stripe",
        "polarResults": "RÃ©sultats Polar",
        "status": {
          "success": "SuccÃ¨s",
          "error": "Erreur"
        }
      },
      "common": {
        "execute": "ExÃ©cuter",
        "executing": "En cours d'exÃ©cution...",
        "completed": "TerminÃ©",
        "failed": "Ã‰chouÃ©",
        "noResults": "Aucun rÃ©sultat Ã  afficher",
        "backToOperations": "Retour aux OpÃ©rations"
      }
    }
  }
}



================================================
FILE: app/pages/admin/maintenance/migration/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
interface MigrationOperation {
  id: string
  title: string
  description: string
  icon: string
  color: 'primary' | 'secondary' | 'success' | 'warning' | 'error'
  endpoint: string
}

const { t } = useI18n()
const currentOperation = ref<string | null>(null)
const isLoading = ref(false)
const result = ref<any>(null)
const error = ref<string | null>(null)

const operations: MigrationOperation[] = [
  {
    id: 'payment-customers',
    title: t('migration.paymentCustomers.title'),
    description: t('migration.paymentCustomers.description'),
    icon: 'lucide:credit-card',
    color: 'primary',
    endpoint: '/api/admin/maintenance/ensure-payment-customers'
  }
  // Future operations can be added here
  // {
  //   id: 'user-profiles',
  //   title: 'User Profile Migration',
  //   description: 'Migrate user profile data to new schema',
  //   icon: 'lucide:user',
  //   color: 'secondary',
  //   endpoint: '/api/admin/maintenance/migrate-user-profiles'
  // }
]

const selectOperation = (operationId: string) => {
  currentOperation.value = operationId
  result.value = null
  error.value = null
}

const backToOperations = () => {
  currentOperation.value = null
  result.value = null
  error.value = null
  isLoading.value = false
}

const executeOperation = async () => {
  const operation = operations.find(op => op.id === currentOperation.value)
  if (!operation)
    return

  isLoading.value = true
  error.value = null
  result.value = null

  try {
    const response = await $fetch(operation.endpoint)
    result.value = response
  } catch (err) {
    error.value = err instanceof Error ? err.message : 'Unknown error'
  } finally {
    isLoading.value = false
  }
}

const getStatusColor = (status: string): 'success' | 'error' => {
  return status === 'success' ? 'success' : 'error'
}

const getCurrentOperation = () => {
  return operations.find(op => op.id === currentOperation.value)
}
</script>

<template>
  <NuxtLayout name="admin">
    <div class="space-y-6">
      <!-- Main Header -->
      <UCard>
        <template #header>
          <div class="flex items-center gap-2">
            <Icon name="lucide:database" />
            <span>{{ t('migration.title') }}</span>
          </div>
        </template>

        <p class="text-gray-600 dark:text-gray-400">
          {{ t('migration.description') }}
        </p>
      </UCard>

      <!-- Operations List View -->
      <div v-if="!currentOperation">
        <UCard>
          <template #header>
            <div class="flex items-center gap-2">
              <Icon name="lucide:list" />
              <span>{{ t('migration.operations') }}</span>
            </div>
          </template>

          <div class="grid gap-4 sm:grid-cols-1 lg:grid-cols-2">
            <UCard
              v-for="operation in operations"
              :key="operation.id"
              class="cursor-pointer hover:shadow-md transition-shadow"
              @click="selectOperation(operation.id)"
            >
              <div class="flex items-start gap-4">
                <div class="flex-shrink-0">
                  <div :class="`p-3 rounded-lg bg-${operation.color}-100 dark:bg-${operation.color}-900/20`">
                    <Icon
                      :name="operation.icon"
                      :class="`w-6 h-6 text-${operation.color}-600 dark:text-${operation.color}-400`"
                    />
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                    {{ operation.title }}
                  </h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                    {{ operation.description }}
                  </p>
                  <div class="mt-3">
                    <UButton
                      :color="operation.color"
                      size="sm"
                    >
                      {{ t('migration.common.execute') }}
                      <Icon name="lucide:arrow-right" />
                    </UButton>
                  </div>
                </div>
              </div>
            </UCard>
          </div>
        </UCard>
      </div>

      <!-- Operation Execution View -->
      <div v-else>
        <!-- Operation Header -->
        <UCard>
          <template #header>
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <Icon :name="getCurrentOperation()?.icon || 'lucide:settings'" />
                <span>{{ getCurrentOperation()?.title }}</span>
              </div>
              <UButton
                variant="ghost"
                size="sm"
                @click="backToOperations"
              >
                <Icon name="lucide:arrow-left" />
                {{ t('migration.common.backToOperations') }}
              </UButton>
            </div>
          </template>

          <div class="space-y-4">
            <p class="text-gray-600 dark:text-gray-400">
              {{ getCurrentOperation()?.description }}
            </p>

            <UButton
              :loading="isLoading"
              :disabled="isLoading"
              :color="getCurrentOperation()?.color || 'primary'"
              @click="executeOperation"
            >
              <Icon name="lucide:play" />
              {{ isLoading ? t('migration.common.executing') : t('migration.common.execute') }}
            </UButton>
          </div>
        </UCard>

        <!-- Error Display -->
        <UCard
          v-if="error"
          class="border-red-200 dark:border-red-800"
        >
          <template #header>
            <div class="flex items-center gap-2 text-red-600 dark:text-red-400">
              <Icon name="lucide:alert-circle" />
              <span>{{ t('global.page.error') }}</span>
            </div>
          </template>

          <p class="text-red-600 dark:text-red-400">
            {{ error }}
          </p>
        </UCard>

        <!-- Payment Customers Results -->
        <div
          v-if="result && currentOperation === 'payment-customers'"
          class="space-y-6"
        >
          <!-- Summary Card -->
          <UCard>
            <template #header>
              <div class="flex items-center gap-2">
                <Icon name="lucide:bar-chart" />
                <span>{{ t('migration.paymentCustomers.summary') }}</span>
              </div>
            </template>

            <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-5">
              <div class="text-center">
                <div class="text-2xl font-bold">
                  {{ result.summary.totalUsers }}
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('migration.paymentCustomers.totalUsers') }}
                </div>
              </div>

              <div class="text-center">
                <div class="text-2xl font-bold text-green-600">
                  {{ result.summary.stripeSuccessCount }}
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('migration.paymentCustomers.stripeSuccess') }}
                </div>
              </div>

              <div class="text-center">
                <div class="text-2xl font-bold text-red-600">
                  {{ result.summary.stripeErrorCount }}
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('migration.paymentCustomers.stripeError') }}
                </div>
              </div>

              <div class="text-center">
                <div class="text-2xl font-bold text-green-600">
                  {{ result.summary.polarSuccessCount }}
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('migration.paymentCustomers.polarSuccess') }}
                </div>
              </div>

              <div class="text-center">
                <div class="text-2xl font-bold text-red-600">
                  {{ result.summary.polarErrorCount }}
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ t('migration.paymentCustomers.polarError') }}
                </div>
              </div>
            </div>
          </UCard>

          <!-- Detailed Results -->
          <div class="grid gap-6 lg:grid-cols-2">
            <!-- Stripe Results -->
            <UCard v-if="result.data.stripeResults.length > 0">
              <template #header>
                <div class="flex items-center gap-2">
                  <Icon name="simple-icons:stripe" />
                  <span>{{ t('migration.paymentCustomers.stripeResults') }}</span>
                </div>
              </template>

              <div class="space-y-2 max-h-96 overflow-y-auto">
                <div
                  v-for="item in result.data.stripeResults"
                  :key="item.userId"
                  class="flex items-center justify-between p-2 rounded border"
                >
                  <span class="text-sm font-mono">{{ item.userId }}</span>
                  <div class="flex items-center gap-2">
                    <UBadge
                      :color="getStatusColor(item.status)"
                      :label="t(`migration.paymentCustomers.status.${item.status}`)"
                    />
                    <span
                      v-if="item.message"
                      class="text-xs text-gray-500 dark:text-gray-400 max-w-32 truncate"
                      :title="item.message"
                    >
                      {{ item.message }}
                    </span>
                  </div>
                </div>
              </div>
            </UCard>

            <!-- Polar Results -->
            <UCard v-if="result.data.polarResults.length > 0">
              <template #header>
                <div class="flex items-center gap-2">
                  <Icon name="lucide:zap" />
                  <span>{{ t('migration.paymentCustomers.polarResults') }}</span>
                </div>
              </template>

              <div class="space-y-2 max-h-96 overflow-y-auto">
                <div
                  v-for="item in result.data.polarResults"
                  :key="item.userId"
                  class="flex items-center justify-between p-2 rounded border"
                >
                  <span class="text-sm font-mono">{{ item.userId }}</span>
                  <div class="flex items-center gap-2">
                    <UBadge
                      :color="getStatusColor(item.status)"
                      :label="t(`migration.paymentCustomers.status.${item.status}`)"
                    />
                    <span
                      v-if="item.message"
                      class="text-xs text-gray-500 dark:text-gray-400 max-w-32 truncate"
                      :title="item.message"
                    >
                      {{ item.message }}
                    </span>
                  </div>
                </div>
              </div>
            </UCard>
          </div>
        </div>
      </div>
    </div>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/admin/subscription/i18n.json
================================================
{
  "en": {
    "subscription": {
      "title": "Subscription Management",
      "plan": "Plan",
      "stripeCustomerId": "Customer ID",
      "status": {
        "incomplete": "Incomplete",
        "incomplete_expired": "Incomplete Expired",
        "trialing": "Trial",
        "active": "Active",
        "paused": "Paused",
        "canceled": "Canceled",
        "pastDue": "Past Due",
        "unpaid": "Unpaid"
      },
      "period": "Billing Period",
      "seats": "Seats"
    }
  },
  "zh-CN": {
    "subscription": {
      "title": "è®¢é˜…ç®¡ç†",
      "plan": "å¥—é¤",
      "stripeCustomerId": "å®¢æˆ· ID",
      "status": {
        "incomplete": "æœªå®Œæˆ",
        "incomplete_expired": "æœªå®Œæˆå·²è¿‡æœŸ",
        "trialing": "è¯•ç”¨ä¸­",
        "active": "æœ‰æ•ˆ",
        "paused": "å·²æš‚åœ",
        "canceled": "å·²å–æ¶ˆ",
        "pastDue": "å·²é€¾æœŸ",
        "unpaid": "æœªæ”¯ä»˜"
      },
      "period": "è®¡è´¹å‘¨æœŸ",
      "seats": "å¸­ä½æ•°"
    }
  },
  "ja": {
    "subscription": {
      "title": "ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†",
      "plan": "ãƒ—ãƒ©ãƒ³",
      "stripeCustomerId": "é¡§å®¢ ID",
      "status": {
        "incomplete": "ä¸å®Œå…¨",
        "incomplete_expired": "ä¸å®Œå…¨æœŸé™åˆ‡ã‚Œ",
        "trialing": "è©¦ç”¨ä¸­",
        "active": "æœ‰åŠ¹",
        "paused": "ä¸€æ™‚åœæ­¢",
        "canceled": "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
        "pastDue": "æœŸé™åˆ‡ã‚Œ",
        "unpaid": "æœªæ‰•ã„"
      },
      "period": "èª²é‡‘æœŸé–“",
      "seats": "ã‚·ãƒ¼ãƒˆæ•°"
    }
  },
  "fr": {
    "subscription": {
      "title": "Gestion des abonnements",
      "plan": "Plan",
      "stripeCustomerId": "ID Client",
      "status": {
        "incomplete": "Incomplet",
        "incomplete_expired": "Incomplet expirÃ©",
        "trialing": "Essai",
        "active": "Actif",
        "paused": "En pause",
        "canceled": "AnnulÃ©",
        "pastDue": "En retard",
        "unpaid": "Non payÃ©"
      },
      "period": "PÃ©riode de facturation",
      "seats": "SiÃ¨ges"
    }
  }
}



================================================
FILE: app/pages/admin/subscription/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
import type { Subscription } from '@better-auth/stripe'

const { t } = useI18n()

const filters: AdminTableFilter[] = reactive([
  {
    name: t('global.page.status'),
    field: 'status',
    type: 'tabs',
    items: [
      { label: t('global.page.all'), id: '' },
      { label: t('subscription.status.active'), id: 'active' },
      { label: t('subscription.status.trialing'), id: 'trialing' },
      { label: t('subscription.status.incomplete'), id: 'incomplete' },
      { label: t('subscription.status.incomplete_expired'), id: 'incomplete_expired' },
      { label: t('subscription.status.paused'), id: 'paused' },
      { label: t('subscription.status.canceled'), id: 'canceled' },
      { label: t('subscription.status.pastDue'), id: 'past_due' },
      { label: t('subscription.status.unpaid'), id: 'unpaid' }
    ],
    value: ''
  }
])

const columns: AdminTableColumn<Subscription>[] = [
  {
    accessorKey: 'id',
    header: 'ID'
  },
  {
    accessorKey: 'stripeCustomerId',
    header: t('subscription.stripeCustomerId')
  },
  {
    accessorKey: 'plan',
    header: t('subscription.plan')
  },
  {
    accessorKey: 'status',
    header: t('global.page.status')
  },
  {
    accessorKey: 'period',
    header: t('subscription.period')
  },
  {
    accessorKey: 'seats',
    header: t('subscription.seats')
  }
  // {
  //   accessorKey: 'createdAt',
  //   header: t('global.page.createdAt'),
  //   cell: dateColumn
  // },
]

const getStatusColor = (status: string): 'primary' | 'success' | 'info' | 'warning' | 'error' | 'neutral' => {
  switch (status) {
    case 'active':
      return 'success'
    case 'trialing':
      return 'info'
    case 'paused':
    case 'incomplete':
    case 'incomplete_expired':
      return 'warning'
    case 'canceled':
    case 'past_due':
    case 'unpaid':
      return 'error'
    default:
      return 'neutral'
  }
}

const { data: statusCount } = await useFetch<ColumnCount[]>('/api/admin/count/subscription/status')
statusCount.value?.forEach((item) => {
  const status = (filters[0] as FilterTabs).items?.find(status => status.id === item.column)
  if (status) {
    status.count = item.count
  }
})

const fetchData: FetchDataFn<Subscription> = async ({ page, limit, sort, filter }) => {
  const result = await $fetch<PageData<Subscription>>('/api/admin/list/subscription', {
    query: {
      page,
      limit,
      sort: JSON.stringify(sort.map((item) => {
        return [item.field, item.order]
      })),
      filter: JSON.stringify(filter)
    }
  })
  return {
    data: result.data,
    total: result.total
  }
}
</script>

<template>
  <NuxtLayout name="admin">
    <AdminTable
      ref="table"
      :columns="columns"
      :filters="filters"
      :fetch-data="fetchData"
    >
      <template #status-cell="{ row: { original } }">
        <UBadge
          :color="getStatusColor(original.status)"
          :label="t(`subscription.status.${original.status.replace('_', '')}`)"
        />
      </template>
      <template #period-cell="{ row: { original } }">
        <span v-if="original.periodStart && original.periodEnd">
          {{ formatToDay(original.periodStart) }} ~ {{ formatToDay(original.periodEnd) }}
        </span>
      </template>
    </AdminTable>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/admin/user/i18n.json
================================================
{
  "en": {
    "user": {
      "title": "User Management",
      "columns": {
        "avatar": "Avatar",
        "email": "Email",
        "role": "Role"
      },
      "status": {
        "banned": "Banned",
        "verified": "Verified",
        "unverified": "Unverified"
      },
      "actions": {
        "createUser": "Create User",
        "ban": "Ban",
        "unban": "Unban"
      },
      "form": {
        "email": "Email",
        "password": "Password",
        "role": "Role"
      },
      "validation": {
        "nameMin": "Name must be at least {n} characters",
        "emailInvalid": "Invalid email address",
        "passwordMin": "Password must be at least {n} characters"
      },
      "roles": {
        "user": "User",
        "admin": "Administrator"
      },
      "modals": {
        "createUser": "Create New User",
        "ban": {
          "title": "Ban User",
          "reason": "Ban Reason",
          "reasonPlaceholder": "Enter reason for banning user",
          "period": "Ban Period",
          "periods": {
            "permanent": "Permanent",
            "1_day": "1 Day",
            "7_days": "7 Days",
            "30_days": "30 Days"
          },
          "submit": "Ban User"
        }
      }
    }
  },
  "zh-CN": {
    "user": {
      "title": "ç”¨æˆ·ç®¡ç†",
      "columns": {
        "avatar": "å¤´åƒ",
        "email": "é‚®ç®±",
        "role": "è§’è‰²"
      },
      "status": {
        "banned": "å·²å°ç¦",
        "verified": "å·²éªŒè¯",
        "unverified": "æœªéªŒè¯"
      },
      "actions": {
        "createUser": "åˆ›å»ºç”¨æˆ·",
        "ban": "å°ç¦",
        "unban": "è§£å°"
      },
      "form": {
        "email": "é‚®ç®±",
        "password": "å¯†ç ",
        "role": "è§’è‰²"
      },
      "validation": {
        "nameMin": "åç§°è‡³å°‘éœ€è¦ {n} ä¸ªå­—ç¬¦",
        "emailInvalid": "æ— æ•ˆçš„é‚®ç®±åœ°å€",
        "passwordMin": "å¯†ç è‡³å°‘éœ€è¦ {n} ä¸ªå­—ç¬¦"
      },
      "roles": {
        "user": "æ™®é€šç”¨æˆ·",
        "admin": "ç®¡ç†å‘˜"
      },
      "modals": {
        "createUser": "åˆ›å»ºæ–°ç”¨æˆ·",
        "ban": {
          "title": "å°ç¦ç”¨æˆ·",
          "reason": "å°ç¦åŸå› ",
          "reasonPlaceholder": "è¯·è¾“å…¥å°ç¦ç”¨æˆ·çš„åŸå› ",
          "period": "å°ç¦æœŸé™",
          "periods": {
            "permanent": "æ°¸ä¹…",
            "1_day": "1å¤©",
            "7_days": "7å¤©",
            "30_days": "30å¤©"
          },
          "submit": "å°ç¦ç”¨æˆ·"
        }
      }
    }
  },
  "ja": {
    "user": {
      "title": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†",
      "columns": {
        "avatar": "ã‚¢ãƒã‚¿ãƒ¼",
        "email": "ãƒ¡ãƒ¼ãƒ«",
        "role": "å½¹å‰²"
      },
      "status": {
        "banned": "ç¦æ­¢",
        "verified": "ç¢ºèªæ¸ˆã¿",
        "unverified": "æœªç¢ºèª"
      },
      "actions": {
        "createUser": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ",
        "ban": "ç¦æ­¢",
        "unban": "è§£é™¤"
      },
      "form": {
        "email": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
        "password": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
        "role": "å½¹å‰²"
      },
      "validation": {
        "nameMin": "åå‰ã¯å°‘ãªãã¨ã‚‚ {n} æ–‡å­—å¿…è¦ã§ã™",
        "emailInvalid": "ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
        "passwordMin": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å°‘ãªãã¨ã‚‚ {n} æ–‡å­—å¿…è¦ã§ã™"
      },
      "roles": {
        "user": "ãƒ¦ãƒ¼ã‚¶ãƒ¼",
        "admin": "ç®¡ç†è€…"
      },
      "modals": {
        "createUser": "æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ",
        "ban": {
          "title": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒãƒ³",
          "reason": "ãƒãƒ³ã®ç†ç”±",
          "reasonPlaceholder": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒãƒ³ã™ã‚‹ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          "period": "ãƒãƒ³æœŸé–“",
          "periods": {
            "permanent": "æ°¸ä¹…",
            "1_day": "1æ—¥",
            "7_days": "7æ—¥é–“",
            "30_days": "30æ—¥é–“"
          },
          "submit": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒãƒ³"
        }
      }
    }
  },
  "fr": {
    "user": {
      "title": "Gestion des utilisateurs",
      "columns": {
        "avatar": "Avatar",
        "email": "Email",
        "role": "RÃ´le"
      },
      "status": {
        "banned": "Banni",
        "verified": "VÃ©rifiÃ©",
        "unverified": "Non vÃ©rifiÃ©"
      },
      "actions": {
        "createUser": "CrÃ©er un utilisateur",
        "ban": "Bannir",
        "unban": "DÃ©bannir"
      },
      "form": {
        "email": "Email",
        "password": "Mot de passe",
        "role": "RÃ´le"
      },
      "validation": {
        "nameMin": "Le nom doit contenir au moins {n} caractÃ¨res",
        "emailInvalid": "Adresse e-mail invalide",
        "passwordMin": "Le mot de passe doit contenir au moins {n} caractÃ¨res"
      },
      "roles": {
        "user": "Utilisateur",
        "admin": "Administrateur"
      },
      "modals": {
        "createUser": "CrÃ©er un nouvel utilisateur",
        "ban": {
          "title": "Bannir l'utilisateur",
          "reason": "Raison du bannissement",
          "reasonPlaceholder": "Entrez la raison du bannissement",
          "period": "PÃ©riode de bannissement",
          "periods": {
            "permanent": "Permanent",
            "1_day": "1 jour",
            "7_days": "7 jours",
            "30_days": "30 jours"
          },
          "submit": "Bannir l'utilisateur"
        }
      }
    }
  }
}



================================================
FILE: app/pages/admin/user/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
import BanUserModal from './components/BanUserModal.vue'
import CreateUserModal from './components/CreateUserModal.vue'

const { t } = useI18n()
const { client } = useAuth()
const isUserModalOpen = ref(false)
const isBanModalOpen = ref(false)
const selectedUserId = ref('')

const filters: AdminTableFilter[] = reactive([
  {
    name: t('global.page.name'),
    field: 'name',
    type: 'input',
    value: undefined
  },
  {
    name: t('user.columns.role'),
    field: 'role',
    type: 'checkbox',
    items: [
      { label: t('user.roles.user'), id: 'user', count: 0 },
      { label: t('user.roles.admin'), id: 'admin', count: 0 }
    ],
    value: []
  },
  {
    name: t('global.page.createdAt'),
    field: 'createdAt',
    type: 'daterange',
    value: { start: undefined, end: undefined }
  }
])

const { refresh } = useAdminTable()

const getActionItems = (row: Row<User>) => {
  const user = row.original
  return [
    {
      type: 'label',
      label: t('global.page.actions')
    },
    {
      type: 'separator'
    },
    {
      label: user.banned ? t('user.actions.unban') : t('user.actions.ban'),
      icon: 'i-lucide-ban',
      color: user.banned ? 'success' : 'error',
      async onSelect() {
        if (user.banned) {
          const result = await client.admin.unbanUser({
            userId: user.id
          })
          if (result.data?.user) {
            refresh()
          }
        } else {
          selectedUserId.value = user.id
          isBanModalOpen.value = true
        }
      }
    },
    {
      label: t('global.page.delete'),
      icon: 'i-lucide-trash',
      color: 'error',
      async onSelect() {
        const removeResult = await client.admin.removeUser({
          userId: user.id
        })
        if (removeResult.data?.success) {
          refresh()
        } else {
          console.error(removeResult.error)
        }
      }
    }
  ]
}

const getRoleDropdownItems = (original: User) => {
  const roles = ['user', 'admin'] as const
  return roles.map((role) => {
    return {
      label: t(`user.roles.${role}`),
      type: 'checkbox' as const,
      checked: original.role === role,
      onUpdateChecked: async () => {
        const result = await client.admin.setRole({
          userId: original.id,
          role
        })
        if (result.data?.user) {
          refresh()
        } else {
          console.error(result.error)
        }
      }
    }
  })
}

const columns: AdminTableColumn<User>[] = [
  {
    accessorKey: 'id',
    header: 'ID'
  },
  {
    accessorKey: 'image',
    header: t('user.columns.avatar'),
    cell: avatarColumn
  },
  {
    accessorKey: 'name',
    header: t('global.page.name')
  },
  {
    accessorKey: 'email',
    header: t('user.columns.email')
  },
  {
    accessorKey: 'role',
    header: t('user.columns.role')
  },
  {
    accessorKey: 'status',
    header: t('global.page.status')
  },
  {
    accessorKey: 'createdAt',
    header: t('global.page.createdAt'),
    cell: dateColumn
  },
  {
    id: 'actions',
    cell: ({ row }) => actionColumn(row, getActionItems)
  }
]

const fetchRoleCount = async (filter: FilterCondition[]) => {
  const statusCount = await $fetch<ColumnCount[]>('/api/admin/count/user/role', {
    query: {
      filter: JSON.stringify(filter)
    }
  })
  const roleFilter = filters[1] as FilterCheckbox
  roleFilter.items.forEach((item) => {
    const status = statusCount.find(status => status.column === item.id)
    item.count = status ? status.count : 0
  })
}

const fetchData: FetchDataFn<User> = async ({ page, limit, sort, filter }) => {
  fetchRoleCount(filter)
  const result = await $fetch<PageData<User>>('/api/admin/list/user', {
    query: {
      page,
      limit,
      sort: JSON.stringify(sort.map((item) => {
        return [item.field, item.order]
      })),
      filter: JSON.stringify(filter)
    }
  })
  return {
    data: result.data,
    total: result.total
  }
}
</script>

<template>
  <NuxtLayout name="admin">
    <template #navRight>
      <UButton
        color="neutral"
        icon="i-lucide-plus"
        variant="outline"
        @click="isUserModalOpen = true"
      >
        {{ t('user.actions.createUser') }}
      </UButton>
    </template>
    <AdminTable
      ref="table"
      :columns="columns"
      :filters="filters"
      :fetch-data="fetchData"
    >
      <template #role-cell="{ row: { original } }">
        <UDropdownMenu
          :items="getRoleDropdownItems(original)"
          arrow
        >
          <UButton
            :color="original.role === 'admin' ? 'primary' : 'neutral'"
            variant="outline"
            size="xs"
            icon="i-lucide-chevron-down"
            trailing
          >
            {{ t(`user.roles.${original.role}`) }}
          </UButton>
        </UDropdownMenu>
      </template>
      <template #status-cell="{ row: { original } }">
        <UBadge
          :color="original.banned
            ? 'error'
            : (original.emailVerified ? 'success' : 'warning')"
          :label="original.banned
            ? t('user.status.banned')
            : (original.emailVerified
              ? t('user.status.verified')
              : t('user.status.unverified'))"
        />
      </template>
    </AdminTable>
    <CreateUserModal
      v-model:open="isUserModalOpen"
      :t="t"
      @created="refresh"
    />
    <BanUserModal
      v-model:open="isBanModalOpen"
      :user-id="selectedUserId"
      :t="t"
      @banned="refresh"
    />
  </NuxtLayout>
</template>



================================================
FILE: app/pages/admin/user/components/BanUserModal.vue
================================================
<script setup lang="ts">
const { userId, t } = defineProps<{
  userId: string
  t: TranFunction
}>()

const emit = defineEmits<{
  banned: []
  cancel: []
}>()

const open = defineModel('open', { default: false })

const state = reactive({
  banReason: '',
  banExpiresIn: -1 as number | undefined
})

const schema = z.object({
  banReason: z.string().optional(),
  banExpiresIn: z.number().optional()
})
type Schema = zodOutput<typeof schema>

const { client } = useAuth()

const banPeriods = [
  { value: -1, label: 'permanent' },
  { value: 60 * 60 * 24, label: '1_day' },
  { value: 60 * 60 * 24 * 7, label: '7_days' },
  { value: 60 * 60 * 24 * 30, label: '30_days' }
].map((item) => {
  return {
    ...item,
    label: t(`user.modals.ban.periods.${item.label}`)
  }
})

async function onSubmit({ data }: FormSubmitEvent<Schema>) {
  const result = await client.admin.banUser({
    userId,
    banReason: data.banReason,
    banExpiresIn: data.banExpiresIn == -1 ? undefined : data.banExpiresIn
  })
  if (result.data?.user) {
    open.value = false
    emit('banned')
  }
}

const onCancel = () => {
  open.value = false
  emit('cancel')
}
</script>

<template>
  <UModal
    v-model:open="open"
    :close="true"
    :title="t('user.modals.ban.title')"
  >
    <template #body>
      <UForm
        :schema="schema"
        :state="state"
        class="space-y-4"
        @submit="onSubmit"
      >
        <UFormField
          :label="t('user.modals.ban.period')"
          name="banExpiresIn"
        >
          <USelect
            v-model="state.banExpiresIn"
            :items="banPeriods"
            class="w-full"
          />
        </UFormField>
        <UFormField
          :label="t('user.modals.ban.reason')"
          name="banReason"
        >
          <UTextarea
            v-model="state.banReason"
            :placeholder="t('user.modals.ban.reasonPlaceholder')"
            class="w-full"
          />
        </UFormField>

        <div class="flex justify-end gap-2">
          <UButton
            color="neutral"
            variant="outline"
            @click="onCancel"
          >
            {{ t('global.page.cancel') }}
          </UButton>
          <UButton
            type="submit"
            color="error"
          >
            {{ t('user.modals.ban.submit') }}
          </UButton>
        </div>
      </UForm>
    </template>
  </UModal>
</template>



================================================
FILE: app/pages/admin/user/components/CreateUserModal.vue
================================================
<script setup lang="ts">
const { t } = defineProps<{
  t: TranFunction
}>()

const emit = defineEmits<{
  created: []
  cancel: []
}>()

const open = defineModel('open', { default: false })
const { client } = useAuth()

const schema = z.object({
  name: z.string().min(4, t('user.validation.nameMin', { n: 4 })),
  email: z.email(t('user.validation.emailInvalid')),
  password: z.string().min(8, t('user.validation.passwordMin', { n: 8 })),
  role: z.enum(['user', 'admin'])
})
type Schema = zodOutput<typeof schema>

const state = reactive({
  name: '',
  email: '',
  password: '',
  role: 'user' as const
})

async function onSubmit({ data }: FormSubmitEvent<Schema>) {
  const res = await client.admin.createUser({
    name: data.name,
    email: data.email,
    password: data.password,
    role: data.role
  })
  if (res) {
    open.value = false
    emit('created')
  }
}

const onCancel = () => {
  open.value = false
  emit('cancel')
}
</script>

<template>
  <UModal
    v-model:open="open"
    :close="true"
    :title="t('user.modals.createUser')"
  >
    <template #body>
      <UForm
        :schema="schema"
        :state="state"
        class="space-y-4"
        @submit="onSubmit"
      >
        <UFormField
          :label="t('global.page.name')"
          name="name"
        >
          <UInput
            v-model="state.name"
            class="w-full"
          />
        </UFormField>

        <UFormField
          :label="t('user.form.email')"
          name="email"
        >
          <UInput
            v-model="state.email"
            class="w-full"
          />
        </UFormField>

        <UFormField
          :label="t('user.form.password')"
          name="password"
        >
          <UInput
            v-model="state.password"
            type="password"
            class="w-full"
          />
        </UFormField>

        <UFormField
          :label="t('user.form.role')"
          name="role"
        >
          <USelect
            v-model="state.role"
            class="w-full"
            :items="[
              { label: t('user.roles.user'), value: 'user' },
              { label: t('user.roles.admin'), value: 'admin' }
            ]"
          />
        </UFormField>

        <div class="flex justify-end w-full gap-4">
          <UButton
            color="neutral"
            variant="soft"
            @click="onCancel"
          >
            {{ t('global.page.cancel') }}
          </UButton>
          <UButton
            type="submit"
            color="primary"
          >
            {{ t('global.page.create') }}
          </UButton>
        </div>
      </UForm>
    </template>
  </UModal>
</template>



================================================
FILE: app/pages/forgot-password/i18n.json
================================================
{
  "en": {
    "forgotPassword": {
      "title": "Reset Password",
      "description": "Enter your email address and we'll send you instructions to reset your password.",
      "email": "Email",
      "emailPlaceholder": "Enter your email address",
      "submit": "Send Instructions",
      "backToSignIn": "Back to Sign In",
      "success": "Reset instructions have been sent to your email",
      "errors": {
        "invalidEmail": "Invalid email address"
      }
    }
  },
  "zh-CN": {
    "forgotPassword": {
      "title": "é‡ç½®å¯†ç ",
      "description": "è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å‘é€é‡ç½®å¯†ç çš„è¯´æ˜ã€‚",
      "email": "é‚®ç®±",
      "emailPlaceholder": "è¯·è¾“å…¥é‚®ç®±åœ°å€",
      "submit": "å‘é€è¯´æ˜",
      "backToSignIn": "è¿”å›ç™»å½•",
      "success": "é‡ç½®è¯´æ˜å·²å‘é€è‡³æ‚¨çš„é‚®ç®±",
      "errors": {
        "invalidEmail": "æ— æ•ˆçš„é‚®ç®±åœ°å€"
      }
    }
  },
  "ja": {
    "forgotPassword": {
      "title": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒªã‚»ãƒƒãƒˆ",
      "description": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹æ‰‹é †ã‚’ãŠé€ã‚Šã—ã¾ã™ã€‚",
      "email": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
      "emailPlaceholder": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›",
      "submit": "æ‰‹é †ã‚’é€ä¿¡",
      "backToSignIn": "ãƒ­ã‚°ã‚¤ãƒ³ã«æˆ»ã‚‹",
      "success": "ãƒªã‚»ãƒƒãƒˆæ‰‹é †ã‚’ãƒ¡ãƒ¼ãƒ«ã«é€ä¿¡ã—ã¾ã—ãŸ",
      "errors": {
        "invalidEmail": "ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
      }
    }
  },
  "fr": {
    "forgotPassword": {
      "title": "RÃ©initialiser le mot de passe",
      "description": "Saisissez votre adresse e-mail et nous vous enverrons les instructions pour rÃ©initialiser votre mot de passe.",
      "email": "E-mail",
      "emailPlaceholder": "Saisissez votre adresse e-mail",
      "submit": "Envoyer les instructions",
      "backToSignIn": "Retour Ã  la connexion",
      "success": "Les instructions de rÃ©initialisation ont Ã©tÃ© envoyÃ©es Ã  votre e-mail",
      "errors": {
        "invalidEmail": "Adresse e-mail invalide"
      }
    }
  }
}



================================================
FILE: app/pages/forgot-password/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
definePageMeta({
  auth: {
    only: 'guest'
  }
})

const { t } = useI18n()
useHead({
  title: t('forgotPassword.title')
})

const auth = useAuth()
const toast = useToast()
const localePath = useLocalePath()

const schema = z.object({
  email: z.email(t('forgotPassword.errors.invalidEmail'))
})

type Schema = zodOutput<typeof schema>

const state = reactive<Partial<Schema>>({
  email: undefined
})

const loading = ref(false)

async function onSubmit(event: FormSubmitEvent<Schema>) {
  if (loading.value)
    return

  loading.value = true
  const { error } = await auth.forgetPassword({
    email: event.data.email,
    redirectTo: localePath('/reset-password')
  })

  if (error) {
    toast.add({
      title: error.message || error.statusText,
      color: 'error'
    })
  }
  else {
    toast.add({
      title: t('forgotPassword.success'),
      color: 'success'
    })
  }
  loading.value = false
}
</script>

<template>
  <UContainer class="flex items-center justify-center sm:p-4 sm:min-w-160">
    <UCard class="w-full max-w-md">
      <template #header>
        <div class="text-center p-4">
          <h1 class="text-xl font-semibold">
            {{ t('forgotPassword.title') }}
          </h1>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">
            {{ t('forgotPassword.description') }}
          </p>
        </div>
      </template>

      <div class="space-y-4">
        <UForm
          :schema="schema"
          :state="state"
          class="space-y-4"
          @submit="onSubmit"
        >
          <UFormField
            :label="t('forgotPassword.email')"
            name="email"
            required
          >
            <UInput
              v-model="state.email"
              type="email"
              class="w-full"
              :placeholder="t('forgotPassword.emailPlaceholder')"
            />
          </UFormField>

          <UButton
            type="submit"
            color="primary"
            block
            :loading="loading"
          >
            {{ t('forgotPassword.submit') }}
          </UButton>
        </UForm>

        <div class="text-center text-sm">
          <UButton
            variant="link"
            color="primary"
            :to="localePath('/signin')"
          >
            {{ t('forgotPassword.backToSignIn') }}
          </UButton>
        </div>
      </div>
    </UCard>
  </UContainer>
</template>



================================================
FILE: app/pages/pricing/i18n.json
================================================
{
  "en": {
    "pricing": {
      "title": "Simple, transparent pricing",
      "subtitle": "Choose the plan that suits your needs",
      "monthly": "Monthly",
      "yearly": "Yearly",
      "savePercent": "Save {percent}%",
      "popular": "Popular",
      "free": {
        "name": "Free",
        "description": "Perfect for getting started",
        "price": "Free",
        "period": "forever",
        "feature1": "Basic features",
        "feature2": "Community support"
      },
      "pro": {
        "name": "Pro",
        "description": "For growing businesses",
        "price": "${price}",
        "period": "per month",
        "yearPeriod": "per year",
        "feature1": "All features",
        "feature2": "Priority support"
      },
      "enterprise": {
        "name": "Enterprise",
        "description": "For large organizations",
        "price": "Custom",
        "period": "contact us",
        "feature1": "Everything in Pro",
        "feature2": "Dedicated support",
        "feature3": "Custom deployment"
      },
      "features": {
        "title": "Features included:"
      },
      "cta": {
        "free": "Get Started",
        "pro": "Start Pro Trial",
        "enterprise": "Contact Sales"
      }
    }
  },
  "zh-CN": {
    "pricing": {
      "title": "ç®€å•é€æ˜çš„å®šä»·",
      "subtitle": "é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„æ–¹æ¡ˆ",
      "monthly": "æŒ‰æœˆä»˜è´¹",
      "yearly": "æŒ‰å¹´ä»˜è´¹",
      "savePercent": "èŠ‚çœ {percent}%",
      "popular": "çƒ­é—¨",
      "free": {
        "name": "å…è´¹ç‰ˆ",
        "description": "å®Œç¾çš„å…¥é—¨é€‰æ‹©",
        "price": "å…è´¹",
        "period": "æ°¸ä¹…",
        "feature1": "åŸºç¡€åŠŸèƒ½",
        "feature2": "ç¤¾åŒºæ”¯æŒ"
      },
      "pro": {
        "name": "ä¸“ä¸šç‰ˆ",
        "description": "é€‚åˆæˆé•¿ä¸­çš„ä¼ä¸š",
        "price": "${price}",
        "period": "æ¯æœˆ",
        "yearPeriod": "æ¯å¹´",
        "feature1": "æ‰€æœ‰åŠŸèƒ½",
        "feature2": "ä¼˜å…ˆæ”¯æŒ"
      },
      "enterprise": {
        "name": "ä¼ä¸šç‰ˆ",
        "description": "é€‚åˆå¤§å‹ç»„ç»‡",
        "price": "å®šåˆ¶",
        "period": "è”ç³»æˆ‘ä»¬",
        "feature1": "åŒ…å«ä¸“ä¸šç‰ˆæ‰€æœ‰åŠŸèƒ½",
        "feature2": "ä¸“å±æ”¯æŒ",
        "feature3": "è‡ªå®šä¹‰éƒ¨ç½²"
      },
      "features": {
        "title": "åŒ…å«åŠŸèƒ½ï¼š"
      },
      "cta": {
        "free": "ç«‹å³å¼€å§‹",
        "pro": "å¼€å§‹ä¸“ä¸šç‰ˆè¯•ç”¨",
        "enterprise": "è”ç³»é”€å”®"
      }
    }
  },
  "ja": {
    "pricing": {
      "title": "ã‚·ãƒ³ãƒ—ãƒ«ã§é€æ˜ãªæ–™é‡‘ä½“ç³»",
      "subtitle": "ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸãƒ—ãƒ©ãƒ³ã‚’é¸æŠ",
      "monthly": "æœˆæ‰•ã„",
      "yearly": "å¹´æ‰•ã„",
      "savePercent": "{percent}%ãŠå¾—",
      "popular": "äººæ°—",
      "free": {
        "name": "ç„¡æ–™ãƒ—ãƒ©ãƒ³",
        "description": "å§‹ã‚ã‚‹ã®ã«æœ€é©",
        "price": "ç„¡æ–™",
        "period": "æ°¸ä¹…",
        "feature1": "åŸºæœ¬æ©Ÿèƒ½",
        "feature2": "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µãƒãƒ¼ãƒˆ"
      },
      "pro": {
        "name": "ãƒ—ãƒ­ãƒ—ãƒ©ãƒ³",
        "description": "æˆé•·ä¸­ã®ä¼æ¥­å‘ã‘",
        "price": "${price}",
        "period": "æœˆé¡",
        "yearPeriod": "å¹´é¡",
        "feature1": "å…¨æ©Ÿèƒ½",
        "feature2": "å„ªå…ˆã‚µãƒãƒ¼ãƒˆ"
      },
      "enterprise": {
        "name": "ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º",
        "description": "å¤§è¦æ¨¡çµ„ç¹”å‘ã‘",
        "price": "ã‚«ã‚¹ã‚¿ãƒ ",
        "period": "ãŠå•ã„åˆã‚ã›",
        "feature1": "ãƒ—ãƒ­ãƒ—ãƒ©ãƒ³ã®å…¨æ©Ÿèƒ½",
        "feature2": "å°‚ä»»ã‚µãƒãƒ¼ãƒˆ",
        "feature3": "ã‚«ã‚¹ã‚¿ãƒ å°å…¥"
      },
      "features": {
        "title": "å«ã¾ã‚Œã‚‹æ©Ÿèƒ½ï¼š"
      },
      "cta": {
        "free": "ä»Šã™ãå§‹ã‚ã‚‹",
        "pro": "ãƒ—ãƒ­ç‰ˆã‚’è©¦ã™",
        "enterprise": "å–¶æ¥­ã«å•ã„åˆã‚ã›"
      }
    }
  },
  "fr": {
    "pricing": {
      "title": "Tarification simple et transparente",
      "subtitle": "Choisissez le plan qui vous convient",
      "monthly": "Mensuel",
      "yearly": "Annuel",
      "savePercent": "Ã‰conomisez {percent}%",
      "popular": "Populaire",
      "free": {
        "name": "Gratuit",
        "description": "Parfait pour commencer",
        "price": "Gratuit",
        "period": "pour toujours",
        "feature1": "FonctionnalitÃ©s de base",
        "feature2": "Support communautaire"
      },
      "pro": {
        "name": "Pro",
        "description": "Pour les entreprises en croissance",
        "price": "${price}",
        "period": "par mois",
        "yearPeriod": "par an",
        "feature1": "Toutes les fonctionnalitÃ©s",
        "feature2": "Support prioritaire"
      },
      "enterprise": {
        "name": "Entreprise",
        "description": "Pour les grandes organisations",
        "price": "Sur mesure",
        "period": "contactez-nous",
        "feature1": "Tout ce qui est inclus dans Pro",
        "feature2": "Support dÃ©diÃ©",
        "feature3": "DÃ©ploiement personnalisÃ©"
      },
      "features": {
        "title": "FonctionnalitÃ©s incluses :"
      },
      "cta": {
        "free": "Commencer",
        "pro": "Essayer Pro",
        "enterprise": "Contacter les ventes"
      }
    }
  }
}



================================================
FILE: app/pages/pricing/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
definePageMeta({
  auth: false,
  layout: false
})
const { t } = useI18n()
const { loggedIn, subscription, payment, client } = useAuth()
const localePath = useLocalePath()
const runtimeConfig = useRuntimeConfig()
const billingPeriod = ref('monthly')

const plans = [
  {
    name: t('pricing.free.name'),
    description: t('pricing.free.description'),
    price: t('pricing.free.price'),
    period: t('pricing.free.period'),
    features: [
      t('pricing.free.feature1'),
      t('pricing.free.feature2')
    ],
    cta: t('pricing.cta.free'),
    color: 'neutral' as const,
    to: runtimeConfig.public.appRepo
  },
  {
    name: t('pricing.pro.name'),
    description: t('pricing.pro.description'),
    price: t('pricing.pro.price', { price: 10 }),
    yearPrice: t('pricing.pro.price', { price: 100 }),
    period: t('pricing.pro.period'),
    yearPeriod: t('pricing.pro.yearPeriod'),
    features: [
      t('pricing.pro.feature1'),
      t('pricing.pro.feature2')
    ],
    cta: t('pricing.cta.pro'),
    color: 'primary' as const,
    popular: true,
    click: async () => {
      if (!loggedIn.value) {
        navigateTo(localePath('/signin?redirect=/pricing'))
        return
      }
      if (payment == 'stripe') {
        const result = await subscription.upgrade({
          plan: `pro-${billingPeriod.value}`,
          successUrl: localePath('/'),
          cancelUrl: localePath('/pricing')
        })
        console.log(result)
      } else if (payment == 'polar') {
        const result = await client.checkout({
          slug: `pro-${billingPeriod.value}`
        })
        console.log(result)
      }
    }
  },
  {
    name: t('pricing.enterprise.name'),
    description: t('pricing.enterprise.description'),
    price: t('pricing.enterprise.price'),
    period: t('pricing.enterprise.period'),
    features: [
      t('pricing.enterprise.feature1'),
      t('pricing.enterprise.feature2'),
      t('pricing.enterprise.feature3')
    ],
    cta: t('pricing.cta.enterprise'),
    color: 'neutral' as const,
    to: `mailto:${runtimeConfig.public.appContactEmail}`
  }
]
</script>

<template>
  <NuxtLayout name="default">
    <template #nav-center>
      <SiteNavigation
        mode="desktop"
        class="hidden sm:flex"
      />
    </template>
    <template #nav-right>
      <div class="flex items-center gap-2">
        <UserNavigation />
        <SiteNavigation
          mode="mobile"
          class="flex sm:hidden"
        />
      </div>
    </template>
    <UContainer class="space-y-6 pt-8 pb-6">
      <!-- Header -->
      <div class="text-center space-y-2">
        <h1 class="text-4xl font-bold">
          {{ t('pricing.title') }}
        </h1>
        <p class="text-lg text-gray-500 dark:text-gray-400">
          {{ t('pricing.subtitle') }}
        </p>

        <!-- Billing toggle -->
        <div class="flex items-center justify-center gap-2 pt-2">
          <URadioGroup
            v-model:model-value="billingPeriod"
            orientation="horizontal"
            size="lg"
            :items="[
              { label: t('pricing.monthly'), value: 'monthly' },
              { label: t('pricing.yearly'), value: 'yearly' }
            ]"
          />
        </div>
      </div>
      <!-- Pricing cards -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div
          v-for="plan in plans"
          :key="plan.name"
          class="relative"
        >
          <UCard
            class="h-full flex flex-col"
            :class="[
              plan.popular && 'border-primary dark:border-primary'
            ]"
          >
            <div class="flex-1 space-y-6 w-[300px]">
              <div class="space-y-2">
                <h2 class="text-2xl font-bold">
                  {{ plan.name }}
                </h2>
                <p class="text-gray-500 dark:text-gray-400">
                  {{ plan.description }}
                </p>
              </div>

              <div class="space-y-1">
                <div class="text-3xl font-bold">
                  {{ billingPeriod === 'yearly' ? plan.yearPrice || plan.price : plan.price }}
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {{ billingPeriod === 'yearly' ? plan.yearPeriod || plan.period : plan.period }}
                </div>
              </div>

              <USeparator />

              <div class="space-y-4">
                <p class="font-medium">
                  {{ t('pricing.features.title') }}
                </p>
                <ul class="space-y-3">
                  <li
                    v-for="(feature, index) in plan.features"
                    :key="index"
                    class="flex items-start gap-2"
                  >
                    <UIcon
                      name="lucide:check"
                      class="flex-shrink-0 mt-1 text-green-500"
                    />
                    <span>{{ feature }}</span>
                  </li>
                </ul>
              </div>
            </div>

            <template #footer>
              <UButton
                :color="plan.color"
                :to="plan.to"
                variant="solid"
                class="w-full justify-center"
                @click="plan.click"
              >
                {{ plan.cta }}
              </UButton>
            </template>
          </UCard>
        </div>
      </div>
    </UContainer>
  </NuxtLayout>
</template>



================================================
FILE: app/pages/profile/i18n.json
================================================
{
  "en": {
    "profile": {
      "back": "Back",
      "anonymousUser": "Anonymous User",
      "role": "Role",
      "emailVerified": "Email Verified",
      "verified": "Verified",
      "notVerified": "Not Verified",
      "created": "Created",
      "lastUpdated": "Last Updated",
      "sessionInfo": "Session Information",
      "ipAddress": "IP Address",
      "expires": "Expires",
      "userAgent": "User Agent",
      "connectedAccounts": "Connected Accounts",
      "linkedGithub": "Linked with GitHub",
      "linkGithub": "Link account with GitHub"
    }
  },
  "zh-CN": {
    "profile": {
      "back": "è¿”å›",
      "anonymousUser": "åŒ¿åç”¨æˆ·",
      "role": "è§’è‰²",
      "emailVerified": "é‚®ç®±éªŒè¯",
      "verified": "å·²éªŒè¯",
      "notVerified": "æœªéªŒè¯",
      "created": "åˆ›å»ºæ—¶é—´",
      "lastUpdated": "æ›´æ–°æ—¶é—´",
      "sessionInfo": "ä¼šè¯ä¿¡æ¯",
      "ipAddress": "IPåœ°å€",
      "expires": "è¿‡æœŸæ—¶é—´",
      "userAgent": "ç”¨æˆ·ä»£ç†",
      "connectedAccounts": "å…³è”è´¦å·",
      "linkedGithub": "å·²å…³è” GitHub",
      "linkGithub": "å…³è” GitHub è´¦å·"
    }
  },
  "ja": {
    "profile": {
      "back": "æˆ»ã‚‹",
      "anonymousUser": "åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼",
      "role": "å½¹å‰²",
      "emailVerified": "ãƒ¡ãƒ¼ãƒ«ç¢ºèª",
      "verified": "ç¢ºèªæ¸ˆã¿",
      "notVerified": "æœªç¢ºèª",
      "created": "ä½œæˆæ—¥æ™‚",
      "lastUpdated": "æ›´æ–°æ—¥æ™‚",
      "sessionInfo": "ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±",
      "ipAddress": "IPã‚¢ãƒ‰ãƒ¬ã‚¹",
      "expires": "æœ‰åŠ¹æœŸé™",
      "userAgent": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ",
      "connectedAccounts": "é€£æºã‚¢ã‚«ã‚¦ãƒ³ãƒˆ",
      "linkedGithub": "GitHubé€£æºæ¸ˆã¿",
      "linkGithub": "GitHubã¨é€£æºã™ã‚‹"
    }
  },
  "fr": {
    "profile": {
      "back": "Retour",
      "anonymousUser": "Utilisateur Anonyme",
      "role": "RÃ´le",
      "emailVerified": "Email VÃ©rifiÃ©",
      "verified": "VÃ©rifiÃ©",
      "notVerified": "Non VÃ©rifiÃ©",
      "created": "CrÃ©Ã© le",
      "lastUpdated": "DerniÃ¨re mise Ã  jour",
      "sessionInfo": "Informations de Session",
      "ipAddress": "Adresse IP",
      "expires": "Expire le",
      "userAgent": "Agent Utilisateur",
      "connectedAccounts": "Comptes ConnectÃ©s",
      "linkedGithub": "LiÃ© Ã  GitHub",
      "linkGithub": "Lier le compte avec GitHub"
    }
  }
}



================================================
FILE: app/pages/profile/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
const { user, session, client } = useAuth()
const toast = useToast()
const { t } = useI18n()
const localePath = useLocalePath()
const { data: accounts } = await useAsyncData('/accounts', () => client.listAccounts())

function hasProvider(provider: string) {
  return accounts.value?.data?.some(account => account.provider === provider)
}

const error = useRoute().query?.error
onMounted(() => {
  if (error) {
    toast.add({
      color: 'error',
      title: `${error}`
    })
  }
})
</script>

<template>
  <UContainer>
    <div class="space-y-6 pt-6">
      <!-- User Profile Section -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-6">
        <div class="flex justify-between items-center mb-4">
          <div class="flex items-center gap-4">
            <UAvatar
              v-if="user?.image"
              :src="user.image"
              :alt="user?.name || ''"
              size="lg"
            />
            <div>
              <h1 class="text-2xl font-bold">
                {{ user?.name || t('profile.anonymousUser') }}
              </h1>
              <p class="text-gray-500 dark:text-gray-400">
                {{ user?.email }}
              </p>
            </div>
          </div>
          <UButton
            :to="localePath('/')"
            variant="outline"
            color="neutral"
            icon="i-lucide-arrow-left"
          >
            {{ t('profile.back') }}
          </UButton>
        </div>

        <div class="grid gap-4 md:grid-cols-2">
          <div class="space-y-2">
            <p class="flex justify-between">
              <span class="text-gray-500 dark:text-gray-400">{{ t('profile.role') }}:</span>
              <UBadge :color="user?.role === 'admin' ? 'primary' : 'neutral'">
                {{ user?.role }}
              </UBadge>
            </p>
            <p class="flex justify-between">
              <span class="text-gray-500 dark:text-gray-400">{{ t('profile.emailVerified') }}:</span>
              <UBadge :color="user?.emailVerified ? 'success' : 'warning'">
                {{ user?.emailVerified ? t('profile.verified') : t('profile.notVerified') }}
              </UBadge>
            </p>
          </div>
          <div class="space-y-2">
            <p class="flex justify-between">
              <span class="text-gray-500 dark:text-gray-400">{{ t('profile.created') }}:</span>
              <span>{{ formatDate(user?.createdAt) }}</span>
            </p>
            <p class="flex justify-between">
              <span class="text-gray-500 dark:text-gray-400">{{ t('profile.lastUpdated') }}:</span>
              <span>{{ formatDate(user?.updatedAt) }}</span>
            </p>
          </div>
        </div>
      </div>

      <!-- Session Information -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-6">
        <h2 class="text-xl font-bold mb-4">
          {{ t('profile.sessionInfo') }}
        </h2>
        <div class="space-y-2">
          <p class="flex justify-between">
            <span class="text-gray-500 dark:text-gray-400">{{ t('profile.ipAddress') }}:</span>
            <span>{{ session?.ipAddress }}</span>
          </p>
          <p class="flex justify-between">
            <span class="text-gray-500 dark:text-gray-400">{{ t('profile.expires') }}:</span>
            <span>{{ formatDate(session?.expiresAt) }}</span>
          </p>
          <p class="text-gray-500 dark:text-gray-400">
            {{ t('profile.userAgent') }}:
          </p>
          <p class="text-sm break-all">
            {{ session?.userAgent }}
          </p>
        </div>
      </div>

      <!-- Connected Accounts -->
      <div class="bg-white dark:bg-gray-800 rounded-lg p-6">
        <h2 class="text-xl font-bold mb-4">
          {{ t('profile.connectedAccounts') }}
        </h2>
        <div class="flex gap-2">
          <UButton
            v-if="hasProvider('github')"
            color="neutral"
            icon="i-simple-icons-github"
            trailing-icon="i-heroicons-check"
          >
            {{ t('profile.linkedGithub') }}
          </UButton>
          <UButton
            v-else
            color="neutral"
            icon="i-simple-icons-github"
            @click="client.linkSocial({ provider: 'github' })"
          >
            {{ t('profile.linkGithub') }}
          </UButton>
        </div>
      </div>
    </div>
  </UContainer>
</template>



================================================
FILE: app/pages/reset-password/i18n.json
================================================
[Binary file]


================================================
FILE: app/pages/reset-password/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
definePageMeta({
  auth: {
    only: 'guest'
  }
})

const { t } = useI18n()
useHead({
  title: t('resetPassword.title')
})

const auth = useAuth()
const toast = useToast()
const route = useRoute()
const localePath = useLocalePath()
const runtimeConfig = useRuntimeConfig()

const state = reactive({
  password: undefined as string | undefined,
  confirmPassword: undefined as string | undefined
})

const schema = z.object({
  password: z.string().min(8, t('resetPassword.errors.minLength', { min: 8 })),
  confirmPassword: z.string().min(8, t('resetPassword.errors.minLength', { min: 8 })).refine(val => val === state.password, {
    message: t('resetPassword.errors.passwordMismatch')
  })
})

type Schema = zodOutput<typeof schema>

const loading = ref(false)

async function onSubmit(event: FormSubmitEvent<Schema>) {
  if (loading.value)
    return

  loading.value = true
  const { error } = await auth.resetPassword({
    newPassword: event.data.password,
    token: route.query.token as string
  })

  if (error) {
    toast.add({
      title: error.message,
      color: 'error'
    })
  } else {
    toast.add({
      title: t('resetPassword.success'),
      color: 'success'
    })
    navigateTo(localePath(runtimeConfig.public.auth.redirectGuestTo))
  }
  loading.value = false
}
</script>

<template>
  <UContainer class="flex items-center justify-center sm:p-4 sm:min-w-160">
    <UCard class="w-full max-w-md">
      <template #header>
        <div class="text-center p-4">
          <h1 class="text-xl font-semibold">
            {{ t('resetPassword.title') }}
          </h1>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">
            {{ t('resetPassword.description') }}
          </p>
        </div>
      </template>

      <div class="space-y-4">
        <UForm
          :schema="schema"
          :state="state"
          class="space-y-4"
          @submit="onSubmit"
        >
          <UFormField
            :label="t('resetPassword.password')"
            name="password"
            required
          >
            <UInput
              v-model="state.password"
              type="password"
              class="w-full"
              :placeholder="t('resetPassword.passwordPlaceholder')"
            />
          </UFormField>

          <UFormField
            :label="t('resetPassword.confirmPassword')"
            name="confirmPassword"
            required
          >
            <UInput
              v-model="state.confirmPassword"
              type="password"
              class="w-full"
              :placeholder="t('resetPassword.confirmPasswordPlaceholder')"
            />
          </UFormField>

          <UButton
            type="submit"
            color="primary"
            block
            :loading="loading"
          >
            {{ t('resetPassword.submit') }}
          </UButton>
        </UForm>

        <div class="text-center text-sm">
          <UButton
            variant="link"
            color="primary"
            :to="localePath('/signin')"
          >
            {{ t('resetPassword.backToSignIn') }}
          </UButton>
        </div>
      </div>
    </UCard>
  </UContainer>
</template>



================================================
FILE: app/pages/signin/i18n.json
================================================
{
  "en": {
    "signIn": {
      "welcome": "Welcome to {name}",
      "email": "Email",
      "password": "Password",
      "emailPlaceholder": "Email Address",
      "passwordPlaceholder": "Password",
      "rememberMe": "Remember me",
      "forgotPassword": "Forgot your password?",
      "signIn": "Sign In",
      "noAccount": "Don't have an account?",
      "createAccount": "Create today!",
      "or": "Or",
      "signInSuccess": "Sign in Success",
      "errors": {
        "invalidEmail": "Invalid email address",
        "passwordLength": "Password must be at least {min} characters"
      },
      "emailNotVerified": "Email Not Verified",
      "emailNotVerifiedDesc": "Please verify your email address to continue.",
      "sendEmail": "Send Verification Email",
      "sendEmailSuccess": "Verification email has been sent",
      "sendEmailError": "Failed to send verification email"
    }
  },
  "zh-CN": {
    "signIn": {
      "welcome": "æ¬¢è¿ä½¿ç”¨ {name}",
      "email": "é‚®ç®±",
      "password": "å¯†ç ",
      "emailPlaceholder": "é‚®ç®±åœ°å€",
      "passwordPlaceholder": "å¯†ç ",
      "rememberMe": "è®°ä½æˆ‘",
      "forgotPassword": "å¿˜è®°å¯†ç ï¼Ÿ",
      "signIn": "ç™»å½•",
      "noAccount": "è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ",
      "createAccount": "ç«‹å³æ³¨å†Œï¼",
      "or": "æˆ–è€…",
      "signInSuccess": "ç™»å½•æˆåŠŸ",
      "errors": {
        "invalidEmail": "æ— æ•ˆçš„é‚®ç®±åœ°å€",
        "passwordLength": "å¯†ç é•¿åº¦è‡³å°‘ä¸º{min}ä¸ªå­—ç¬¦"
      },
      "emailNotVerified": "é‚®ç®±æœªéªŒè¯",
      "emailNotVerifiedDesc": "è¯·éªŒè¯æ‚¨çš„é‚®ç®±åœ°å€ä»¥ç»§ç»­ã€‚",
      "resendEmail": "é‡æ–°å‘é€éªŒè¯é‚®ä»¶",
      "resendEmailSuccess": "éªŒè¯é‚®ä»¶å·²å‘é€",
      "resendEmailError": "å‘é€éªŒè¯é‚®ä»¶å¤±è´¥",
      "sendEmail": "å‘é€éªŒè¯é‚®ä»¶",
      "sendEmailSuccess": "éªŒè¯é‚®ä»¶å·²å‘é€",
      "sendEmailError": "å‘é€éªŒè¯é‚®ä»¶å¤±è´¥"
    }
  },
  "ja": {
    "signIn": {
      "welcome": "{name}ã¸ã‚ˆã†ã“ã",
      "email": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
      "password": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
      "emailPlaceholder": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
      "passwordPlaceholder": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
      "rememberMe": "ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ä¿æŒ",
      "forgotPassword": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã§ã™ã‹ï¼Ÿ",
      "signIn": "ãƒ­ã‚°ã‚¤ãƒ³",
      "noAccount": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹",
      "createAccount": "æ–°è¦ç™»éŒ²ï¼",
      "or": "ã¾ãŸã¯",
      "signInSuccess": "ãƒ­ã‚°ã‚¤ãƒ³ã«æˆåŠŸã—ã¾ã—ãŸ",
      "errors": {
        "invalidEmail": "ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
        "passwordLength": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯{min}æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
      },
      "emailNotVerified": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æœªç¢ºèª",
      "emailNotVerifiedDesc": "ç¶šè¡Œã™ã‚‹ã«ã¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
      "resendEmail": "ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’å†é€ä¿¡",
      "resendEmailSuccess": "ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸ",
      "resendEmailError": "ç¢ºèªãƒ¡ãƒ¼ãƒ«ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ",
      "sendEmail": "èªè¨¼ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡",
      "sendEmailSuccess": "èªè¨¼ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸ",
      "sendEmailError": "èªè¨¼ãƒ¡ãƒ¼ãƒ«ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ"
    }
  },
  "fr": {
    "signIn": {
      "welcome": "Bienvenue sur {name}",
      "email": "E-mail",
      "password": "Mot de passe",
      "emailPlaceholder": "Adresse e-mail",
      "passwordPlaceholder": "Mot de passe",
      "rememberMe": "Se souvenir de moi",
      "forgotPassword": "Mot de passe oubliÃ© ?",
      "signIn": "Se connecter",
      "noAccount": "Vous n'avez pas de compte ?",
      "createAccount": "CrÃ©ez-en un !",
      "or": "Ou",
      "signInSuccess": "Connexion rÃ©ussie",
      "errors": {
        "invalidEmail": "Adresse e-mail invalide",
        "passwordLength": "Le mot de passe doit contenir au moins {min} caractÃ¨res"
      },
      "emailNotVerified": "Email non vÃ©rifiÃ©",
      "emailNotVerifiedDesc": "Veuillez vÃ©rifier votre adresse e-mail pour continuer.",
      "resendEmail": "Renvoyer l'e-mail de vÃ©rification",
      "resendEmailSuccess": "L'e-mail de vÃ©rification a Ã©tÃ© envoyÃ©",
      "resendEmailError": "Ã‰chec de l'envoi de l'e-mail de vÃ©rification",
      "sendEmail": "Envoyer l'e-mail de vÃ©rification",
      "sendEmailSuccess": "L'e-mail de vÃ©rification a Ã©tÃ© envoyÃ©",
      "sendEmailError": "Ã‰chec de l'envoi de l'e-mail de vÃ©rification"
    }
  }
}



================================================
FILE: app/pages/signin/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
definePageMeta({
  auth: {
    only: 'guest'
  }
})

const { t } = useI18n()

useHead({
  title: t('signIn.signIn')
})
const auth = useAuth()
const toast = useToast()
const route = useRoute()
const localePath = useLocalePath()

const redirectTo = computed(() => {
  const redirect = route.query.redirect as string
  return localePath(redirect || '/')
})

const schema = z.object({
  email: z.email(t('signIn.errors.invalidEmail')),
  password: z.string().min(8, t('signIn.errors.passwordLength', { min: 8 })),
  rememberMe: z.boolean().optional()
})
type Schema = zodOutput<typeof schema>

const state = reactive<Partial<Schema>>({
  email: undefined,
  password: undefined,
  rememberMe: false
})

const loading = ref(false)
const loadingAction = ref('')
const isEmailVerifyModalOpen = ref(false)
const resendLoading = ref(false)
let unverifiedEmail = ''

async function onSocialLogin(action: 'google' | 'github') {
  loading.value = true
  loadingAction.value = action
  auth.signIn.social({ provider: action, callbackURL: redirectTo.value })
}

async function onSubmit(event: FormSubmitEvent<Schema>) {
  if (loading.value)
    return
  loading.value = true
  loadingAction.value = 'submit'
  const { error } = await auth.signIn.email({
    email: event.data.email,
    password: event.data.password,
    rememberMe: event.data.rememberMe,
    callbackURL: redirectTo.value
  })
  if (error) {
    if (error.code === auth.errorCodes.EMAIL_NOT_VERIFIED) {
      unverifiedEmail = event.data.email
      isEmailVerifyModalOpen.value = true
      loading.value = false
      return
    }
    toast.add({
      title: error.message,
      color: 'error'
    })
  }
  loading.value = false
}

async function handleResendEmail() {
  if (resendLoading.value)
    return
  resendLoading.value = true
  const { error } = await auth.sendVerificationEmail({
    email: unverifiedEmail,
    callbackURL: redirectTo.value
  })
  if (error) {
    toast.add({
      title: error.message,
      color: 'error'
    })
  } else {
    toast.add({
      title: t('signIn.sendEmailSuccess'),
      color: 'success'
    })
  }

  isEmailVerifyModalOpen.value = false
  resendLoading.value = false
}
</script>

<template>
  <UContainer class="flex items-center justify-center sm:p-4 sm:min-w-160">
    <UCard class="w-full max-w-md">
      <template #header>
        <div class="text-center p-4">
          <h1 class="text-xl font-semibold">
            {{ t('signIn.welcome', { name: t('global.appName') }) }}
          </h1>
        </div>
      </template>
      <div class="space-y-4">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
          <UButton
            color="neutral"
            variant="outline"
            icon="i-simple-icons-google"
            class="justify-center"
            :loading="loading && loadingAction === 'google'"
            :disabled="loading"
            @click="onSocialLogin('google')"
          >
            Google
          </UButton>
          <UButton
            color="neutral"
            variant="outline"
            icon="i-simple-icons-github"
            class="justify-center"
            :loading="loading && loadingAction === 'github'"
            :disabled="loading"
            @click="onSocialLogin('github')"
          >
            Github
          </UButton>
        </div>

        <USeparator :label="t('signIn.or')" />

        <UForm
          :schema="schema"
          :state="state"
          class="space-y-4"
          @submit="onSubmit"
        >
          <UFormField
            :label="t('signIn.email')"
            name="email"
            required
          >
            <UInput
              v-model="state.email"
              type="email"
              class="w-full"
              :placeholder="t('signIn.emailPlaceholder')"
              autocomplete="email"
            />
          </UFormField>

          <UFormField
            :label="t('signIn.password')"
            name="password"
            required
          >
            <UInput
              v-model="state.password"
              type="password"
              class="w-full"
              :placeholder="t('signIn.passwordPlaceholder')"
            />
          </UFormField>

          <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2">
            <UFormField name="rememberMe">
              <UCheckbox
                v-model="state.rememberMe"
                :label="t('signIn.rememberMe')"
              />
            </UFormField>
            <UButton
              variant="link"
              color="neutral"
              :to="localePath('/forgot-password')"
            >
              {{ t('signIn.forgotPassword') }}
            </UButton>
          </div>

          <UButton
            type="submit"
            color="primary"
            block
            :disabled="loading"
            :loading="loading && loadingAction === 'submit'"
          >
            {{ t('signIn.signIn') }}
          </UButton>

          <div class="text-center text-sm">
            {{ t('signIn.noAccount') }}
            <UButton
              variant="link"
              color="primary"
              :disabled="loading"
              :to="localePath('/signup')"
            >
              {{ t('signIn.createAccount') }}
            </UButton>
          </div>
        </UForm>
      </div>
    </UCard>

    <UModal v-model:open="isEmailVerifyModalOpen">
      <template #content>
        <UCard>
          <template #header>
            <div class="flex items">
              <h3 class="text-lg font-medium">
                {{ t('signIn.emailNotVerified') }}
              </h3>
            </div>
          </template>

          <p class="text-sm">
            {{ t('signIn.emailNotVerifiedDesc') }}
          </p>

          <template #footer>
            <div class="flex justify-end gap-3">
              <UButton
                color="neutral"
                variant="outline"
                @click="isEmailVerifyModalOpen = false"
              >
                {{ t('global.page.cancel') }}
              </UButton>
              <UButton
                color="primary"
                :loading="resendLoading"
                @click="handleResendEmail"
              >
                {{ t('signIn.sendEmail') }}
              </UButton>
            </div>
          </template>
        </UCard>
      </template>
    </UModal>
  </UContainer>
</template>



================================================
FILE: app/pages/signup/i18n.json
================================================
{
  "en": {
    "signUp": {
      "pageTitle": "Sign up",
      "title": "Create your account",
      "or": "Or",
      "form": {
        "name": {
          "label": "Name",
          "placeholder": "Your Name",
          "error": "Name must be at least {min} characters"
        },
        "email": {
          "label": "Email",
          "placeholder": "Email Address",
          "error": "Invalid email address"
        },
        "password": {
          "label": "Password",
          "placeholder": "Password",
          "error": "Password must be at least {min} characters"
        },
        "confirmPassword": {
          "label": "Confirm Password",
          "placeholder": "Confirm Password",
          "error": "Passwords don't match"
        }
      },
      "submit": "Create Account",
      "haveAccount": "Already have an account?",
      "signIn": "Sign in here",
      "sendEmailSuccess": "Verification email has been sent, Please verify your email address to continue."
    }
  },
  "zh-CN": {
    "signUp": {
      "pageTitle": "æ³¨å†Œè´¦å·",
      "title": "åˆ›å»ºè´¦å·",
      "or": "æˆ–è€…",
      "form": {
        "name": {
          "label": "å§“å",
          "placeholder": "è¯·è¾“å…¥å§“å",
          "error": "å§“åè‡³å°‘éœ€è¦{min}ä¸ªå­—ç¬¦"
        },
        "email": {
          "label": "é‚®ç®±",
          "placeholder": "è¯·è¾“å…¥é‚®ç®±åœ°å€",
          "error": "æ— æ•ˆçš„é‚®ç®±åœ°å€"
        },
        "password": {
          "label": "å¯†ç ",
          "placeholder": "è¯·è¾“å…¥å¯†ç ",
          "error": "å¯†ç è‡³å°‘éœ€è¦{min}ä¸ªå­—ç¬¦"
        },
        "confirmPassword": {
          "label": "ç¡®è®¤å¯†ç ",
          "placeholder": "è¯·å†æ¬¡è¾“å…¥å¯†ç ",
          "error": "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"
        }
      },
      "submit": "åˆ›å»ºè´¦å·",
      "haveAccount": "å·²æœ‰è´¦å·ï¼Ÿ",
      "signIn": "æ­¤å¤„ç™»å½•",
      "sendEmailSuccess": "éªŒè¯é‚®ä»¶å·²å‘é€ï¼Œè¯·éªŒè¯æ‚¨çš„é‚®ç®±åœ°å€ä»¥ç»§ç»­ã€‚"
    }
  },
  "ja": {
    "signUp": {
      "pageTitle": "æ–°è¦ç™»éŒ²",
      "title": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ",
      "or": "ã¾ãŸã¯",
      "form": {
        "name": {
          "label": "åå‰",
          "placeholder": "åå‰ã‚’å…¥åŠ›",
          "error": "åå‰ã¯{min}æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
        },
        "email": {
          "label": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
          "placeholder": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›",
          "error": "ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
        },
        "password": {
          "label": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
          "placeholder": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›",
          "error": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯{min}æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
        },
        "confirmPassword": {
          "label": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰",
          "placeholder": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›",
          "error": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“"
        }
      },
      "submit": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ",
      "haveAccount": "æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ",
      "signIn": "ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹",
      "sendEmailSuccess": "ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç¢ºèªã—ã¦ç¶šè¡Œã—ã¦ãã ã•ã„ã€‚"
    }
  },
  "fr": {
    "signUp": {
      "pageTitle": "S'inscrire",
      "title": "CrÃ©er votre compte",
      "or": "Ou",
      "form": {
        "name": {
          "label": "Nom",
          "placeholder": "Votre nom",
          "error": "Le nom doit contenir au moins {min} caractÃ¨res"
        },
        "email": {
          "label": "Email",
          "placeholder": "Adresse email",
          "error": "Adresse email invalide"
        },
        "password": {
          "label": "Mot de passe",
          "placeholder": "Mot de passe",
          "error": "Le mot de passe doit contenir au moins {min} caractÃ¨res"
        },
        "confirmPassword": {
          "label": "Confirmer le mot de passe",
          "placeholder": "Confirmer le mot de passe",
          "error": "Les mots de passe ne correspondent pas"
        }
      },
      "submit": "CrÃ©er un compte",
      "haveAccount": "Vous avez dÃ©jÃ  un compte ?",
      "signIn": "Connectez-vous ici",
      "sendEmailSuccess": "L'email de vÃ©rification a Ã©tÃ© envoyÃ©. Veuillez vÃ©rifier votre adresse email pour continuer."
    }
  }
}



================================================
FILE: app/pages/signup/index.vue
================================================
<i18n src="./i18n.json"></i18n>

<script setup lang="ts">
definePageMeta({
  auth: {
    only: 'guest'
  }
})

const { t } = useI18n()

useHead({
  title: t('signUp.pageTitle')
})

const auth = useAuth()
const toast = useToast()
const route = useRoute()
const localePath = useLocalePath()

const redirectTo = computed(() => {
  const redirect = route.query.redirect as string
  return localePath(redirect || '/')
})

const schema = z.object({
  name: z.string().min(5, t('signUp.form.name.error', { min: 5 })),
  email: z.email(t('signUp.form.email.error')),
  password: z.string().min(8, t('signUp.form.password.error', { min: 8 })),
  confirmPassword: z.string()
}).refine(data => data.password === data.confirmPassword, {
  message: t('signUp.form.confirmPassword.error'),
  path: ['confirmPassword']
})

type Schema = zodOutput<typeof schema>

const state = reactive<Partial<Schema>>({
  name: undefined,
  email: undefined,
  password: undefined,
  confirmPassword: undefined
})

const loading = ref(false)
const loadingAction = ref('')

async function onSocialLogin(action: 'google' | 'github') {
  loading.value = true
  loadingAction.value = action
  auth.signIn.social({ provider: action, callbackURL: redirectTo.value })
}

async function onSubmit(event: FormSubmitEvent<Schema>) {
  if (loading.value)
    return
  loading.value = true
  loadingAction.value = 'submit'
  const { error } = await auth.signUp.email({
    name: event.data.name,
    email: event.data.email,
    password: event.data.password
  })
  if (error) {
    toast.add({
      title: error.message || error.statusText,
      color: 'error'
    })
  }
  else {
    toast.add({
      title: t('signUp.sendEmailSuccess'),
      color: 'success'
    })
    state.name = undefined
    state.email = undefined
    state.password = undefined
    state.confirmPassword = undefined
  }
  loading.value = false
}
</script>

<template>
  <UContainer class="flex items-center justify-center sm:p-4 sm:min-w-160">
    <UCard class="w-full max-w-md">
      <template #header>
        <div class="text-center p-4">
          <h1 class="text-xl font-semibold">
            {{ t('signUp.title') }}
          </h1>
        </div>
      </template>

      <div class="space-y-4">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
          <UButton
            color="neutral"
            variant="outline"
            icon="i-simple-icons-google"
            class="justify-center"
            :loading="loading && loadingAction === 'google'"
            :disabled="loading"
            @click="onSocialLogin('google')"
          >
            Google
          </UButton>
          <UButton
            color="neutral"
            variant="outline"
            icon="i-simple-icons-github"
            class="justify-center"
            :loading="loading && loadingAction === 'github'"
            :disabled="loading"
            @click="onSocialLogin('github')"
          >
            Github
          </UButton>
        </div>

        <USeparator :label="t('signUp.or')" />

        <UForm
          :schema="schema"
          :state="state"
          class="space-y-4"
          @submit="onSubmit"
        >
          <UFormField
            :label="t('signUp.form.name.label')"
            name="name"
            required
          >
            <UInput
              v-model="state.name"
              :placeholder="t('signUp.form.name.placeholder')"
              class="w-full"
            />
          </UFormField>

          <UFormField
            :label="t('signUp.form.email.label')"
            name="email"
            autocomplete="email"
            required
          >
            <UInput
              v-model="state.email"
              type="email"
              :placeholder="t('signUp.form.email.placeholder')"
              class="w-full"
            />
          </UFormField>

          <UFormField
            :label="t('signUp.form.password.label')"
            name="password"
            required
          >
            <UInput
              v-model="state.password"
              type="password"
              :placeholder="t('signUp.form.password.placeholder')"
              class="w-full"
            />
          </UFormField>

          <UFormField
            :label="t('signUp.form.confirmPassword.label')"
            name="confirmPassword"
            required
          >
            <UInput
              v-model="state.confirmPassword"
              type="password"
              :placeholder="t('signUp.form.confirmPassword.placeholder')"
              class="w-full"
            />
          </UFormField>

          <UButton
            type="submit"
            color="primary"
            block
            :loading="loading && loadingAction === 'submit'"
            :disabled="loading"
          >
            {{ t('signUp.submit') }}
          </UButton>
        </UForm>

        <div class="text-center text-sm">
          {{ t('signUp.haveAccount') }}
          <UButton
            variant="link"
            color="primary"
            :disabled="loading"
            :to="localePath('/signin')"
          >
            {{ t('signUp.signIn') }}
          </UButton>
        </div>
      </div>
    </UCard>
  </UContainer>
</template>



================================================
FILE: app/plugins/auth.client.ts
================================================
export default defineNuxtPlugin(async (nuxtApp) => {
  if (!nuxtApp.payload.serverRendered) {
    await useAuth().fetchSession()
  }
  else if (Boolean(nuxtApp.payload.prerenderedAt) || Boolean(nuxtApp.payload.isCached)) {
    // To avoid hydration mismatch
    nuxtApp.hook('app:mounted', async () => {
      await useAuth().fetchSession()
    })
  }
})



================================================
FILE: app/plugins/auth.server.ts
================================================
export default defineNuxtPlugin({
  name: 'better-auth-fetch-plugin',
  enforce: 'pre',
  async setup(nuxtApp) {
    // Flag if request is cached
    nuxtApp.payload.isCached = Boolean(useRequestEvent()?.context.cache)
    if (nuxtApp.payload.serverRendered && !nuxtApp.payload.prerenderedAt && !nuxtApp.payload.isCached) {
      await useAuth().fetchSession()
    }
  }
})



================================================
FILE: app/plugins/customFetch.ts
================================================
export default defineNuxtPlugin(() => {
  const $customFetch = $fetch.create({
    onRequest({ request, options }) {
      console.log(request, options)
    }
    // onResponse({ response }) {
    // },
    // onResponseError({ response }) {
    // }
  })
  // Expose to useNuxtApp().$customFetch
  return {
    provide: {
      customFetch: $customFetch
    }
  }
})



================================================
FILE: app/utils/columns.ts
================================================
export const htmlColumn = <T>(cell: ColumnCell<T>, el = 'span') => {
  const value = cell.getValue() as string
  return h(el, { innerHTML: value }, [])
}

export const IDColumn = <T>(cell: ColumnCell<T>) => {
  const value = cell.getValue() as string
  return h(UTooltip, {
    text: value,
    disableClosingTrigger: true
  }, () => h(
    'span',
    {},
    value.substring(0, 8)
  ))
}

export const showMoreColumn = <T>(cell: ColumnCell<T>, length: number) => {
  const value = cell.getValue() as string || ''
  if (value.length <= length) {
    return value
  }

  return h(UTooltip, {
    text: value,
    disableClosingTrigger: true
  }, () => h(
    'span',
    {},
    `${value.substring(0, length)}...`
  ))
}

export const dateColumn = <T>(cell: ColumnCell<T>) => {
  const value = cell.getValue() as Date | string
  return formatToDatetime(value)
}

export const yesNoColumn = <T>(cell: ColumnCell<T>, t: TranFunction) => {
  const value = cell.getValue() as boolean
  const color = value ? 'success' : 'error'
  return h(UBadge, { class: 'capitalize', variant: 'subtle', color }, () => value ? t('yes') : t('no'))
}

export const avatarColumn = <T>(cell: ColumnCell<T>) => {
  const value = cell.getValue() as string
  return h(UAvatar, { src: value })
}

export const isEnabledColumn = <T>(cell: ColumnCell<T>, t: TranFunction) => {
  const value = cell.getValue() as boolean
  const color = value ? 'success' : 'error'
  return h(UBadge, { class: 'capitalize', variant: 'subtle', color }, () => value ? t('enable') : t('disable'))
}

export const actionColumn = <T>(row: Row<T>, getRowItems: (row: Row<T>) => any[]) => {
  return h(
    'div',
    { class: 'text-right' },
    h(
      UDropdownMenu as any,
      {
        content: {
          align: 'end'
        },
        items: getRowItems(row)
      },
      () => h(UButton, {
        icon: 'i-lucide-ellipsis-vertical',
        color: 'neutral',
        variant: 'ghost',
        class: 'ml-auto'
      })
    )
  )
}



================================================
FILE: app/utils/components.ts
================================================
export { default as UAvatar } from '@nuxt/ui/runtime/components/Avatar.vue'
export { default as UBadge } from '@nuxt/ui/runtime/components/Badge.vue'
export { default as UButton } from '@nuxt/ui/runtime/components/Button.vue'
export { default as UDropdownMenu } from '@nuxt/ui/runtime/components/DropdownMenu.vue'
export { default as UTable } from '@nuxt/ui/runtime/components/Table.vue'
export { default as UTooltip } from '@nuxt/ui/runtime/components/Tooltip.vue'



================================================
FILE: app/utils/date.ts
================================================
import { CalendarDate, getLocalTimeZone } from '@internationalized/date'
import { endOfDay, format, parseISO, startOfDay } from 'date-fns'

export const DATE_FORMAT = 'yyyy-MM-dd'
export const DATETIME_FORMAT = 'yyyy-MM-dd HH:mm:ss'

export const getTimeZone = () => {
  const timezone = getLocalTimeZone()
  return timezone
}

export const formatDate = (date: Date | undefined) => {
  if (!date) {
    return ''
  }
  return new Date(date).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })
}

export const toCalendarDate = (date: Date) => {
  return new CalendarDate(date.getFullYear(), date.getMonth() + 1, date.getDate())
}

export const toDate = (calendarDate: CalendarDate) => {
  const timezone = getLocalTimeZone()
  return calendarDate.toDate(timezone)
}

export const formatToDate = (value: CalendarDate | Date | string) => {
  let date
  if (value instanceof CalendarDate) {
    const timezone = getLocalTimeZone()
    date = value.toDate(timezone)
  } else if (value instanceof Date) {
    date = value
  } else {
    // 2024-12-27T06:11:35.707+00:00
    // 2024-12-27T06:11:35.707123+00:00
    date = parseISO(value)
  }
  return date
}

export const formatToDay = (value: CalendarDate | Date | string) => {
  const date = formatToDate(value)
  return format(date, DATE_FORMAT)
}

export const formatToDatetime = (value: CalendarDate | Date | string | undefined) => {
  if (!value) {
    return ''
  }
  const date = formatToDate(value)
  return format(date, DATETIME_FORMAT)
}

export const startOfDate = (date: CalendarDate | Date) => {
  if (date instanceof CalendarDate) {
    const timezone = getLocalTimeZone()
    return startOfDay(date.toDate(timezone))
  } else {
    return startOfDay(date)
  }
}

export const endOfDate = (date: CalendarDate | Date) => {
  if (date instanceof CalendarDate) {
    const timezone = getLocalTimeZone()
    return endOfDay(date.toDate(timezone))
  } else {
    return endOfDay(date)
  }
}



================================================
FILE: app/utils/types.ts
================================================
import type { CalendarDate } from '@internationalized/date'
import type { TableColumn } from '@nuxt/ui'
import type { CellContext, RowData } from '@tanstack/vue-table'

export type { FormSubmitEvent, NavigationMenuItem, TableData } from '@nuxt/ui'
export type { Row } from '@tanstack/vue-table'
export { z } from 'zod/v4'
export type { output as zodOutput } from 'zod/v4'
export { locales as zodLocales } from 'zod/v4'

export type TranFunction = (name: string, options?: StringDict<any>) => string
export type ColumnCell<TData extends RowData, TValue = unknown> = CellContext<TData, TValue>
export type AdminTableColumn<T extends TableData, D = unknown> = TableColumn<T, D> & {
  accessorKey?: string
  header?: string
  id?: string
}

export interface StringDict<T> {
  [key: string]: T
}

export interface FilterItem {
  label: string
  id: string
  count?: number
}

export interface FilterInput {
  name: string
  field: string
  value: string | undefined
  type: 'input'
}

export interface FilterCheckbox {
  name: string
  field: string
  value: string[]
  type: 'checkbox'
  items: FilterItem[]
}

export interface FilterTabs {
  name: string
  field: string
  value: string
  type: 'tabs'
  items: FilterItem[]
}

export interface FilterDateRange {
  name: string
  field: string
  value: DateRange
  type: 'daterange'
}

export interface DateRange { start: CalendarDate | undefined, end: CalendarDate | undefined }

export type AdminTableFilter =
  | FilterInput
  | FilterCheckbox
  | FilterTabs
  | FilterDateRange

export interface SortOption {
  field: string
  order: 'asc' | 'desc'
}

export type FilterCondition = {
  col: string
  op: 'between'
  v: [string, string]
} | {
  col: string
  op: 'in'
  v: string[]
} | {
  col: string
  op: 'like'
  v: string
} | {
  col: string
  op: 'eq'
  v: string
}

export interface FetchDataParams {
  page: number
  limit: number
  sort: SortOption[]
  filter: FilterCondition[]
}

export interface PageData<T> {
  data: T[]
  total: number
}

export type FetchDataFn<T> = (params: FetchDataParams) => Promise<PageData<T>>

export interface ColumnCount {
  column: string
  count: number
}



================================================
FILE: public/favicons/site.webmanifest
================================================
{
  "name": "NuxSaaS",
  "short_name": "NuxSaaS",
  "icons": [
    {
      "src": "/favicons/web-app-manifest-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "/favicons/web-app-manifest-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "maskable"
    }
  ],
  "theme_color": "#ffffff",
  "background_color": "#ffffff",
  "display": "standalone"
}


================================================
FILE: public/screenshots/dashboard.webp
================================================
[Binary file]


================================================
FILE: public/screenshots/home.webp
================================================
[Binary file]


================================================
FILE: public/screenshots/pricing.webp
================================================
[Binary file]


================================================
FILE: public/screenshots/signin.webp
================================================
[Binary file]


================================================
FILE: public/screenshots/subscription.webp
================================================
[Binary file]


================================================
FILE: public/screenshots/users.webp
================================================
[Binary file]


================================================
FILE: server/tsconfig.json
================================================
{
  "extends": "../.nuxt/tsconfig.server.json"
}



================================================
FILE: server/api/admin/count/[tableName]/[columnName].get.ts
================================================
import type { PgColumn } from 'drizzle-orm/pg-core'
import { getTableColumns, sql } from 'drizzle-orm'
import { PgTable } from 'drizzle-orm/pg-core'
import { z } from 'zod'
import * as schema from '~~/server/database/schema'
import { isValidTable } from '~~/server/utils/db'
import { filterSchema, processFilters, withFilters } from '~~/server/utils/query'

const pathSchema = z.object({
  tableName: z.string().min(1),
  columnName: z.string().min(1)
})

const querySchema = z.object({
  filter: z.string()
    .transform((str) => {
      try {
        const parsed = JSON.parse(str)
        if (!Array.isArray(parsed))
          return []

        return parsed.reduce<z.infer<typeof filterSchema>>((validFilters, item) => {
          const result = filterSchema.element.safeParse(item)
          if (result.success) {
            validFilters.push(result.data)
          }
          return validFilters
        }, [])
      }
      catch {
        return []
      }
    })
    .optional()
})

export default eventHandler(async (event) => {
  const params = await getValidatedRouterParams(event, pathSchema.parse)
  const query = await getValidatedQuery(event, querySchema.parse)

  const { tableName, columnName } = params
  if (!isValidTable(tableName)) {
    throw createError({
      statusCode: 400,
      statusMessage: 'Bad Request',
      data: 'INVALID_TABLE_NAME',
      message: 'Invalid Table Name'
    })
  }

  const table = schema[tableName]
  if (!(table instanceof PgTable)) {
    throw createError(
      {
        statusCode: 400,
        statusMessage: 'Bad Request',
        data: 'INVALID_TABLE_TYPE',
        message: 'Invalid Table Name'
      }
    )
  }
  const columns = getTableColumns(table)

  if (!(columnName in columns)) {
    throw createError({
      statusCode: 400,
      statusMessage: 'Bad Request',
      data: 'INVALID_COLUMN_NAME',
      message: 'Invalid Column Name'
    })
  }

  const db = await useDB(event)

  const columnKey = columnName as keyof typeof columns
  const column = table[columnKey] as PgColumn
  const countQuery = db.select({ column, count: sql<number>`cast(count(*) as int)` })
    .from(table)
    .groupBy(column)
    .$dynamic()

  if (query?.filter) {
    const filters = processFilters(query.filter, columns)
    if (filters.length) {
      withFilters(countQuery, filters)
    }
  }

  const result = await countQuery
  return result
})



================================================
FILE: server/api/admin/list/[tableName].get.ts
================================================
import type { SQL } from 'drizzle-orm'
import type { PgSelect } from 'drizzle-orm/pg-core'
import { asc, desc, getTableColumns, sql } from 'drizzle-orm'
import { PgTable } from 'drizzle-orm/pg-core'
import { z } from 'zod'
import * as schema from '~~/server/database/schema'
import { isValidTable } from '~~/server/utils/db'
import { filterSchema, processFilters, withFilters } from '~~/server/utils/query'

function withSorts<T extends PgSelect>(
  qb: T,
  sorts: SQL[]
) {
  return qb.orderBy(...sorts)
}

function withPagination<T extends PgSelect>(
  qb: T,
  page: number = 1,
  pageSize: number = 10
) {
  return qb.limit(pageSize).offset((page - 1) * pageSize)
}

const sortSchema = z.array(
  z.tuple([
    z.string(),
    z.enum(['asc', 'desc'])
  ])
)

const querySchema = z.object({
  page: z.coerce.number().int().positive().default(1),
  limit: z.coerce.number().int().positive().max(100).default(20),
  filter: z.string()
    .transform((str) => {
      try {
        const parsed = JSON.parse(str)
        if (!Array.isArray(parsed))
          return []

        return parsed.reduce<z.infer<typeof filterSchema>>((validFilters, item) => {
          const result = filterSchema.element.safeParse(item)
          if (result.success) {
            validFilters.push(result.data)
          }
          return validFilters
        }, [])
      }
      catch {
        return []
      }
    })
    .optional(),
  sort: z.string()
    .transform((str) => {
      try {
        const parsed = JSON.parse(str)
        if (!Array.isArray(parsed))
          return []

        return parsed.reduce<z.infer<typeof sortSchema>>((validSorts, item) => {
          const result = sortSchema.element.safeParse(item)
          if (result.success) {
            validSorts.push(result.data)
          }
          return validSorts
        }, [])
      }
      catch {
        return []
      }
    })
    .optional()
})

export default eventHandler(async (event) => {
  const tableName = getRouterParam(event, 'tableName')
  if (!tableName) {
    throw createError({
      statusCode: 400,
      statusMessage: 'Bad Request',
      data: 'EMPTY_TABLE_NAME',
      message: 'Empty Table Name'
    })
  }

  if (!isValidTable(tableName)) {
    throw createError({
      statusCode: 400,
      statusMessage: 'Bad Request',
      data: 'INVALID_TABLE_NAME',
      message: 'Invalid Table Name'
    })
  }

  const table = schema[tableName]
  if (!(table instanceof PgTable)) {
    throw createError(
      {
        statusCode: 400,
        statusMessage: 'Bad Request',
        data: 'INVALID_TABLE_TYPE',
        message: 'Invalid Table Name'
      }
    )
  }
  const columns = getTableColumns(table)

  const query = await getValidatedQuery(event, querySchema.parse)
  const db = await useDB(event)

  const listQuery = db.select().from(table).$dynamic()
  const totalQuery = db.select({ count: sql<number>`cast(count(*) as int)` }).from(table).$dynamic()

  if (query) {
    // Handle filters
    if (query.filter) {
      const filters = processFilters(query.filter, columns)
      if (filters.length) {
        withFilters(listQuery, filters)
        withFilters(totalQuery, filters)
      }
    }
    // Handle sorting
    if (query.sort?.length) {
      const sorts: SQL[] = []
      for (const [field, direction] of query.sort) {
        if (field in columns) {
          const columnKey = field as keyof typeof columns
          const orderFunc = direction === 'desc' ? desc : asc
          sorts.push(orderFunc(columns[columnKey]))
        }
      }
      withSorts(listQuery, sorts)
    } else if ('id' in columns) {
      // Fallback sort to id desc
      const sorts: SQL[] = [desc(columns.id)]
      withSorts(listQuery, sorts)
    }
  }

  // Handle pagination
  const page = query?.page || 1
  const limit = query?.limit || 20
  withPagination(listQuery, page, limit)
  const count = await totalQuery
  const result = await listQuery

  return {
    data: result,
    total: count[0]?.count || 0,
    page,
    limit
  }
})



================================================
FILE: server/api/admin/maintenance/db-stats.ts
================================================
import { getDBStats } from '~~/server/utils/dbStats'

export default defineEventHandler(async () => {
  return getDBStats()
})



================================================
FILE: server/api/admin/maintenance/ensure-payment-customers.ts
================================================
import { eq } from 'drizzle-orm'
import { user as userTable } from '~~/server/database/schema'
import { useDB } from '~~/server/utils/db'
import { ensurePolarCustomer } from '~~/server/utils/polar'
import { runtimeConfig } from '~~/server/utils/runtimeConfig'
import { ensureStripeCustomer } from '~~/server/utils/stripe'

export default defineEventHandler(async (event) => {
  const db = await useDB(event)

  // Get all users from database
  const users = await db.select().from(userTable)

  const results = {
    totalUsers: users.length,
    stripeResults: [] as Array<{ userId: string, status: 'success' | 'error', message?: string }>,
    polarResults: [] as Array<{ userId: string, status: 'success' | 'error', message?: string }>
  }

  // Process each user
  for (const user of users) {
    // Ensure Stripe customer if Stripe is enabled
    if (runtimeConfig.public.payment === 'stripe' && runtimeConfig.stripeSecretKey) {
      if (user.stripeCustomerId) {
        results.stripeResults.push({
          userId: user.id,
          status: 'success'
        })
        continue
      }
      try {
        const customer = await ensureStripeCustomer(user)
        if (customer) {
          await db.update(userTable).set({
            stripeCustomerId: customer.id
          }).where(eq(userTable.id, user.id))
        }
        results.stripeResults.push({
          userId: user.id,
          status: 'success'
        })
      } catch (error) {
        results.stripeResults.push({
          userId: user.id,
          status: 'error',
          message: error instanceof Error ? error.message : 'Unknown error'
        })
      }
    }

    // Ensure Polar customer if Polar is enabled
    if (runtimeConfig.public.payment === 'polar' && runtimeConfig.polarAccessToken) {
      if (user.polarCustomerId) {
        results.polarResults.push({
          userId: user.id,
          status: 'success'
        })
        continue
      }
      try {
        const customer = await ensurePolarCustomer(user)
        if (customer && customer.externalId) {
          await db.update(userTable).set({
            polarCustomerId: customer.id
          }).where(eq(userTable.id, user.id))
        }
        results.polarResults.push({
          userId: user.id,
          status: 'success'
        })
      } catch (error) {
        results.polarResults.push({
          userId: user.id,
          status: 'error',
          message: error instanceof Error ? error.message : 'Unknown error'
        })
      }
    }
  }

  return {
    success: true,
    data: results,
    summary: {
      totalUsers: results.totalUsers,
      stripeSuccessCount: results.stripeResults.filter(r => r.status === 'success').length,
      stripeErrorCount: results.stripeResults.filter(r => r.status === 'error').length,
      polarSuccessCount: results.polarResults.filter(r => r.status === 'success').length,
      polarErrorCount: results.polarResults.filter(r => r.status === 'error').length
    }
  }
})



================================================
FILE: server/api/auth/[...all].ts
================================================
import { useServerAuth } from '~~/server/utils/auth'

export default defineEventHandler((event) => {
  const serverAuth = useServerAuth()
  return serverAuth.handler(toWebRequest(event))
})



================================================
FILE: server/database/drizzle.config.ts
================================================
import { defineConfig } from 'drizzle-kit'

export default defineConfig({
  dialect: 'postgresql',
  schema: './server/database/schema/index.ts',
  out: './server/database/migrations',
  dbCredentials: {
    url: process.env.NUXT_DATABASE_URL!
  }
})



================================================
FILE: server/database/schema/auditLog.ts
================================================
import { pgTable, serial, text, timestamp, uuid } from 'drizzle-orm/pg-core'
import { user } from './auth'

export const auditLog = pgTable('audit_log', {
  id: serial('id').primaryKey(),
  userId: uuid('user_id').references(() => user.id, { onDelete: 'set null' }),
  category: text('category').notNull(), // e.g., 'auth', 'email', 'payment'
  action: text('action').notNull(), // e.g., 'login', 'register', 'verification'
  targetType: text('target_type'), // e.g., 'user', 'email'
  targetId: text('target_id'), // ID of the target entity
  ipAddress: text('ip_address'),
  userAgent: text('user_agent'),
  status: text('status').notNull().default('success'), // e.g., 'success', 'failure', 'pending'
  details: text('details'), // Additional details or error messages
  createdAt: timestamp('created_at').notNull().$default(() => new Date())
})



================================================
FILE: server/database/schema/auth.ts
================================================
// generated using npm run auth:schema, and change text('id') to uuid('id')

import {
  boolean,
  integer,
  pgTable,
  text,
  timestamp,
  uuid
} from 'drizzle-orm/pg-core'

export const user = pgTable('user', {
  id: uuid('id').primaryKey(),
  name: text('name').notNull(),
  email: text('email').notNull().unique(),
  emailVerified: boolean('email_verified')
    .$defaultFn(() => false)
    .notNull(),
  image: text('image'),
  createdAt: timestamp('created_at')
    .$defaultFn(() => /* @__PURE__ */ new Date())
    .notNull(),
  updatedAt: timestamp('updated_at')
    .$defaultFn(() => /* @__PURE__ */ new Date())
    .notNull(),
  role: text('role'),
  banned: boolean('banned'),
  banReason: text('ban_reason'),
  banExpires: timestamp('ban_expires'),
  stripeCustomerId: text('stripe_customer_id'),
  polarCustomerId: text('polar_customer_id')
})

export const account = pgTable('account', {
  id: uuid('id').primaryKey(),
  accountId: text('account_id').notNull(),
  providerId: text('provider_id').notNull(),
  userId: uuid('user_id')
    .notNull()
    .references(() => user.id, { onDelete: 'cascade' }),
  accessToken: text('access_token'),
  refreshToken: text('refresh_token'),
  idToken: text('id_token'),
  accessTokenExpiresAt: timestamp('access_token_expires_at'),
  refreshTokenExpiresAt: timestamp('refresh_token_expires_at'),
  scope: text('scope'),
  password: text('password'),
  createdAt: timestamp('created_at').notNull(),
  updatedAt: timestamp('updated_at').notNull()
})

export const verification = pgTable('verification', {
  id: uuid('id').primaryKey(),
  identifier: text('identifier').notNull(),
  value: text('value').notNull(),
  expiresAt: timestamp('expires_at').notNull(),
  createdAt: timestamp('created_at').$defaultFn(
    () => /* @__PURE__ */ new Date()
  ),
  updatedAt: timestamp('updated_at').$defaultFn(
    () => /* @__PURE__ */ new Date()
  )
})

export const subscription = pgTable('subscription', {
  id: uuid('id').primaryKey(),
  plan: text('plan').notNull(),
  referenceId: text('reference_id').notNull(),
  stripeCustomerId: text('stripe_customer_id'),
  stripeSubscriptionId: text('stripe_subscription_id'),
  status: text('status').default('incomplete'),
  periodStart: timestamp('period_start'),
  periodEnd: timestamp('period_end'),
  cancelAtPeriodEnd: boolean('cancel_at_period_end'),
  seats: integer('seats')
})



================================================
FILE: server/database/schema/index.ts
================================================
export * from './auditLog'
export * from './auth'



================================================
FILE: server/middleware/0.common.ts
================================================
export default defineEventHandler(async (event) => {
  const start = performance.now()

  const { req, res } = event.node
  await res.on('finish', () => {
    const duration = Math.round(performance.now() - start)
    const statusCode = res.statusCode
    const method = req.method
    const url = req.url

    const timestamp = new Date().toLocaleString('en-US', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: false
    })
    // Access Log
    console.log(`[${timestamp}] ${method} ${url} ${statusCode} - ${duration}ms`)
  })
})



================================================
FILE: server/middleware/1.auth.ts
================================================
import { requireAuth } from '~~/server/utils/auth'

export default defineEventHandler(async (event) => {
  const path = event.path

  if (path?.startsWith('/api/admin')) {
    const session = await requireAuth(event)
    if (!session.user || (session.user as User).role !== 'admin') {
      throw createError({
        statusCode: 403,
        statusMessage: 'Forbidden',
        message: 'Admin access required.'
      })
    }
  }
})



================================================
FILE: server/types/hub.d.ts
================================================
import type { HubKV } from '@nuxthub/core'

declare global {
  const hubKV: () => HubKV
}

export {}



================================================
FILE: server/utils/auditLogger.ts
================================================
import { auditLog } from '../database/schema/auditLog'
import { getDB } from './db'

export async function logAuditEvent(data: {
  userId?: string
  category: 'auth' | 'email' | 'payment'
  action: string
  targetType?: string
  targetId?: string
  ipAddress?: string
  userAgent?: string
  status?: 'success' | 'failure' | 'pending'
  details?: string
}) {
  try {
    const db = getDB()
    await db.insert(auditLog).values({
      userId: data.userId,
      category: data.category,
      action: data.action,
      targetType: data.targetType,
      targetId: data.targetId,
      ipAddress: data.ipAddress,
      userAgent: data.userAgent,
      status: data.status || 'success',
      details: data.details
    })
  } catch (error) {
    console.error('Failed to log audit event:', error)
  }
}



================================================
FILE: server/utils/auth.ts
================================================
import type { H3Event } from 'h3'
import { betterAuth } from 'better-auth'
import { drizzleAdapter } from 'better-auth/adapters/drizzle'
import { APIError, createAuthMiddleware } from 'better-auth/api'
import { admin, openAPI } from 'better-auth/plugins'
import { v7 as uuidv7 } from 'uuid'
import * as schema from '../database/schema'
import { logAuditEvent } from './auditLogger'
import { getDB } from './db'
import { cacheClient, resendInstance } from './drivers'
import { setupPolar } from './polar'
import { runtimeConfig } from './runtimeConfig'
import { setupStripe } from './stripe'

console.log(`Base URL is ${runtimeConfig.public.baseURL}`)

const createBetterAuth = () => betterAuth({
  baseURL: runtimeConfig.public.baseURL,
  secret: runtimeConfig.betterAuthSecret,
  database: drizzleAdapter(
    getDB(),
    {
      provider: 'pg',
      schema
    }
  ),
  advanced: {
    database: {
      generateId: () => {
        return uuidv7()
      }
    }
  },
  user: {
    additionalFields: {
      polarCustomerId: {
        type: 'string',
        required: false,
        defaultValue: null
      }
    }
  },
  secondaryStorage: cacheClient,
  emailAndPassword: {
    enabled: true,
    requireEmailVerification: true,
    sendResetPassword: async ({ user, url }) => {
      const response = await resendInstance.emails.send({
        from: `${runtimeConfig.public.appName} <${runtimeConfig.public.appNotifyEmail}>`,
        to: user.email,
        subject: 'Reset your password',
        text: `Click the link to reset your password: ${url}`
      })
      await logAuditEvent({
        userId: user.id,
        category: 'email',
        action: 'reset_password',
        targetType: 'email',
        targetId: user.email,
        status: response.error ? 'failure' : 'success',
        details: response.error?.message
      })
      if (response.error) {
        console.error(`Failed to send reset password email: ${response.error.message}`)
        throw createError({
          statusCode: 500,
          statusMessage: 'Internal Server Error'
        })
      }
    }
  },
  emailVerification: {
    sendOnSignUp: true,
    autoSignInAfterVerification: true,
    sendVerificationEmail: async ({ user, url }) => {
      const response = await resendInstance.emails.send({
        from: `${runtimeConfig.public.appName} <${runtimeConfig.public.appNotifyEmail}>`,
        to: user.email,
        subject: 'Verify your email address',
        text: `Click the link to verify your email: ${url}`
      })
      await logAuditEvent({
        userId: user.id,
        category: 'email',
        action: 'verification',
        targetType: 'email',
        targetId: user.email,
        status: response.error ? 'failure' : 'success',
        details: response.error?.message
      })
      if (response.error) {
        console.error(`Failed to send verification email: ${response.error.message}`)
        throw createError({
          statusCode: 500,
          statusMessage: 'Internal Server Error'
        })
      }
    }
  },
  socialProviders: {
    github: {
      clientId: runtimeConfig.githubClientId!,
      clientSecret: runtimeConfig.githubClientSecret!
    },
    google: {
      clientId: runtimeConfig.googleClientId!,
      clientSecret: runtimeConfig.googleClientSecret!
    }
  },
  account: {
    accountLinking: {
      enabled: true
    }
  },
  hooks: {
    after: createAuthMiddleware(async (ctx) => {
      const ipAddress = ctx.getHeader('x-forwarded-for')
        || ctx.getHeader('remoteAddress') || undefined
      const userAgent = ctx.getHeader('user-agent') || undefined

      let targetType
      let targetId
      if (ctx.context.session) {
        targetType = 'user'
        targetId = ctx.context.session.user.id
      } else if (['/sign-in/email', '/sign-up/email', 'forget-password'].includes(ctx.path)) {
        targetType = 'email'
        targetId = ctx.body.email || ''
      }

      if (ctx.context.returned && ctx.context.returned instanceof APIError) {
        await logAuditEvent({
          userId: ctx.context.session?.user.id,
          category: 'auth',
          action: ctx.path,
          targetType,
          targetId,
          ipAddress,
          userAgent,
          status: 'failure',
          details: ctx.context.returned.body?.message
        })
      } else {
        if (['/sign-in/email', '/sign-up/email', '/forget-password', '/reset-password'].includes(ctx.path)) {
          let userId: string | undefined
          if (['/sign-in/email', '/sign-up/email'].includes(ctx.path)) {
            userId = ctx.context.newSession?.user.id
          } else {
            userId = ctx.context.session?.user.id
          }
          await logAuditEvent({
            userId,
            category: 'auth',
            action: ctx.path,
            targetType,
            targetId,
            ipAddress,
            userAgent,
            status: 'success'
          })
        }
      }
    })
  },
  plugins: [
    ...(runtimeConfig.public.appEnv === 'development' ? [openAPI()] : []),
    admin(),
    setupStripe(),
    setupPolar()
  ]
})

let _auth: ReturnType<typeof betterAuth>

// Used by npm run auth:schema only.
const isAuthSchemaCommand = process.argv.some(arg => arg.includes('server/database/schema/auth.ts'))
if (isAuthSchemaCommand) {
  _auth = createBetterAuth()
}
export const auth = _auth!

export const useServerAuth = () => {
  if (runtimeConfig.preset == 'node-server') {
    if (!_auth) {
      _auth = createBetterAuth()
    }
    return _auth
  } else {
    return createBetterAuth()
  }
}

export const getAuthSession = async (event: H3Event) => {
  const headers = event.headers
  const serverAuth = useServerAuth()
  const session = await serverAuth.api.getSession({
    headers
  })
  return session
}

export const requireAuth = async (event: H3Event) => {
  const session = await getAuthSession(event)
  if (!session) {
    throw createError({
      statusCode: 401,
      statusMessage: 'Unauthorized'
    })
  }
  // Save the session to the event context for later use
  event.context.auth = session!
  return session!
}



================================================
FILE: server/utils/db.ts
================================================
import type { NodePgDatabase } from 'drizzle-orm/node-postgres'
import type { EventHandlerRequest, H3Event } from 'h3'
import { drizzle } from 'drizzle-orm/node-postgres'

import * as schema from '../database/schema'
import { getPgPool } from './drivers'
import { runtimeConfig } from './runtimeConfig'

const createDB = (dbSchema?: typeof schema) => {
  return drizzle({ client: getPgPool(), schema: dbSchema })
}

let db: ReturnType<typeof createDB>

export const getDB = () => {
  if (runtimeConfig.preset == 'node-server') {
    if (!db) {
      db = createDB()
    }
    return db
  } else {
    return createDB()
  }
}

// use db with schema
export const useDB = async (event?: H3Event<EventHandlerRequest>): Promise<NodePgDatabase<typeof schema>> => {
  // If the event has a context with a db property, return it
  if (event && event.context.db) {
    return event.context.db
  }
  // Otherwise, create a new connection to the database
  const dbInstance = createDB(schema)
  if (event) {
    event.context.db = dbInstance
  }
  return dbInstance
}

export type TableNames = keyof typeof schema

export function isValidTable(table: string): table is TableNames {
  return table in schema
}



================================================
FILE: server/utils/dbStats.ts
================================================
import { getPgPool } from './drivers'

export async function getDBStats() {
  const db = await getPgPool().connect()
  const dbStatsResult = await db.query(`
    SELECT
      numbackends as active_backends,
      xact_commit as commits,
      xact_rollback as rollbacks,
      blks_read,
      blks_hit,
      tup_returned,
      tup_fetched,
      tup_inserted,
      tup_updated,
      tup_deleted,
      conflicts,
      temp_files,
      temp_bytes,
      deadlocks
    FROM pg_stat_database
    WHERE datname = current_database()
  `)
  db.release()
  const dbStats = dbStatsResult.rows[0]
  const cacheHitRatio = dbStats.blks_hit / (dbStats.blks_read + dbStats.blks_hit) * 100

  return {
    activeBackends: Number(dbStats.active_backends),
    transactions: {
      commits: Number(dbStats.commits),
      rollbacks: Number(dbStats.rollbacks)
    },
    tuples: {
      returned: Number(dbStats.tup_returned),
      fetched: Number(dbStats.tup_fetched),
      inserted: Number(dbStats.tup_inserted),
      updated: Number(dbStats.tup_updated),
      deleted: Number(dbStats.tup_deleted)
    },
    cacheHitRatio: Math.round(cacheHitRatio * 100) / 100,
    conflicts: Number(dbStats.conflicts),
    deadlocks: Number(dbStats.deadlocks),
    tempFiles: {
      count: Number(dbStats.temp_files),
      bytes: Number(dbStats.temp_bytes)
    }
  }
}



================================================
FILE: server/utils/drivers.ts
================================================
import type { Hyperdrive } from '@cloudflare/workers-types'
import Redis from 'ioredis'
import pg from 'pg'
import { Resend } from 'resend'
import { runtimeConfig } from './runtimeConfig'

const getDatabaseUrl = () => {
// @ts-expect-error globalThis.__env__ is not defined
  const hyperdrive = (process.env.HYPERDRIVE || globalThis.__env__?.HYPERDRIVE || globalThis.HYPERDRIVE) as Hyperdrive | undefined
  if (runtimeConfig.preset == 'node-server') {
    return runtimeConfig.databaseUrl
  } else {
    return hyperdrive?.connectionString || runtimeConfig.databaseUrl
  }
}

const createPgPool = () => new pg.Pool({
  connectionString: getDatabaseUrl(),
  max: 90,
  idleTimeoutMillis: 30000
})

let pgPool: pg.Pool

// PG Pool
export const getPgPool = () => {
  if (runtimeConfig.preset == 'node-server') {
    if (!pgPool) {
      pgPool = createPgPool()
    }
    return pgPool
  } else {
    return createPgPool()
  }
}

// Cache Client
let redisClient: Redis | undefined

const getRedisClient = () => {
  if (redisClient) {
    return redisClient
  } else {
    if (runtimeConfig.preset == 'node-server') {
      redisClient = new Redis(runtimeConfig.redisUrl)
      return redisClient
    }
  }
}

export const cacheClient = {
  get: async (key: string) => {
    const client = getRedisClient()
    if (client) {
      const value = await client.get(key)
      return value
    } else {
      const value = await hubKV().get(key)
      if (!value) {
        return null
      }
      return JSON.stringify(value)
    }
  },
  set: async (key: string, value: string, ttl: number | undefined) => {
    const client = getRedisClient()
    const stringValue = typeof value === 'string' ? value : JSON.stringify(value)
    if (client) {
      if (ttl) {
        await client.set(key, stringValue, 'EX', ttl)
      } else {
        await client.set(key, stringValue)
      }
    } else {
      if (ttl) {
        await hubKV().set(key, stringValue, { ttl })
      } else {
        await hubKV().set(key, stringValue)
      }
    }
  },
  delete: async (key: string) => {
    const client = getRedisClient()
    if (client) {
      await client.del(key)
    } else {
      await hubKV().del(key)
    }
  }
}

export const resendInstance = new Resend(runtimeConfig.resendApiKey)



================================================
FILE: server/utils/polar.ts
================================================
import type { Benefit } from '@polar-sh/sdk/models/components/benefit.js'
import type { BenefitGrantWebhook } from '@polar-sh/sdk/models/components/benefitgrantwebhook.js'
import type { Checkout } from '@polar-sh/sdk/models/components/checkout.js'
import type { Customer } from '@polar-sh/sdk/models/components/customer.js'
import type { CustomerState } from '@polar-sh/sdk/models/components/customerstate.js'
import type { Order } from '@polar-sh/sdk/models/components/order.js'
import type { Organization } from '@polar-sh/sdk/models/components/organization.js'
import type { Product } from '@polar-sh/sdk/models/components/product.js'
import type { Refund } from '@polar-sh/sdk/models/components/refund.js'
import type { Subscription } from '@polar-sh/sdk/models/components/subscription.js'
import { checkout, polar, portal, usage, webhooks } from '@polar-sh/better-auth'
import { Polar } from '@polar-sh/sdk'
import { eq } from 'drizzle-orm'
import { user as userTable } from '../database/schema'
import { runtimeConfig } from './runtimeConfig'

const createPolarClient = () => {
  return new Polar({
    accessToken: runtimeConfig.polarAccessToken,
    server: runtimeConfig.polarServer as 'sandbox' | 'production'
  })
}

export const ensurePolarCustomer = async (user: User) => {
  const client = createPolarClient()
  const { result: existingCustomers } = await client.customers.list({ email: user.email })
  const existingCustomer = existingCustomers.items[0]
  if (existingCustomer) {
    if (existingCustomer.externalId !== user.id) {
      await client.customers.update({
        id: existingCustomer.id,
        customerUpdate: {
          externalId: user.id
        }
      })
    }
    return existingCustomer
  } else {
    const customer = await client.customers.create({
      email: user.email,
      name: user.name,
      externalId: user.id
    })
    return customer
  }
}

const addPaymentLog = async (hookType: string, data: Customer | Checkout | Benefit | BenefitGrantWebhook | Order | Organization | Product | Refund | Subscription | CustomerState) => {
  if (hookType.startsWith('checkout.')) {
    const checkout = data as Checkout
    await logAuditEvent({
      userId: checkout.customerExternalId || undefined,
      category: 'payment',
      action: `polar:${hookType}:${checkout.product.name}`,
      targetType: 'polarExternalId',
      targetId: checkout.customerExternalId || checkout.metadata.email as string,
      status: 'success'
    })
  } else if (hookType.startsWith('customer.')) {
    const customer = data as Customer
    if (hookType == 'customer.created' && customer.externalId) {
      const db = await useDB()
      await db.update(userTable).set({
        polarCustomerId: customer.id
      }).where(eq(userTable.id, customer.externalId))
    }
    await logAuditEvent({
      userId: customer.externalId || undefined,
      category: 'payment',
      action: `polar:${hookType}`,
      targetType: 'polarExternalId',
      targetId: customer.externalId || undefined,
      status: 'success'
    })
  } else if (hookType.startsWith('subscription.')) {
    const subscription = data as Subscription
    await logAuditEvent({
      userId: subscription.customer.externalId || undefined,
      category: 'payment',
      action: `polar:${hookType}:${subscription.product.name}`,
      targetType: 'polarExternalId',
      targetId: subscription.customer.externalId || undefined,
      status: 'success'
    })
  }
}

export const setupPolar = () => polar({
  client: createPolarClient(),
  createCustomerOnSignUp: runtimeConfig.public.payment == 'polar',
  use: [
    checkout({
      products: [
        {
          productId: runtimeConfig.polarProductIdProMonth,
          slug: 'pro-monthly'
        },
        {
          productId: runtimeConfig.polarProductIdProYear,
          slug: 'pro-yearly'
        }
      ],
      successUrl: '/',
      authenticatedUsersOnly: true
    }),
    portal(),
    usage(),
    webhooks({
      // On Polar Organization Settings: {APP_URL}/api/auth/polar/webhooks
      secret: runtimeConfig.polarWebhookSecret,
      onPayload: async (payload) => {
        // Catch-all for all events
        await addPaymentLog(payload.type || '', payload.data)
      }
    })
  ]
})



================================================
FILE: server/utils/query.ts
================================================
import type { SQL } from 'drizzle-orm'
import type { PgColumn, PgSelect } from 'drizzle-orm/pg-core'
import { and, eq, gte, ilike, inArray, lte } from 'drizzle-orm'
import { z } from 'zod'

export const filterSchema = z.array(
  z.union([
    z.object({
      col: z.string(),
      op: z.literal('between'),
      v: z.tuple([z.string(), z.string()])
    }),
    z.object({
      col: z.string(),
      op: z.literal('in'),
      v: z.array(z.string()).min(1)
    }),
    z.object({
      col: z.string(),
      op: z.literal('like'),
      v: z.string()
    }),
    z.object({
      col: z.string(),
      op: z.literal('eq'),
      v: z.string()
    })
  ])
)

export function processFilters(
  filters: z.infer<typeof filterSchema>,
  columns: Record<string, PgColumn>
): SQL[] {
  const sqlFilters: SQL[] = []

  for (const filter of filters) {
    if (filter.col in columns) {
      const columnKey = filter.col as keyof typeof columns
      const column = columns[columnKey]
      if (filter.op === 'between') {
        sqlFilters.push(
          and(
            gte(column, new Date(filter.v[0])),
            lte(column, new Date(filter.v[1]))
          )!
        )
      } else if (filter.op === 'in') {
        sqlFilters.push(
          inArray(column, filter.v)
        )
      } else if (filter.op === 'like') {
        sqlFilters.push(
          ilike(column, `%${filter.v}%`)
        )
      } else if (filter.op === 'eq') {
        sqlFilters.push(
          eq(column, filter.v)
        )
      }
    }
  }

  return sqlFilters
}

export function withFilters<T extends PgSelect>(
  qb: T,
  filters: SQL[]
) {
  return filters.length ? qb.where(and(...filters)) : qb
}



================================================
FILE: server/utils/runtimeConfig.ts
================================================
import type { NitroRuntimeConfig } from 'nitropack/types'
import { config } from 'dotenv'

let runtimeConfigInstance: NitroRuntimeConfig

export const generateRuntimeConfig = () => ({
  preset: process.env.NUXT_NITRO_PRESET,
  betterAuthSecret: process.env.NUXT_BETTER_AUTH_SECRET,
  // Stripe
  stripeSecretKey: process.env.NUXT_STRIPE_SECRET_KEY,
  stripeWebhookSecret: process.env.NUXT_STRIPE_WEBHOOK_SECRET,
  stripePriceIdProMonth: process.env.NUXT_STRIPE_PRICE_ID_PRO_MONTH,
  stripePriceIdProYear: process.env.NUXT_STRIPE_PRICE_ID_PRO_YEAR,
  // Polar
  polarServer: process.env.NUXT_POLAR_SERVER,
  polarAccessToken: process.env.NUXT_POLAR_ACCESS_TOKEN,
  polarWebhookSecret: process.env.NUXT_POLAR_WEBHOOK_SECRET,
  polarProductIdProMonth: process.env.NUXT_POLAR_PRODUCT_ID_PRO_MONTH,
  polarProductIdProYear: process.env.NUXT_POLAR_PRODUCT_ID_PRO_YEAR,
  // Resend
  resendApiKey: process.env.NUXT_RESEND_API_KEY,
  // Github
  githubClientId: process.env.NUXT_GH_CLIENT_ID,
  githubClientSecret: process.env.NUXT_GH_CLIENT_SECRET,
  // Google
  googleClientId: process.env.NUXT_GOOGLE_CLIENT_ID,
  googleClientSecret: process.env.NUXT_GOOGLE_CLIENT_SECRET,
  // DB
  redisUrl: process.env.NUXT_REDIS_URL,
  databaseUrl: process.env.NUXT_DATABASE_URL,
  public: {
    baseURL: process.env.NUXT_APP_URL,
    appName: process.env.NUXT_APP_NAME,
    appEnv: process.env.NODE_ENV,
    appRepo: process.env.NUXT_APP_REPO,
    appNotifyEmail: process.env.NUXT_APP_NOTIFY_EMAIL,
    appContactEmail: process.env.NUXT_APP_CONTACT_EMAIL,
    payment: process.env.NUXT_PAYMENT || 'stripe',
    auth: {
      redirectUserTo: '/',
      redirectGuestTo: '/signin'
    }
  }
})

if (typeof useRuntimeConfig !== 'undefined') {
  runtimeConfigInstance = useRuntimeConfig()
} else {
  // for cli: npm run auth:schema
  config()
  runtimeConfigInstance = generateRuntimeConfig() as NitroRuntimeConfig
}

export const runtimeConfig = runtimeConfigInstance



================================================
FILE: server/utils/stripe.ts
================================================
import type { Subscription } from '@better-auth/stripe'
import { stripe } from '@better-auth/stripe'
import { eq } from 'drizzle-orm'
import Stripe from 'stripe'
import { user as userTable } from '../database/schema'
import { logAuditEvent } from './auditLogger'
import { useDB } from './db'
import { runtimeConfig } from './runtimeConfig'

const createStripeClient = () => {
  return new Stripe(runtimeConfig.stripeSecretKey!)
}

export const ensureStripeCustomer = async (user: User) => {
  const client = createStripeClient()

  // Check if customer already exists
  const customers = await client.customers.list({
    email: user.email,
    limit: 1
  })

  if (customers.data.length > 0) {
    return customers.data[0]
  }

  // Create new customer if not exists
  const customer = await client.customers.create({
    email: user.email,
    name: user.name,
    metadata: {
      userId: user.id
    }
  })

  return customer
}

const getUserByStripeCustomerId = async (stripeCustomerId: string) => {
  const db = await useDB()
  const user = db.query.user.findFirst({
    where: eq(userTable.stripeCustomerId, stripeCustomerId)
  })
  return user
}

const addPaymentLog = async (action: string, subscription: Subscription) => {
  const user = await getUserByStripeCustomerId(subscription.stripeCustomerId!)
  await logAuditEvent({
    userId: user!.id,
    category: 'payment',
    action: `${action}:${subscription.plan}`,
    targetType: 'stripeCustomerId',
    targetId: subscription.stripeCustomerId,
    status: 'success'
  })
}

export const setupStripe = () => stripe({
  stripeClient: createStripeClient(),
  stripeWebhookSecret: runtimeConfig.stripeWebhookSecret,
  createCustomerOnSignUp: runtimeConfig.public.payment == 'stripe',
  subscription: {
    enabled: true,
    plans: [
      {
        name: 'pro-monthly',
        priceId: runtimeConfig.stripePriceIdProMonth,
        freeTrial: {
          days: 14,
          onTrialStart: async (subscription) => {
            // Called when a trial starts
            await addPaymentLog('trial_start', subscription)
          },
          onTrialEnd: async ({ subscription }) => {
            // Called when a trial ends
            await addPaymentLog('trial_end', subscription)
          },
          onTrialExpired: async (subscription) => {
            // Called when a trial expires without conversion
            await addPaymentLog('trial_expired', subscription)
          }
        }
      },
      {
        name: 'pro-yearly',
        priceId: runtimeConfig.stripePriceIdProYear,
        freeTrial: {
          days: 14,
          onTrialStart: async (subscription) => {
            // Called when a trial starts
            await addPaymentLog('trial_start', subscription)
          },
          onTrialEnd: async ({ subscription }) => {
            // Called when a trial ends
            await addPaymentLog('trial_end', subscription)
          },
          onTrialExpired: async (subscription) => {
            // Called when a trial expires without conversion
            await addPaymentLog('trial_expired', subscription)
          }
        }
      }
    ],
    onSubscriptionComplete: async ({ subscription }) => {
      // Called when a subscription is successfully created
      await addPaymentLog('subscription_created', subscription)
    },
    onSubscriptionUpdate: async ({ subscription }) => {
      // Called when a subscription is updated
      await addPaymentLog('subscription_updated', subscription)
    },
    onSubscriptionCancel: async ({ subscription }) => {
      // Called when a subscription is canceled
      await addPaymentLog('subscription_canceled', subscription)
    },
    onSubscriptionDeleted: async ({ subscription }) => {
      // Called when a subscription is deleted
      await addPaymentLog('subscription_deleted', subscription)
    }
  }
})



================================================
FILE: shared/utils/types.ts
================================================
import type { user } from '~~/server/database/schema'

export type User = typeof user.$inferSelect



================================================
FILE: tests/setup.ts
================================================
import { beforeAll } from 'vitest'

beforeAll(() => {
  // Global setup code can be added here
})



================================================
FILE: tests/e2e/app.test.ts
================================================
import { createPage, setup } from '@nuxt/test-utils/e2e'
import { afterEach, beforeEach, describe, expect, it } from 'vitest'

describe('app', async () => {
  await setup({ host: process.env.NUXT_TEST_APP_URL })

  beforeEach(() => {
    // tell vitest we use mocked time
    console.log('beforeEach test')
  })

  afterEach(() => {
    // restoring date after each test run
    console.log('afterEach test')
  })

  it('should load homepage successfully', async () => {
    const page = await createPage('/')
    const h1 = await page.$('h1')
    expect(await h1?.textContent()).eq('NuxSaaS')
  })
})



================================================
FILE: tests/e2e/auth.test.ts
================================================
import { createPage, setup } from '@nuxt/test-utils/e2e'
import { describe, expect, it } from 'vitest'

describe('auth', async () => {
  const host = process.env.NUXT_TEST_APP_URL
  await setup({
    host
  })

  describe('guest routes', () => {
    it('should allow guest access to signin page', async () => {
      const page = await createPage('/signin')
      const signinButton = await page.$('button:has-text("Sign In")')
      expect(signinButton).toBeTruthy()
    })

    it('should redirect authenticated user away from signin page', async () => {
      const page = await createPage('/signin')
      await page.fill('input[name="email"]', process.env.NUXT_TEST_EMAIL!)
      await page.fill('input[name="password"]', process.env.NUXT_TEST_PASSWORD!)
      await page.click('button[type="submit"]')
      await page.waitForLoadState('networkidle')
      expect(page.url()).toEqual(`${host}/`)

      // // Try accessing signin page while logged in
      await page.goto(`${host}/signin`)
      await page.waitForLoadState('networkidle')
      expect(page.url()).toEqual(`${host}/`)
    })
  })

  describe('auth disabled routes', () => {
    it('should allow guest access to pricing page', async () => {
      const page = await createPage('/pricing')
      await page.waitForLoadState('networkidle')
      expect(page.url()).toEqual(`${host}/pricing`)
      const salesButton = await page.$('a:has-text("Contact Sales")')
      expect(salesButton).toBeTruthy()
    })

    it('should allow user access to pricing page', async () => {
      const page = await createPage('/signin')
      await page.fill('input[name="email"]', process.env.NUXT_TEST_EMAIL!)
      await page.fill('input[name="password"]', process.env.NUXT_TEST_PASSWORD!)
      await page.click('button[type="submit"]')
      await page.waitForLoadState('networkidle')
      expect(page.url()).toEqual(`${host}/`)

      // // Try accessing signin page while logged in
      await page.goto(`${host}/pricing`)
      await page.waitForLoadState('networkidle')
      expect(page.url()).toEqual(`${host}/pricing`)
      const salesButton = await page.$('a:has-text("Contact Sales")')
      expect(salesButton).toBeTruthy() })
  })

  describe('guest should not access auth only pages.', () => {
    it('should redirect unauthenticated user to signin when accessing profile', async () => {
      const page = await createPage('/profile')
      await page.waitForLoadState('networkidle')
      expect(page.url()).toContain('/signin')
      expect(page.url()).toContain('redirect=/profile')
    })

    it('should redirect unauthenticated user to signin when accessing admin', async () => {
      const page = await createPage('/admin')
      await page.waitForLoadState('networkidle')
      expect(page.url()).toContain('/signin')
      expect(page.url()).toContain('redirect=/admin')
    })

    it('should redirect to localized signin with correct redirect parameter', async () => {
      const page = await createPage('/fr/admin')
      await page.waitForLoadState('networkidle')

      expect(page.url()).toContain('/fr/signin')
      expect(page.url()).toContain('redirect=/fr/admin')
    })
  })

  describe('admin users can access admin pages', () => {
    it('authenticated user can access profile page', async () => {
      // Login as regular user
      const page = await createPage('/signin')
      await page.fill('input[name="email"]', process.env.NUXT_TEST_EMAIL!)
      await page.fill('input[name="password"]', process.env.NUXT_TEST_PASSWORD!)
      await page.click('button[type="submit"]')
      await page.waitForLoadState('networkidle')

      // Try accessing profile page
      await page.goto(`${host}/profile`)
      await page.waitForLoadState('networkidle')
      expect(page.url()).toContain('/profile')
    })

    it('should redirect non-admin user to 403', async () => {
      // Login as regular user
      const page = await createPage('/signin')
      await page.fill('input[name="email"]', process.env.NUXT_TEST_EMAIL!)
      await page.fill('input[name="password"]', process.env.NUXT_TEST_PASSWORD!)
      await page.click('button[type="submit"]')
      await page.waitForLoadState('networkidle')

      // Try accessing admin page
      await page.goto(`${host}/admin`)
      await page.waitForLoadState('networkidle')
      expect(page.url()).toContain('/403')
    })

    it('admin user can access admin dashboard', async () => {
      // Login as admin
      const page = await createPage('/signin')
      await page.fill('input[name="email"]', process.env.NUXT_ADMIN_EMAIL!)
      await page.fill('input[name="password"]', process.env.NUXT_ADMIN_PASSWORD!)
      await page.click('button[type="submit"]')
      await page.waitForLoadState('networkidle')

      // Access admin page
      await page.goto(`${host}/admin`)
      await page.waitForLoadState('networkidle')
      expect(page.url()).toContain('/admin/dashboard')
    })
  })
})



================================================
FILE: tests/e2e/i18n.test.ts
================================================
import { createPage, setup } from '@nuxt/test-utils/e2e'
import { describe, expect, it } from 'vitest'

describe('i18n', async () => {
  await setup({ host: process.env.NUXT_TEST_APP_URL })

  it('should load homepage in different languages', async () => {
    // English
    const enPage = await createPage('/')
    const startBtn = await enPage.$('a:has-text("Get Started")')
    expect(startBtn).toBeTruthy()

    // French
    const frPage = await createPage('/fr')
    const frTitle = await frPage.$('a:has-text("Commencer")')
    expect(frTitle).toBeTruthy()

    // Japanese
    const jaPage = await createPage('/ja')
    const jaTitle = await jaPage.$('a:has-text("å§‹ã‚ã¾ã—ã‚‡ã†")')
    expect(jaTitle).toBeTruthy()

    // Chinese
    const zhPage = await createPage('/zh-CN')
    const zhTitle = await zhPage.$('a:has-text("å¼€å§‹ä½¿ç”¨")')
    expect(zhTitle).toBeTruthy()
  })

  it('should handle language switching', async () => {
    const page = await createPage('/')

    // Switch to French
    await page.click('button[aria-label="Change language"]')
    await page.click('span:has-text("FranÃ§ais")')
    await page.waitForLoadState('networkidle')

    expect(page.url()).toContain('/fr')
  })

  it('should maintain language preference across pages', async () => {
    // Navigate to signin page
    const page = await createPage('/fr')
    await page.click('a:has-text("Commencer")')
    await page.waitForLoadState('networkidle')
    expect(page.url()).toContain('/fr/signin')

    // Navigate to signup page
    await page.click('a:has-text("CrÃ©ez-en un")')
    await page.waitForURL('**/fr/signup')
    expect(page.url()).toContain('/fr/signup')

    // Navigate back to signin page
    await page.click('a:has-text("Connectez-vous ici")')
    await page.waitForURL('**/fr/signin')
    expect(page.url()).toContain('/fr/signin')

    // Navigate to forgot-password page
    await page.click('a:has-text("Mot de passe oubliÃ©")')
    await page.waitForURL('**/fr/forgot-password')
    expect(page.url()).toContain('/fr/forgot-password')

    // Navigate back to signin page
    await page.click('a:has-text("Retour Ã  la connexion")')
    await page.waitForURL('**/fr/signin')
    expect(page.url()).toContain('/fr/signin')

    // Navigate back to home page
    await page.click(`span:has-text("${process.env.NUXT_APP_NAME}")`)
    await page.waitForURL('**/fr')
    const isEndsWithFr = page.url().endsWith('/fr')
    expect(isEndsWithFr).toBeTruthy()

    // Navigate to pricing page
    await page.click(`a:has-text("Tarification")`)
    await page.waitForURL('**/fr/pricing')
    expect(page.url()).toContain('/fr/pricing')
  })
})



================================================
FILE: tests/e2e/signin.test.ts
================================================
import { createPage, setup } from '@nuxt/test-utils/e2e'
import { describe, expect, it } from 'vitest'

describe('signin', async () => {
  await setup({ host: process.env.NUXT_TEST_APP_URL })

  it('should show signin form', async () => {
    const page = await createPage('/signin')
    const title = await page.$('h1')
    expect(await title?.textContent()).toContain(`Welcome to ${process.env.NUXT_APP_NAME}`)
  })

  it('should validate form fields', async () => {
    const page = await createPage('/signin')
    await page.fill('input[name="email"]', 'invalid-email')
    await page.fill('input[name="password"]', '123')

    await page.click('h1')

    const errors = await page.$$('[id^="v-"][id$="-error"]')
    expect(errors.length).toEqual(2)
    expect(await errors[0]?.textContent()).toEqual('Invalid email address')
    expect(await errors[1]?.textContent()).toEqual('Password must be at least 8 characters')
  })

  it('should validate form fields in FranÃ§ais', async () => {
    const page = await createPage('/fr/signin')
    await page.fill('input[name="email"]', 'invalid-email')
    await page.fill('input[name="password"]', '123')

    await page.click('h1')

    const errors = await page.$$('[id^="v-"][id$="-error"]')
    expect(errors.length).toEqual(2)
    expect(await errors[0]?.textContent()).toEqual('Adresse e-mail invalide')
    expect(await errors[1]?.textContent()).toEqual('Le mot de passe doit contenir au moins 8 caractÃ¨res')
  })

  it('should submit valid signup form', async () => {
    const page = await createPage('/signin')

    await page.fill('input[name="email"]', 'test@example.com')
    await page.fill('input[name="password"]', 'password123')

    await page.click('h1')

    const errors = await page.$$('[id^="v-"][id$="-error"]')
    expect(errors.length).toEqual(0)
  })

  it('should have working social login buttons', async () => {
    const page = await createPage('/signin')

    const googleButton = await page.$('button:has-text("Google")')
    const githubButton = await page.$('button:has-text("Github")')

    expect(googleButton).toBeTruthy()
    expect(githubButton).toBeTruthy()
  })
})



================================================
FILE: tests/e2e/signup.test.ts
================================================
import { createPage, setup } from '@nuxt/test-utils/e2e'
import { describe, expect, it } from 'vitest'

describe('signup', async () => {
  await setup({ host: process.env.NUXT_TEST_APP_URL })

  it('should show signup form', async () => {
    const page = await createPage('/signup')
    const title = await page.$('h1')
    expect(await title?.textContent()).toContain('Create your account')
  })

  it('should validate form fields', async () => {
    const page = await createPage('/signup')
    await page.fill('input[name="name"]', 'te')
    await page.fill('input[name="email"]', 'invalid-email')
    await page.fill('input[name="password"]', '123')
    await page.fill('input[name="confirmPassword"]', '1234')

    await page.click('h1')

    const errors = await page.$$('[id^="v-"][id$="-error"]')
    expect(errors.length).toEqual(4)
    expect(await errors[0]?.textContent()).toEqual('Name must be at least 5 characters')
    expect(await errors[1]?.textContent()).toEqual('Invalid email address')
    expect(await errors[2]?.textContent()).toEqual('Password must be at least 8 characters')
    expect(await errors[3]?.textContent()).toEqual('Passwords don\'t match')
  })

  it('should validate form fields in FranÃ§ais', async () => {
    const page = await createPage('/fr/signup')
    await page.fill('input[name="name"]', 'te')
    await page.fill('input[name="email"]', 'invalid-email')
    await page.fill('input[name="password"]', '123')
    await page.fill('input[name="confirmPassword"]', '1234')

    await page.click('h1')

    const errors = await page.$$('[id^="v-"][id$="-error"]')
    expect(errors.length).toEqual(4)
    expect(await errors[0]?.textContent()).toEqual('Le nom doit contenir au moins 5 caractÃ¨res')
    expect(await errors[1]?.textContent()).toEqual('Adresse email invalide')
    expect(await errors[2]?.textContent()).toEqual('Le mot de passe doit contenir au moins 8 caractÃ¨res')
    expect(await errors[3]?.textContent()).toEqual('Les mots de passe ne correspondent pas')
  })

  it('should submit valid signup form', async () => {
    const page = await createPage('/signup')

    await page.fill('input[name="name"]', 'Test User')
    await page.fill('input[name="email"]', 'test@example.com')
    await page.fill('input[name="password"]', 'password123')
    await page.fill('input[name="confirmPassword"]', 'password123')

    await page.click('h1')

    const errors = await page.$$('[id^="v-"][id$="-error"]')
    expect(errors.length).toEqual(0)
  })

  it('should have working social login buttons', async () => {
    const page = await createPage('/signup')

    const googleButton = await page.$('button:has-text("Google")')
    const githubButton = await page.$('button:has-text("Github")')

    expect(googleButton).toBeTruthy()
    expect(githubButton).toBeTruthy()
  })
})



================================================
FILE: .github/FUNDING.yml
================================================
patreon: NuxSaaS



================================================
FILE: .husky/pre-commit
================================================
npm run lint -- --max-warnings=0

